"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4084],{30449:(e,t,a)=>{a.d(t,{e:()=>c});var i=a(30758),s=a(61621),n=a(56116),l=a(67759),r=a(86070);const o=i.memo((function({uri:e,size:t=s.M.md,className:a,onClick:o,showUpsell:c,canDownload:d,condensed:u}){const[m,p]=(0,l.A)(e),h=(0,n.W)(),g=(0,i.useCallback)((()=>{h({targetUri:e,intent:m?"remove-from-library":"add-to-library",type:"click"}),p(!m)}),[h,e,m,p]);return(0,r.jsx)(s.f,{className:a,isFollowing:m,onFollow:g,onClick:o,uri:e,size:t,showUpsell:c,canDownload:d,condensed:u})})),c=i.memo((function(e){return(0,r.jsx)(o,{...e})}))},10161:(e,t,a)=>{a.d(t,{b:()=>o});var i=a(30758),s=a(39782),n=a(56116),l=a(67759),r=a(86070);const o=i.memo((function({uri:e,className:t,onClick:a,size:o=s.t.xs,condensed:c}){const[d,u]=(0,l.A)(e),m=(0,n.W)(),p=(0,i.useCallback)((t=>{t.preventDefault(),m({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),a&&a(!d),u(!d)}),[m,e,d,a,u]);return(0,r.jsx)(s.M,{className:t,size:o,onClick:p,isAdded:!!d,isEpisode:!0,condensed:c})}))},81875:(e,t,a)=>{a.d(t,{b:()=>c});var i=a(30758),s=a(39782),n=a(3828),l=a(56116),r=a(67759),o=a(86070);const c=i.memo((function({uri:e,className:t,onClick:a,size:c=s.t.xs,placement:d,isMiniPlayer:u,showDelayOnHover:m}){const p=(0,n.i)(e),[h,g]=(0,r.A)(p),x=(0,l.W)(),y=(0,i.useCallback)((e=>{e.preventDefault(),x({targetUri:p,intent:h?"remove-from-library":"add-to-library",type:"click"}),a&&a(!h),g(!h)}),[h,x,p,a,g]);return(0,o.jsx)(s.M,{className:t,size:c,onClick:y,isAdded:h,placement:d,condensed:!0,isMiniPlayer:u,showDelayOnHover:m})}))},89370:(e,t,a)=>{a.d(t,{p:()=>C});var i=a(30758),s=a(97500),n=a.n(s),l=a(13505),r=a(555),o=a(90591),c=a(42949);const d="(min-width: 0px)",u="(min-width: 0px) and (max-width: 767px)",m="(min-width: 768px)",p="(min-width: 768px) and (max-width: 1023px)",h="(min-width: 1024px)",g="(min-width: 1024px) and (max-width: 1279px)",x="(min-width: 1280px)",y="(min-width: 1280px) and (max-width: 1919px)",v="(min-width: 1920px)",b="FvfvGU3jvHRskUU9v9_8",f="Q9AlbZn2EGzy3MTWXa8X",w="mxmxS0y8LiwSs5nueKPT",j="GXxVAveNFStY3pBI_NO4",N="eHcXC2s97InYP7rMNT0H";var k=a(86070);const C=(0,i.memo)((function(e){const{children:t,message:a,title:i,linkTitle:s,linkTo:C,onClick:E,renderInline:F=!1}=e,{isXSOnly:I,isSMOnly:R}={isXS:(0,c.U)(d),isXSOnly:(0,c.U)(u),isSM:(0,c.U)(m),isSMOnly:(0,c.U)(p),isMD:(0,c.U)(h),isMDOnly:(0,c.U)(g),isLG:(0,c.U)(x),isLGOnly:(0,c.U)(y),isXL:(0,c.U)(v)},S=I||R;return(0,k.jsxs)("section",{className:n()(b,{[f]:F}),children:[t,(0,k.jsx)(l.E,{as:"h1",variant:S?"titleSmall":"titleMedium",className:j,children:i}),(0,k.jsx)(l.E,{variant:S?"bodySmall":"bodyMedium",className:N,children:a}),s&&(C||E)&&(0,k.jsx)(r.$,{colorSet:"invertedLight",className:w,href:C,onClick:E,component:o.v,children:s})]})}))},77721:(e,t,a)=>{a.d(t,{s:()=>g});var i=a(30758),s=a(97500),n=a.n(s),l=a(45143),r=a(43683),o=a(51676),c=a(70824);const d="IVnoxrO3iL_tz5ULI8g_";var u=a(86070);const m={marginBlockEnd:0,willChange:"transform, opacity"},p=({filterId:e=null,isPrimaryFilter:t,isPlaceholder:a,resetFilterIds:s,toggleFilterId:r,className:o,innerRef:c,onFilterClick:p,index:h=0,...g})=>{const x=g.selected,y=(0,i.useCallback)((()=>{if(!e)return s(),void p(null,!1,h);p(e,!!x,h),r(e)}),[e,s,r,p,x,h]),v=(0,i.useCallback)((e=>{e.detail>1||a||y()}),[a,y]);return(0,u.jsx)(l.v,{...g,className:n()(o,{[d]:a}),onClick:v,selectedColorSet:"invertedLight",secondary:x&&!t,style:m,ref:c,tabIndex:-1})},h=({filterId:e=null,isPlaceholder:t,resetFilterIds:a,toggleFilterId:s,className:l,innerRef:o,onFilterClick:c,index:p=0,...h})=>{const g=h.selected,x=(0,i.useCallback)((()=>{if(!e)return a(),void c(null,!1,p);c(e,!!g,p),s(e)}),[e,a,s,c,g,p]),y=(0,i.useCallback)((e=>{e.detail>1||t||x()}),[t,x]);return(0,u.jsx)(r.m,{...h,"aria-label":h["aria-label"],className:n()(l,{[d]:t}),onClick:y,style:m,ref:o,tabIndex:-1})},g=(0,i.memo)((function({placeholderFilters:e=[],availableFilters:t,selectedFilters:a,toggleFilterId:s,resetFilterIds:n,onFilterClick:l,ariaLabel:r,clearBtnAriaLabel:d,className:m,applyLightThemeControls:g=!1}){const x=!(a||t),y=x?e:[...a??[],...t??[]],v=(0,i.useRef)(null),b=(0,i.useCallback)((()=>{(0,c.MS)(v.current,v.current?.nextElementSibling instanceof HTMLElement?v.current?.nextElementSibling:null),n()}),[n]);return 0===y.length?null:(0,u.jsxs)(o.FN,{className:m,ariaLabel:r,applyLightThemeControls:g,children:[!!a?.length&&(0,u.jsx)(h,{resetFilterIds:b,toggleFilterId:s,onFilterClick:l,"aria-label":d??r,innerRef:v}),y.map(((e,t)=>{const i=a?.includes(e),r=0===t;return(0,u.jsx)(p,{filterId:e.id,isPrimaryFilter:r,isPlaceholder:x,onFilterClick:l,resetFilterIds:n,toggleFilterId:s,selected:i,index:t,children:e.getName()},e.id)}))]})}))},34330:(e,t,a)=>{a.d(t,{Y:()=>d});var i=a(97500),s=a.n(i),n=a(13505),l=a(77287);const r="dxnMpEuxRQ5Ml60ftDcz",o="jFPYamKaGvZv7JA45KCu";var c=a(86070);const d=({as:e,variant:t,className:a,charCount:i,isLoading:d})=>{const u=(0,l.h)("shimmer");return(0,c.jsx)(n.E,{ref:u,as:e,variant:t,className:s()(r,a,{[o]:d}),style:{width:i?`${i}ch`:void 0},tabIndex:-1,"aria-hidden":!0})}},87625:(e,t,a)=>{a.d(t,{x:()=>r});var i=a(92197),s=a(68320);const n="BO7X8b8_SQhDyCjS0EOv";var l=a(86070);const r=({gatedEntityRelations:e})=>{if(!e)return!1;const t=e?.entitiesWithValueProps?.at(0),a=t?.valueProps.at(0)?.displayText,r=t?.summary?.forUserWithoutAccess;if(!a||!t)return null;const o=(0,l.jsx)(s.E,{text:a,className:n});return r?(0,l.jsx)(i.Zp,{label:r||a,children:o}):o}},34863:(e,t,a)=>{a.d(t,{P:()=>m});var i=a(3118),s=a(87625),n=a(76050),l=a(90630),r=a(3568),o=a(4438),c=a(43671),d=a(89979),u=a(86070);const m=({episode:e})=>{const t=(0,i.NC)(l.MCN,{loadingValue:!1}),{badges:a}=(0,d.b)((e=>"contentRating"in e)(e)?{contentRating:e?.contentRating?.label,isPaywalled:e.podcastSubscription?.isPaywalled}:{isExplicit:e?.isExplicit,isMOGEFRestricted:e?.is19PlusOnly,isPaywalled:e.podcastSubscription?.isPaywalled}),m=e.gatedEntityRelations&&e.gatedEntityRelations.entitiesWithValueProps.at(0),p=t&&(0,n.B)(m,e);return(0,u.jsxs)(u.Fragment,{children:[a.explicit&&(0,u.jsx)(r.U,{}),p?(0,u.jsx)(s.x,{gatedEntityRelations:e.gatedEntityRelations}):a.paid&&(0,u.jsx)(o.y,{}),a.nineteen&&(0,u.jsx)(c.q,{size:16})]})}},85144:(e,t,a)=>{a.d(t,{P:()=>i.P});var i=a(34863)},6648:(e,t,a)=>{a.d(t,{WhatsNewFeed:()=>mt});var i=a(30758),s=a(98929),n=a(97500),l=a.n(n),r=a(13505),o=a(21974),c=a(3118),d=a(25131),u=a(93492),m=a(89370),p=a(26906),h=a(67273),g=a(77721),x=a(99802);const y="q5riNmaoksSuEEvQAurA";var v=a(86070);const b=[{id:"ALBUM",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music"},{id:"EPISODE",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows"},{id:"WHATS_NEW_FEED_NOTIFICATION",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.notifications"),ubiId:"Merch & Events"}],f=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:a,resetFilterIds:s,className:n,spec:l}){const r=u.Ru.get("web-player.whats-new-feed.filters.options"),o=(0,x.s)(),c=(0,i.useMemo)((()=>{const t=new Map;return(e||[]).forEach((e=>{t.set(e.id,e)})),t}),[e]),d=(0,i.useCallback)(((e,t,a)=>{let i;if(!e)return i=l.clearFiltersFactory().hitClearFilter(),void o.logInteraction(i);const s=c.get(e);if(!s)return;const n=l.filterChipFactory({identifier:s.ubiId,position:a});i=t?n.hitClearFilter():n.hitFilter(),o.logInteraction(i)}),[l,o,c]);return(0,v.jsx)("div",{className:y,children:(0,v.jsx)(g.s,{placeholderFilters:b,availableFilters:e,selectedFilters:t,toggleFilterId:a,onFilterClick:d,resetFilterIds:s,ariaLabel:r,className:n})})}));var w=a(55158),j=a(12431),N=a(94154),k=a(75635),C=a(39782),E=a(61621),F=a(80352),I=a(81875),R=a(585),S=a(12367),P=a(56463),A=a(96691);const L="UzbVbHOHQ3xdlESl06nb",B=({dateAdded:e,prefix:t})=>{let a=e.getTime()>0&&u.Ru.formatRelativeDate(e,{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"});return a&&t&&(a=`${t} ${a}`),(0,v.jsx)(r.E,{variant:"bodySmall",className:L,children:a})};var M=a(5119),D=a(75189),U=a(20951);const T=e=>{switch(e){case U.E.LARGE:return D.Qe.SIZE_112;case U.E.MEDIUM:default:return D.Qe.SIZE_64}};var _=a(30047),V=a(64212),z=a(39363),O=a(13847),G=a(55117),W=a(33059),H=a(67759),Y=a(46777),X=a(21081),Z=a(45176),Q=a(46307),K=a(42262),q=a(78172),J=a(2036);const $="SjhDNg4bQRQmIJAba47Z",ee="eYvk_xcxVNMwCBkfY3O0",te="TtoLzgGMAU9nkxMbixq9",ae="Rw7qIj58PeAz8p6dejOP",ie="uzhTSuCH_4ojaqifMJRB",se="D71yL9GnHIYg7PheYlz8",ne="KKRyrr7NUJy1VBWydHHH",le="kAYwHqwZ7agHEAGbYN3v",re="XaingSntLq8c8wEfqf81",oe="FDm94lE0xkDYtA1Bk7Jc",ce="TPNGFuTvzNVNHisumnhg";function de({album:e,onLike:t,onMoreButtonClick:a,onDownloadClick:s,spec:n}){const o=(0,i.useRef)(null);(0,O.p)(o);const c=(0,W.y)(),d=c===U.E.LARGE,{draggable:m,onDragStart:p}=(0,V.P)({itemUris:[e.uri],dragLabelText:e.name});let h;e.date&&(h=(0,v.jsx)(B,{dateAdded:new Date(e.date.isoString)}));const[g,y]=(0,H.A)(e.uri),b=e.artists?.items.map((e=>e.profile.name)).join(u.Ru.getSeparator())||"",f=(0,x.s)(),L=(0,i.useCallback)((async()=>{try{await y(!g)}catch{}}),[g,y]),{togglePlay:D,isPlaying:de,isActive:ue}=(0,Q.P)({uri:e.uri},{featureIdentifier:"whats_new_panel",referrerIdentifier:"whats_new_panel"}),me=(0,i.useCallback)((t=>{let a;t.preventDefault(),ue&&!de&&(a=n.playButtonFactory().hitResume({itemToBeResumed:e.uri})),de||ue||(a=n.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),de&&(a=n.playButtonFactory().hitPause({itemToBePaused:e.uri})),a&&f.logInteraction(a),D()}),[D,ue,de,f,n,e.uri]),pe=(0,z.V)(e.uri),he=(0,X.T)(e.uri),ge=(0,i.useCallback)((()=>{const t=n.hitUiNavigate({destination:e.uri});f.logInteraction(t),pe()}),[e.uri,n,f,pe]),xe=(0,i.useCallback)((a=>{const i=n.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),s=n.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});f.logInteraction(a?i:s),t?.(a)}),[n,f,e.uri,t]),ye=(0,i.useCallback)(((t,a)=>{let i;a===Z.NV.ADD?i=n.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):a===Z.NV.REMOVE&&(i=n.downloadButtonFactory().hitUiReveal()),i&&f.logInteraction(i),s?.(t,a)}),[e.uri,f,n,s]),ve=(0,i.useCallback)((e=>{a?.(e)}),[a]),be=(0,i.useCallback)((()=>{const t=n.titleFactory().hitUiNavigate({destination:e.uri});f.logInteraction(t)}),[e.uri,f,n]),fe=u.Ru.get("tracklist.a11y.play",e.name,b),we=u.Ru.get("tracklist.a11y.pause",e.name,b),je=(0,v.jsx)(w.d,{lineClamp:1,children:(0,v.jsx)(M.N,{to:e.uri,onClick:be,children:e.name})}),Ne=e.artists?e.artists.items.map(((e,t,a)=>{return(0,v.jsxs)(i.Fragment,{children:[(0,v.jsx)(S.h,{menu:(0,v.jsx)(A.t,{uri:e.uri}),children:(0,v.jsx)(M.N,{to:e.uri,className:ie,onClick:(s=e.uri,()=>{const e=n.subtitleFactory().hitUiNavigate({destination:s});f.logInteraction(e)}),children:e.profile.name})}),t<a.length-1&&u.Ru.getSeparator()]},t);var s})):"",ke=(0,v.jsx)("div",{className:se,children:(0,v.jsx)(G.b,{className:l()(ne,{[le]:d}),type:q.c.ALBUM,size:T(c),title:e.name,images:e.coverArt?.sources})}),Ce=(0,v.jsxs)(r.E,{className:oe,children:[(0,J.C)(e.albumType),(0,v.jsx)("span",{className:ce,children:h})]}),Ee=d?C.t.sm:C.t.xs,Fe=(0,v.jsxs)("div",{className:re,children:[(0,v.jsxs)("div",{className:ee,children:[(0,v.jsx)(I.b,{onClick:xe,uri:e.uri,size:Ee,className:te}),(0,v.jsx)(E.f,{onClick:ye,className:l()({[te]:(0,Y.X)(he)}),uri:e.uri,isFollowing:g,onFollow:L,size:Ee,condensed:!0}),(0,v.jsx)(K.r,{spec:n,children:(0,v.jsx)(R.b,{menu:(0,v.jsx)(P.h,{uri:e.uri}),children:(0,v.jsx)(F.e,{onClick:ve,size:Ee})})})]}),(0,v.jsx)("div",{className:ae,children:(0,v.jsx)(_.R,{size:"small",onClick:me,isPlaying:de,ariaPlayLabel:fe,ariaPauseLabel:we,version:_.H.secondary})})]});return(0,v.jsx)(S.h,{menu:(0,v.jsx)(P.h,{uri:e.uri}),children:(0,v.jsx)("div",{draggable:m,onDragStart:p,children:(0,v.jsx)(j.v,{size:"xxl",ref:o,className:$,media:ke,title:je,subtitle:(0,v.jsx)(N.j,{lineClamp:1,children:Ne}),id:e.uri,variant:"naked",body:Ce,footer:Fe,onClick:ge,hoverBackgroundColor:"backgroundHighlight",layout:d?"wide":"regular",horizontalGap:d?k.lT:k.CJ,verticalGap:k.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var ue=a(94934),me=a(30449),pe=a(79202),he=a(10161),ge=a(92734),xe=a(39550),ye=a(85144),ve=a(71850),be=a(52403);const fe="N3zMh5FMdbBKUvz4uDfe",we="h0YQcDKdGmWssZyuIcvq",je="lMQrLkJVNqZAzT95gQnA";function Ne({episode:e,isPlaying:t,isActive:a,isFullyPlayed:s,setIsFullyPlayed:n}){let l;e.release.isoString&&(l=(0,v.jsx)(B,{dateAdded:new Date(e.release.isoString)}));const o=(0,i.useRef)(null),[c]=(0,ve.S)(1e4,(t=>t?.item?.uri===e.uri));(0,i.useEffect)((()=>{t&&(o.current=c)}),[t,c]),(0,i.useEffect)((()=>{!t&&o.current&&e.duration.milliseconds<=o.current&&n(!0)}),[t,e.duration.milliseconds,n]);const d=(0,i.useRef)(e.duration.milliseconds-e.playedState.timeLeft.milliseconds),m=(0,v.jsx)(be.j,{isPlaying:t,fullyPlayed:s,durationMs:e.duration.milliseconds,resumePositionMs:o.current||d.current,position:a?c:void 0,className:we});return(0,v.jsxs)("div",{className:fe,children:[(0,v.jsx)(ye.P,{episode:e}),(0,v.jsx)(r.E,{variant:"bodySmall",children:u.Ru.get("card.tag.episode")}),(0,v.jsx)("span",{className:je}),l,(0,v.jsx)("span",{className:je}),m]})}var ke=a(72242);const Ce="IEDOUN3mwwZhHVziC03a",Ee="Olh4d9g46wryDMTzRRmw",Fe="zyDT2CX7tvGjKxxUnO7D",Ie="TKntS5R19vVI3J9xxwDL",Re="IoTOUob09_0_3kC8ORbu",Se="aKVUno8YrkyvGsg7iS59",Pe="iF91evq0EtvlgCxIRI_6",Ae="VzSICihKBYcgMsSFv8SH",Le="iOxe1erWkyDFY3p4NG8x",Be="_72TrTBKZHea2vJ2I2BJX";function Me({episode:e,podcastName:t,podcastUri:a,onLike:s,onMoreButtonClick:n,onDownloadClick:o,spec:c,featureIdentifier:d,referrerIdentifier:m,size:p="xxl"}){const h=(0,i.useRef)(null);(0,O.p)(h);const g=(0,W.y)(),y=(0,X.T)(e.uri),b=g===U.E.LARGE,{draggable:f,onDragStart:C}=(0,V.P)({itemUris:[e.uri],dragLabelText:`${e.name} • ${t}`}),E=(0,x.s)(),{togglePlay:F,isPlaying:I,isActive:P}=(0,Q.P)({uri:e.uri},{featureIdentifier:d,referrerIdentifier:m}),[A,L]=(0,i.useState)(e.playedState.state===ke.M.Completed),B=(0,z.V)(e.uri),D=u.Ru.get("tracklist.a11y.play",e.name,t),H=u.Ru.get("tracklist.a11y.pause",e.name,t),J=(0,i.useCallback)((()=>{const t=c.hitUiNavigate({destination:e.uri});E.logInteraction(t),B()}),[B,E,c,e.uri]),$=(0,i.useCallback)((t=>{const a=c.saveButtonFactory().hitLike({itemToBeLiked:e.uri}),i=c.saveButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});E.logInteraction(t?a:i),s?.(t)}),[c,E,e.uri,s]),ee=(0,i.useCallback)(((t,a)=>{let i;a===Z.NV.ADD?i=c.downloadButtonFactory().hitDownload({itemToDownload:e.uri}):a===Z.NV.REMOVE&&(i=c.downloadButtonFactory().hitUiReveal()),i&&E.logInteraction(i),o?.(t,a)}),[E,c,e.uri,o]),te=(0,i.useCallback)((()=>{const t=c.titleFactory().hitUiNavigate({destination:e.uri});E.logInteraction(t)}),[E,c,e.uri]),ae=(0,i.useCallback)((t=>{let a;t.preventDefault(),P&&!I&&(a=c.playButtonFactory().hitResume({itemToBeResumed:e.uri})),I||P||(a=c.playButtonFactory().hitPlay({itemToBePlayed:e.uri})),I&&(a=c.playButtonFactory().hitPause({itemToBePaused:e.uri})),a&&E.logInteraction(a),F()}),[F,E,c,e.uri,I,P]),ie=(0,i.useCallback)((e=>{n?.(e)}),[n]),se=(0,v.jsx)(w.d,{lineClamp:2,children:(0,v.jsx)(M.N,{to:e.uri,onClick:te,children:e.name})}),ne=(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(N.j,{lineClamp:1,paddingBottom:b?"8px":void 0,children:(0,v.jsx)(S.h,{menu:(0,v.jsx)(xe.H,{uri:a}),children:(0,v.jsx)(M.N,{to:a,className:Se,onClick:(le=a,()=>{const e=c.subtitleFactory().hitUiNavigate({destination:le});E.logInteraction(e)}),children:(0,v.jsx)(r.E,{as:"span",variant:"bodySmall",children:t})})})})});var le;const re=(0,v.jsx)("div",{className:Pe,children:(0,v.jsx)(G.b,{className:l()(Ae,{[Le]:b}),type:q.c.EPISODE,size:T(g),title:e.name,images:e.images})}),oe=b?"medium":"small",ce=e.podcastSubscription,de=ce.isPaywalled&&!ce.isUserSubscribed,ye=!de,ve=(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Ne,{episode:e,isPlaying:I,isActive:P,isFullyPlayed:A,setIsFullyPlayed:L}),(0,v.jsxs)("div",{className:Be,children:[(0,v.jsxs)("div",{className:Ee,children:[(0,v.jsx)(he.b,{onClick:$,uri:e.uri,size:oe,className:Fe,condensed:!0}),(0,v.jsx)(me.e,{className:l()({[Fe]:(0,Y.X)(y)}),onClick:ee,uri:e.uri,size:oe,canDownload:ye,condensed:!0}),(0,v.jsx)(K.r,{spec:c,children:(0,v.jsx)(R.b,{menu:(0,v.jsx)(ge.b,{uri:e.uri,onMarkAsPlayed:L,isPlayed:A}),children:(0,v.jsx)(pe.e,{onClick:ie,size:oe})})})]}),(0,v.jsx)("div",{className:Ie,children:(0,v.jsx)(_.R,{"aria-label":"whats-new-feed-play-button",size:"small",onClick:ae,isPlaying:I,ariaPlayLabel:D,ariaPauseLabel:H,version:_.H.secondary,disabled:!e.isPlayable,locked:de})})]})]}),be=(0,v.jsx)(ue.v,{lineClamp:2,paddingBottom:b?"4px":void 0,className:Re,children:(0,v.jsx)(r.E,{as:"span",variant:"bodySmall",children:e.description})});return(0,v.jsx)(S.h,{menu:(0,v.jsx)(ge.b,{uri:e.uri,onMarkAsPlayed:L,isPlayed:A}),children:(0,v.jsx)("div",{draggable:f,onDragStart:C,children:(0,v.jsx)(j.v,{size:p,ref:h,className:Ce,media:re,title:se,subtitle:ne,id:e.uri,variant:"naked",body:be,footer:ve,onClick:J,hoverBackgroundColor:"backgroundHighlight",layout:b?"wide":"regular",horizontalGap:b?k.lT:k.CJ,verticalGap:k.v4,paddingBlockStart:"16px",paddingBlockEnd:"16px"})})})}var De=a(78203),Ue=a(88176),Te=a(48268),_e=a(91230),Ve=a(20062);function ze({item:e,spec:t}){if("AlbumResponseWrapper"===e.content.__typename){const a=e.content.data;if("Album"===a.__typename)return(0,v.jsx)(de,{album:a,spec:t})}if("EpisodeOrChapterResponseWrapper"===e.content.__typename){const i=e.content.data;if("Chapter"===i.__typename)return(0,v.jsx)(v.Fragment,{});if("Episode"===i.__typename){let e="",s="";return"Podcast"===i.podcastV2.data.__typename&&(e=i.podcastV2.data.name,s=i.podcastV2.data.uri),(0,v.jsx)(Me,{episode:(a=i,{type:q.c.EPISODE,uri:a.uri,name:a.name,description:a.description??"",duration:{milliseconds:a.duration.totalMilliseconds},playedState:(0,_e.fS)(a.duration,a.playedState),images:a.coverArt?.sources.map(Ve.m)??[],languages:a.language?[a.language.code]:[],release:(0,Te.mp)(a.releaseDate),show:"Podcast"===a.podcastV2.data.__typename?(0,_e.jM)(a.podcastV2.data):null,podcastSubscription:(0,_e.Wx)(a.restrictions,a.playability),gatedEntityRelations:"gatedEntityRelations"in a?(0,De.Gv)(a.gatedEntityRelations):void 0,isPlayable:a.playability.playable,isExplicit:a.contentRating?.label===Ue.x7.Explicit,is19PlusOnly:a.contentRating?.label===Ue.x7.NineteenPlus}),podcastName:e,podcastUri:s,spec:t,referrerIdentifier:"whats_new_panel",featureIdentifier:"whats_new_panel"})}}var a;return(0,v.jsx)(v.Fragment,{})}var Oe=a(34330);const Ge="PNAsPBOgLLv9EX8LZ6xL",We="UjEEhwY497frsytmeR9u",He="VQ0BLAewv7Aw5H3hV0YK",Ye="pxV6pRWzmVb2_leuWtEG",Xe="G97bWDW7Mp3aZEL19Umr",Ze="p6l0_RUXhei0P7rrQaeg",Qe="erd9k4EG_HWK3UzsLhht",Ke="ap9brNzQxEcx9SV2FksM",qe="pVVteJIfAdehWU3vX7JR",Je="J_VZoZ53jBtkdyxrt2My",$e="VOGWdrCvz59_A_wAZv58",et="m8V0BPcmce3GusmXkFhM",tt=i.memo((()=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Oe.Y,{as:"h3",variant:"titleSmall",className:Je,charCount:4,isLoading:!0}),(0,v.jsx)("div",{className:Ke,children:[20,50,25].map(((e,t)=>(0,v.jsx)(Oe.Y,{as:"div",variant:"bodySmall",className:Je,charCount:e,isLoading:!0},`${e}-${t}`)))})]})));var at=a(90630),it=a(91621),st=a(98370),nt=a(49810),lt=a(82362);const rt={offset:0,limit:50,onlyUnPlayedItems:!1};const ot={[Ue.tv.Album]:{id:"ALBUM",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.music"),ubiId:"Music",active:!1},[Ue.tv.Episode]:{id:"EPISODE",getName:()=>u.Ru.get("web-player.whats-new-feed.filters.episodes"),ubiId:"Podcast & Shows",active:!1}};function ct(e){switch(e){case Ue.tv.Album:return Ue.tv.Album;case Ue.tv.Episode:return Ue.tv.Episode;case Ue.tv.WhatsNewFeedNotification:return Ue.tv.WhatsNewFeedNotification;case Ue.tv.Unknown:default:return Ue.tv.Unknown}}const dt=({spec:e,items:t})=>{const[a,s]=(0,i.useState)([]),n=e=>{const t=e.state.state;if(!e.state.timestamp?.isoString&&t===Ue.GN.New)return!0;if(e.state.timestamp?.isoString){const t=new Date(e.state.timestamp.isoString).getTime();return Date.now()-t<=36e5}return!1},l=t.findIndex((e=>!n(e))),o=(0,i.useCallback)(((t,a)=>{const i=n(t)&&a<l,s=i&&0===a;return(0,v.jsxs)("div",{className:et,children:[s&&(0,v.jsx)(r.E,{as:"h3",variant:"titleSmall",className:He,semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.new-section-title")}),!i&&a===l&&(0,v.jsx)(r.E,{as:"h3",variant:"titleSmall",className:He,semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.earlier-section-title")}),(0,v.jsx)("hr",{className:$e,"aria-hidden":!0}),(0,v.jsx)(ze,{item:t,spec:e.notificationItemFactory({identifier:t.id,position:a})},t.id)]},t.id)}),[l,e]),c=(0,i.useRef)(0),d=(0,i.useCallback)((()=>{const e=t.slice(c.current,c.current+10);s((t=>(c.current=c.current+10,[...t,...e])))}),[t]),{ref:m,breakpoint:p}=(0,st.x)({[U.E.MEDIUM]:0,[U.E.LARGE]:600});return(0,v.jsx)(W.o.Provider,{value:p,children:(0,v.jsx)("div",{className:Qe,role:"list",ref:m,children:(0,v.jsx)(it._,{onReachBottom:d,triggerOnInitialLoad:!0,children:a.map(o)})})})},ut=({includedContentTypes:e,data:t,handleRetry:a,error:i,spec:s,loading:n})=>{if(n)return(0,v.jsxs)("div",{className:Ye,role:"list",children:[(0,v.jsx)(tt,{}),(0,v.jsx)(tt,{})]});if(i)return(0,v.jsxs)("div",{className:Xe,dir:"auto",children:[(0,v.jsx)(r.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:u.Ru.get("error.generic")}),(0,v.jsx)(r.E,{as:"p",variant:"bodyMedium",children:u.Ru.get("web-player.whats-new-feed.panel.error")}),(0,v.jsx)(o.n,{className:Ze,onClick:a,size:"small",children:(0,v.jsx)(r.E,{as:"span",variant:"bodyMediumBold",semanticColor:"textBase",children:u.Ru.get("web-player.whats-new-feed.panel.error.button")})})]});const l=t?.whatsNewFeedItems?.items;if(!l||0===l?.length){const{title:t,message:a}=function(e=[]){return e.includes(Ue.tv.Episode)?{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-podcast.message")}:e.includes(Ue.tv.Album)?{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-music.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-music.message")}:{title:u.Ru.get("web-player.whats-new-feed.panel.empty-results-all.title"),message:u.Ru.get("web-player.whats-new-feed.panel.empty-results-all.message")}}(e);return(0,v.jsx)(m.p,{title:t,message:a,renderInline:!0})}return(0,v.jsx)(dt,{items:l,spec:s},e.join(" "))},mt=()=>{const e=(0,s.jE)(),{spec:t,logger:a}=(0,lt.r)(d.q,{}),n=(0,i.useCallback)((()=>{const{name:e}=h.lo;return[e]}),[]),o=(0,i.useCallback)((()=>{e.invalidateQueries({queryKey:n()})}),[e,n]);(0,i.useEffect)((()=>{a.logImpression(t.impression())}),[a,t]);const[m,g]=(0,i.useState)(ot),x=Object.values(m),y=x.filter((e=>e.active)),b=y.length>0?[]:x,w=y.map((e=>e.id)),j=(0,c.NC)(at.MCN,{loadingValue:!1}),N=(0,i.useCallback)((e=>{const t=ct(e),a={id:m[t]?.id||Ue.tv.Unknown,getName:()=>m[t]?.getName()||"",ubiId:m[t]?.ubiId||"",active:!m[t]?.active},i={...ot,...m,[a.id||"UNKNOWN"]:a};g(i)}),[m,g]),k=(0,i.useCallback)((()=>{g(ot)}),[g]),{data:C,error:E,loading:F}=(0,nt.I)(j?h.nD:h.lo,{...rt,includedContentTypes:w.map(ct)??[]},{gcTime:30*nt.i}),{getGraphQLLoader:I}=(0,p.mv)(),R=I();return(0,i.useEffect)((()=>{if(!C?.whatsNewFeedItems?.items)return;const e=C?.whatsNewFeedItems?.items.filter((e=>e.state.state===Ue.GN.New)).map((e=>({id:e.id,state:Ue.GN.Seen})));e.length>0&&async function(e,t){await e(h.BP,{items:t})}(R,{items:e})}),[C?.whatsNewFeedItems?.items,R]),(0,v.jsxs)("section",{className:l()(qe,"contentSpacing"),children:[(0,v.jsxs)("div",{className:Ge,children:[(0,v.jsx)(r.E,{as:"h1",semanticColor:"textBase",variant:"titleMedium",className:We,children:u.Ru.get("web-player.whats-new-feed.panel.title")}),(0,v.jsx)(r.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:u.Ru.get("web-player.whats-new-feed.panel.subtitle")})]}),!E&&(0,v.jsx)(f,{availableFilters:b,toggleFilterId:N,selectedFilters:y,resetFilterIds:k,spec:t.filterChipsFactory()}),(0,v.jsx)(ut,{includedContentTypes:w.map(ct),data:C,loading:F,error:E??null,spec:t,handleRetry:o})]})}},4438:(e,t,a)=>{a.d(t,{y:()=>l});var i=a(93492),s=a(68320),n=a(86070);const l=()=>(0,n.jsx)(s.E,{ariaLabel:i.Ru.get("paid"),text:i.Ru.get("paid")})},91621:(e,t,a)=>{a.d(t,{_:()=>d});var i=a(30758),s=a(75773),n=a(97500),l=a.n(n);const r="eqw9lvuoZHrkWMTdyTpY",o="lb08f71wES9AQnKx6e0R";var c=a(86070);const d=(0,i.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:a,showScrollbar:n=!0,horizontalScroll:d=!1,className:u}=e,{ref:m,inView:p}=(0,s.Wx)({initialInView:t});return(0,i.useLayoutEffect)((()=>{p&&a&&a()}),[p,a]),(0,c.jsxs)("div",{className:l()({[o]:!n,[r]:d},u),"data-testid":"infinite-scroll-list",children:[e.children,(0,c.jsx)("div",{ref:m})]})}))},76050:(e,t,a)=>{a.d(t,{B:()=>i,v:()=>s});const i=(e,t)=>!!e&&e.uri===t.uri,s=(e,t)=>!!e&&e.entitiesWithValueProps.at(0)?.uri===t},39363:(e,t,a)=>{a.d(t,{V:()=>l});var i=a(30758),s=a(85387),n=a(72574);function l(e){const t=(0,n.o_h)(e);let a="";return t&&(a=t.toURLPath(!0)),function(e){const t=(0,s.Zp)();return(0,i.useCallback)((()=>{""!==e&&t(e)}),[e,t])}(a)}},77287:(e,t,a)=>{a.d(t,{h:()=>s});var i=a(30758);function s(e){return(0,i.useCallback)((t=>{null!==t&&void 0!==t.getAnimations&&t.getAnimations({subtree:!0}).filter((t=>t instanceof CSSAnimation&&t.animationName===e&&"running"===t.playState)).forEach((e=>e.startTime=0))}),[e])}},13847:(e,t,a)=>{a.d(t,{p:()=>s});var i=a(30758);const s=e=>{const[t,a]=(0,i.useState)(0);function s(i){const s=e.current?.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(!s)return;s.forEach((e=>{e.setAttribute("tabindex","-1")})),s&&s[0].setAttribute("tabindex","0");let n=t;if(s&&s.length>0)switch(i.key){case"Tab":document.activeElement&&a(0);break;case"ArrowUp":0===n?(i.preventDefault(),n=s.length-1):n-=1,s[n].focus(),a(n);break;case"ArrowDown":i.preventDefault(),n===s.length-1?n=0:n+=1,s[n].focus(),a(n)}}i.useEffect((()=>{const t=e.current;return t?.addEventListener("keydown",s),()=>{t?.removeEventListener("keydown",s)}}))}},46777:(e,t,a)=>{a.d(t,{X:()=>s});var i=a(45176);function s(e){return[i.kw.YES,i.kw.DOWNLOADING,i.kw.WAITING].includes(e)}},89979:(e,t,a)=>{a.d(t,{b:()=>n});var i=a(88176),s=a(45176);const n=({downloadAvailability:e,isExplicit:t,isMOGEFRestricted:a,contentRating:n,isPaywalled:l,isEnhanced:r,hasAssociatedVideo:o})=>{let c=0;const d={download:!1,explicit:!1,nineteen:!1,paid:!1,enhanced:!1,hasAssociatedVideo:!1};return e===s.kw.YES&&(d.download=!0,c++),(t&&!a||n===i.x7.Explicit)&&(d.explicit=!0,c++),(a||n===i.x7.NineteenPlus)&&(d.nineteen=!0,c++),l&&(d.paid=!0,c++),r&&(d.enhanced=!0,c++),o&&(d.hasAssociatedVideo=!0,c++),{badges:d,hasBadges:c>0}}}}]);
//# sourceMappingURL=dwp-whats-new-feed.js.map