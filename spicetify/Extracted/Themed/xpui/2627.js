"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2627],{61621:(e,t,i)=>{i.d(t,{M:()=>E,f:()=>I});var a=i(30758),n=i(97500),s=i.n(n),r=i(61e3),l=i(11205),o=i(106),d=i(93492),c=i(80600),u=i(38557),p=i(45176);var y=i(92197),m=i(22220),g=i(15283),b=i(97137),f=i(49753),T=i(48975),h=i(16674),x=i(46440);const w="x-downloadButton-DownloadButton",R="x-downloadButton-button",k="x-downloadButton-cancelDownload",A="x-downloadButton-progress";var S=i(86070);let E=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const C=e=>{const{currentTarget:t,detail:i}=e;i>0&&t&&t.blur()},I=({uri:e,isFollowing:t,onFollow:i,size:n=E.sm,className:I,onClick:N=()=>{},showUpsell:P=!0,canDownload:v=!0,condensedAll:$,condensed:O})=>{const[_,j]=(0,a.useState)(!1),{capability:V,availability:L,addDownload:M}=(0,h.$)(e,v),D=!(0,T.n)(),U=(0,f.V)(),B=(0,x.e)(e);((e,t)=>{const i=(0,c.i)(),n=(0,a.useRef)(!1);(0,a.useEffect)((()=>{e===p.kw.DOWNLOADING&&!1===n.current&&(n.current=!0,i.say(d.Ru.get("download.downloading",t.totalItems)))}),[i,e,t]);const s=(0,u.Z)(e);(0,a.useEffect)((()=>{s===p.kw.DOWNLOADING&&e===p.kw.YES&&(n.current=!1,i.say(d.Ru.get("download.complete")))}),[i,s,e])})(L,B);const K=(0,a.useCallback)((e=>{e.preventDefault(),V===p.vs.NO_PERMISSION?N(e,p.NV.NO_PERMISSION):(!1===t?(i(),j(!0)):M(),N(e,p.NV.ADD)),C(e)}),[M,V,t,N,i]),z=(0,a.useCallback)((t=>{t.preventDefault(),U(e),C(t),N(t,p.NV.REMOVE)}),[e,U,N]);if((0,a.useEffect)((()=>{!0===_&&!0===t&&(M(),j(!1))}),[t,_,M]),L===p.kw.YES)return(0,S.jsx)(y.Zp,{label:d.Ru.get("download.remove"),children:(0,S.jsx)(r.H,{className:I,onClick:z,iconOnly:l.F,semanticColor:"textBrightAccent",size:n,"aria-label":d.Ru.get("download.remove"),"aria-checked":!0,condensedAll:$,condensed:O})});if(V===p.vs.NO_CAPABILITY||V===p.vs.NO_PERMISSION_HIDE)return null;if(V===p.vs.NO_PERMISSION)return P?(0,S.jsx)("div",{className:s()(w,I),children:(0,S.jsx)(b.y,{offset:[-2,20],action:"toggle",trigger:"click",content:(0,S.jsx)(g.z,{children:(0,S.jsx)("span",{children:d.Ru.get("download.upsell")})}),renderInline:!1,children:(0,S.jsx)("div",{children:(0,S.jsx)(y.Zp,{label:d.Ru.get("download.download"),children:(0,S.jsx)(r.H,{onClick:K,iconOnly:o.i,size:n,"aria-label":d.Ru.get("download.download"),"aria-checked":!1,condensedAll:$,condensed:O,disabled:D})})})})}):null;if(L===p.kw.NO)return(0,S.jsx)(y.Zp,{label:d.Ru.get("download.download"),children:(0,S.jsx)(r.H,{className:I,onClick:K,iconOnly:o.i,size:n,"aria-label":d.Ru.get("download.download"),"aria-checked":!1,condensedAll:$,condensed:O,disabled:D})});let F;switch(n){case E.xs:F=16;break;case E.sm:F=24;break;default:F=32}return(0,S.jsxs)("div",{className:s()(k,I),role:"switch","aria-checked":!0,children:[(0,S.jsx)(y.Zp,{label:d.Ru.get("download.cancel"),children:(0,S.jsx)("button",{style:{height:F,width:F},className:s()(R,I),onClick:z,"aria-label":d.Ru.get("download.cancel")})}),(0,S.jsx)("span",{className:s()(A),children:(0,S.jsx)(m.C,{"aria-valuetext":d.Ru.get("progress.downloading-tracks"),percentage:B.percentage,size:F})})]})}},47066:(e,t,i)=>{i.d(t,{F:()=>$});var a=i(30758),n=i(3118),s=i(93492),r=i(43758),l=i(84676),o=i(34094),d=i(97500),c=i.n(d),u=i(36625),p=i(13505),y=i(22810),m=i(86070);const g=({children:e})=>(0,m.jsx)(p.E,{dir:"auto",className:c()(y.A.rowTitle,y.A.discTitle,"standalone-ellipsis-one-line"),as:"div",variant:"bodyMediumBold",children:e});var b=i(22360),f=i(37502),T=i(74618),h=i(1782);const x=({discNumber:e})=>(0,m.jsxs)("div",{className:c()(y.A.trackListRowGrid,y.A.discRow),children:[(0,m.jsx)(T.y,{ariaColIndex:0,children:(0,m.jsx)("div",{className:y.A.rowMarker,children:(0,m.jsx)(f.a,{children:(0,m.jsx)(u.I,{size:"small"})})})}),(0,m.jsx)(h.U,{ariaColIndex:1,children:(0,m.jsx)(b.l,{children:(0,m.jsx)(g,{children:s.Ru.get("tracklist.disc-sperator.title",e)})})})]});var w=i(40997),R=i(88308),k=i(23705),A=i(74010),S=i(17976),E=i(11663);const C=(e,t)=>{const{request:i}=(0,a.useContext)(E.j),n=(0,R.lB)((()=>t),[t]),s=(0,a.useMemo)((()=>function(e){return(0,S.YD)(e)?e.items.reduce(((e,t)=>(e.push(t.discNumber-1),e.concat(Array(t.nrTracks??0).fill(t.discNumber)))),[]):null}(n)),[n]);return(0,a.useCallback)((async(t,a)=>{const r=await i(k.xt,{uri:e,offset:null!==s?t-s[t]:t,limit:a});return(0,A.T)(r?.data,n)}),[n,s,i,e])};var I=i(61895),N=i(90630),P=i(24395),v=i(78172);const $=a.memo((function({albumName:e,nrTracks:t,discs:i,albumUri:d,highlightUri:c,scrollToIndex:u,usePlayContextItem:p,hasHeaderRow:y=!0,initalTracks:g,isCompactMode:b=!1}){const f=(0,n.NC)(N.LX5),T=C(d,i),h=(0,a.useRef)(null),R=(0,a.useRef)(!1),[k,A]=(0,a.useState)(null);(0,a.useEffect)((()=>{h.current&&(k?h.current.scrollToIndex(k):u&&h.current.scrollToIndex(u))}),[k,u]);const S=(0,a.useCallback)((async(e,t)=>{const i=await T(e,t);if(c&&!k){const e=i.items?.findIndex((e=>e.type===v.c.TRACK&&e?.uri===c));A(e||-1)}return i}),[T,c,k]),E=(0,l.w)(),$=(0,a.useCallback)((e=>({uri:e.type===v.c.TRACK?e.linkedUri??e.uri:""})),[]),O=(0,a.useCallback)(((t,i)=>{if("AlbumDisc"===t.type)return(0,m.jsx)(x,{discNumber:t.discNumber},`${i}-${t.discNumber}`);const a=t.linkedUri??t.uri,n=t.playcount?parseInt(t.playcount,10):0,r=!(R.current||!c||c!==t.uri&&c!==a);r&&(R.current=!0);const l=t.hasAssociatedVideo;return(0,m.jsxs)("div",{children:[c===t.uri&&(0,m.jsx)(I.c,{artistOrShow:t.artists.map((e=>e.name)).join(s.Ru.getSeparator()),title:t.name,uri:a,entityType:I.p.TRACK}),(0,m.jsx)(o.d,{index:i,trackNumber:t.trackNumber,contextUri:d,uri:a,uid:t.uid,albumName:e,duration_ms:t.duration.milliseconds,name:t.name,isPlayable:t.isPlayable,artists:t.artists,isExplicit:t.isExplicit,isMOGEFRestricted:t.is19PlusOnly,playcount:n,shouldHighLight:r,usePlayContextItem:p,isCompactMode:b,hasAssociatedVideo:l&&f})]},i+t.uri)}),[c,e,d,p,b,f]);return(0,m.jsx)(P.pZ,{value:"album-tracklist",children:(0,m.jsx)(w.S4,{ariaLabel:e,hasHeaderRow:y,rowPlaceholder:r.Bz,columns:E,renderRow:O,resolveItem:$,nrTracks:t,fetchTracks:S,limit:300,outerRef:h,tracks:g,isCompactMode:b,columnPersistenceKey:"album-tracklist"},d)})}))},61895:(e,t,i)=>{i.d(t,{c:()=>h,p:()=>b});var a=i(30758),n=i(48237),s=i(87347),r=i(34109),l=i(93492),o=i(45192),d=i(69623),c=i(68508),u=i(36663),p=i(20967),y=i(39876),m=i(82362),g=i(86070);let b=function(e){return e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.EPISODE="episode",e.PLAYLIST="playlist",e.PODCAST="podcast",e.TRACK="track",e}({});const f=e=>e===b.TRACK?l.Ru.get("web-player.deeplink-intent.add-to-library.liked-songs-title"):e===b.EPISODE?l.Ru.get("web-player.deeplink-intent.add-to-library.episodes-title"):l.Ru.get("web-player.deeplink-intent.add-to-library.title"),T=({entityType:e,artistOrShow:t,title:i})=>e===b.ARTIST||e===b.PODCAST?l.Ru.get("web-player.deeplink-intent.add-to-library.artist-description",{name:t??""}):l.Ru.get("web-player.deeplink-intent.add-to-library.description",{title:i??"",name:t??""}),h=e=>{const{intent:t,clear:i}=(0,d.AT)();return t!==d.pg.ADD_TO_LIBRARY?null:(0,g.jsx)(x,{...e,clearDeeplinkIntent:i})};function x({uri:e,entityType:t,artistOrShow:i,title:d,clearDeeplinkIntent:h}){const x=(0,u.f)(),w=(0,p._)(),{enqueueSnackbar:R}=(0,n.dh)(),[k,A]=(0,a.useState)(null),{spec:S,logger:E}=(0,m.r)(s.K0,{data:{uri:e,identifier:t}}),{spec:C,logger:I}=(0,m.r)(r.y4,{data:{uri:e,identifier:t}}),N=(0,y.t)(S);(0,a.useEffect)((()=>{t===b.PLAYLIST?w?.contains([e]).then((e=>A(e[0]))):x.contains(e).then((e=>A(e[0])))}),[t,x,w,e]),(0,a.useEffect)((()=>{k&&(R(l.Ru.get("web-player.deeplink-intent.add-to-library.already-in-library")),I.logImpression(C.impression()),h())}),[h,R,k,I,C]);const P=(0,a.useCallback)((()=>{E.logInteraction(S.closeButtonFactory().hitUiHide()),h()}),[h,E,S]),v=(0,a.useCallback)((()=>{t===b.PLAYLIST?w?.add([e],{before:"start"}):x.add({uris:[e]}),t===b.EPISODE||t===b.TRACK?E.logInteraction(S.addButtonFactory().hitAddToPlaylist({playlist:t===b.TRACK?c.BP:c.Xn,itemToBeAdded:e})):E.logInteraction(S.addButtonFactory().hitFollow({itemToBeFollowed:e})),h()}),[h,t,x,E,w,S,e]);return null===k?null:(0,g.jsx)(o.T,{ref:N,titleText:f(t),descriptionText:T({entityType:t,artistOrShow:i,title:d}),confirmText:l.Ru.get("playlist.extender.button.add"),cancelText:l.Ru.get("block-user.dialog.cancel"),onConfirm:v,onClose:P,"aria-label":f(t)})}},47176:(e,t,i)=>{i.d(t,{r:()=>p});var a=i(3118),n=i(46710),s=i(80888),r=i(45474),l=i(7428),o=i(11663),d=i(81652),c=i(64640),u=i(30758);function p(e){const t=(0,a.NC)(c.HO),{request:i}=(0,u.useContext)(o.j);return(0,n.I)({enabled:t,queryKey:["useDynamicColors",e],gcTime:864e5,staleTime:432e5,queryFn:async()=>{const t=await(0,d.c)(i,r.XN,{uri:e}),a=t?.data,n=a?.lookup.at(0);if(!n)throw new s.t("Empty response");if("AlbumResponseWrapper"===n?.__typename||"ArtistResponseWrapper"===n?.__typename||"PodcastOrAudiobookResponseWrapper"===n?.__typename||"EpisodeOrChapterResponseWrapper"===n?.__typename||"TrackResponseWrapper"===n?.__typename){const e=n.data;if("Album"===e.__typename||"Podcast"===e.__typename||"Audiobook"===e.__typename||"Episode"===e.__typename||"Track"===e.__typename)return(0,l.V)(e.visualIdentity?.squareCoverImage?.extractedColorSet);if("Artist"===e.__typename)return(0,l.V)(e.visualIdentity?.wideFullBleedImage?.extractedColorSet)}throw new s.t(`Invalid response: ${t}`)},select:e=>t?e:null})}},80600:(e,t,i)=>{i.d(t,{i:()=>s});var a=i(30758);class n{constructor(e={}){this.settings={level:e.level||"polite",parent:e.parent||document.body,idPrefix:e.idPrefix||"live-region-",delay:e.delay||0},this.currentRegion=document.createElement("span")}say(e,t=this.settings.delay){this.clearNode(),this.currentRegion=document.createElement("span"),this.currentRegion.id=this.settings.idPrefix+Math.floor(1e4*Math.random());const i="assertive"!==this.settings.level?"status":"alert";this.currentRegion.setAttribute("aria-live",this.settings.level),this.currentRegion.setAttribute("role",i),this.currentRegion.setAttribute("style","clip: rect(1px, 1px, 1px, 1px); height: 1px; overflow: hidden; position: absolute; white-space: nowrap; width: 1px"),this.settings.parent.appendChild(this.currentRegion),window.setTimeout((()=>{this.currentRegion.textContent=e}),t)}clearNode(){const e=this.settings.parent.querySelector(`[id^="${this.settings.idPrefix}"]`);e&&this.settings.parent.removeChild(e)}}const s=({delay:e,idPrefix:t,level:i,parent:s}={})=>{const r=(0,a.useMemo)((()=>new n({delay:e,idPrefix:t,level:i,parent:s})),[e,t,i,s]);return(0,a.useEffect)((()=>()=>{r.clearNode()}),[r]),r}},29208:(e,t,i)=>{i.d(t,{t:()=>d});var a=i(30758),n=i(33279),s=i(86422),r=i(2106),l=i(15425);const o=[n.$.INDEX,n.$.TITLE_AND_ARTIST,n.$.PLAYS,n.$.DURATION],d=()=>{const{isCompactMode:e}=(0,s.a)(),t=(0,l.My)()===r.m.Web;return(0,a.useMemo)((()=>(({isWebPlayer:e,isCompactMode:t})=>{const i=[...o];return e&&i.splice(i.indexOf(n.$.PLAYS),1),t&&i.splice(i.indexOf(n.$.TITLE_AND_ARTIST),1,n.$.TITLE,n.$.ARTIST),i})({isWebPlayer:t,isCompactMode:e})),[e,t])}},26923:(e,t,i)=>{i.d(t,{J:()=>c});var a=i(62411),n=i(3118),s=i(72574),r=i(48975),l=i(90630),o=i(98962),d=i(67759);const c=e=>{const[t]=(0,d.A)(e),i=(0,r.n)(),c=(0,a.d4)(o.F6),u=(0,n.NC)(l.U4t),p=!i&&t,y=(0,s.o_h)(e);return y?.type===s.NQG.ALBUM?{playUri:p&&!u?(0,s.Uu7)(c,(0,s.o_h)(e)?.id).toURI():e,playOptions:p?{useListPlatformPlay:u}:{}}:{playUri:e,playOptions:{}}}},38557:(e,t,i)=>{i.d(t,{Z:()=>n});var a=i(30758);function n(e){const t=(0,a.useRef)();return(0,a.useEffect)((()=>{t.current=e}),[e]),t.current}},13946:(e,t,i)=>{i.d(t,{P:()=>a.P});var a=i(6704)},17807:(e,t,i)=>{i.d(t,{L$:()=>o,Q2:()=>d,hV:()=>l,j2:()=>r,pr:()=>u,qc:()=>s,rO:()=>c});var a=i(88176),n=i(2036);const s=({albumArtists:e,albumName:t,albumType:i,shouldLocalize:s,i18n:r})=>{if(!i||!t||!e)return"";const l=i!==a._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(i):i,o=(0,n.C)(i),d=`${t} - ${l} by ${e} | Spotify`,c=r.get("i18n.meta.album.title",t,o,e);return s?c:d},r=({i18n:e,shouldLocalize:t,artistTitleTagExperimentVariants:i={artistTitleTagSongsVariantEnabled:!1,artistTitleTagSongsAndMoreVariantEnabled:!1,artistTitleTagSongsAndMusicVariantEnabled:!1},artistName:a})=>{if(!a)return"";const{artistTitleTagSongsVariantEnabled:n,artistTitleTagSongsAndMoreVariantEnabled:s,artistTitleTagSongsAndMusicVariantEnabled:r}=i;if(t){if(n)return e.get("i18n.meta.artist.title.artist-songs",a);if(r)return e.get("i18n.meta.artist.title.artist-songs-and-music",a);if(s)return e.get("i18n.meta.artist.title.artist-songs-and-more",a)}return`${a} | Spotify`},l=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",o=({episodeOrChapterName:e,showOrAudiobookName:t,type:i})=>e&&t?`${e} - ${t} | ${i} on Spotify`:"",d=({playlistName:e,userName:t,isSpotifyOwned:i=!1,spotifyPlaylistTitleTagVariants:a={spotifyPlaylistTitleTagVariant1Enabled:!1,spotifyPlaylistTitleTagVariant2Enabled:!1,spotifyPlaylistTitleTagVariant3Enabled:!1},userPlaylistTitleTagVariants:n={userPlaylistTitleTagVariant1Enabled:!1,userPlaylistTitleTagVariant2Enabled:!1,userPlaylistTitleTagVariant3Enabled:!1},count:s})=>{if(!e||!t)return"";const{spotifyPlaylistTitleTagVariant1Enabled:r,spotifyPlaylistTitleTagVariant2Enabled:l,spotifyPlaylistTitleTagVariant3Enabled:o}=a,{userPlaylistTitleTagVariant1Enabled:d,userPlaylistTitleTagVariant2Enabled:c,userPlaylistTitleTagVariant3Enabled:u}=n;if(s){const a=s>1?"Songs":"Song",n=s>1?"songs":"song";if(i){if(r)return`${e} - ${s} ${a} | Spotify Playlist`;if(l)return`${e} - Top ${s} ${a} | Spotify Playlist`;if(o)return`${e} - ${s} ${a} - playlist by Spotify`}if(d)return`${e} - playlist by ${t} - ${s} ${n} | Spotify`;if(c)return`${e} - ${s} ${n} - playlist by ${t} | Spotify`;if(u)return`${e} - ${s} ${n} | Spotify`}return`${e}${i?"":` - playlist by ${t}`} | ${i?"Spotify Playlist":"Spotify"}`},c=({i18n:e,trackArtistsList:t,trackName:i,shouldLocalize:a,disabled:n=!1})=>{if(!t||!i)return"";let s=`${i} - song and lyrics by ${t} | Spotify`,r=e.get("i18n.meta.track-lyrics.title",i,t);return n&&(s=`${i} - song by ${t} | Spotify`,r=e.get("i18n.meta.track.title",i,t)),a?r:s},u=({i18n:e,shouldLocalize:t})=>{const i=e.get("i18n.meta.home.title");return t?i:"Spotify - Web Player: Music for everyone"}}}]);
//# sourceMappingURL=2627.js.map