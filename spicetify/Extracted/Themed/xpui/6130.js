"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6130],{3408:(e,r,t)=>{t.d(r,{R:()=>T});var n=t(30758),l=t(2164),o=t(70824);function u(e,r,t=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,o.fk)(e))return;const n=e.querySelector('[tabindex="0"]');r===l.O.UP&&(0,o.MS)(n,s(e,n,l.O.UP,t)),r===l.O.DOWN&&(0,o.MS)(n,s(e,n,l.O.DOWN,t)),r===l.O.RIGHT&&(0,o.MS)(n,c(n,l.O.RIGHT,t)),r===l.O.LEFT&&(0,o.MS)(n,c(n,l.O.LEFT,t)),r===l.O.HOME&&(0,o.MS)(n,a(l.O.HOME,t)??n),r===l.O.END&&(0,o.MS)(n,a(l.O.END,t)??n)}function s(e,r,t,n=!1){const u=r.closest('li[role="row"]');if(!u)return r;let s=u;const a=Array.from(e.querySelectorAll('li[role="row"]')),i=Array.from(u.querySelectorAll(o.nu)),f=a.indexOf(u);if(f<0)return r;const d=(n&&r!==i[0]||!n&&r!==u)&&!(r instanceof HTMLLIElement);if(t===l.O.UP){if(document.activeElement===e){s=a[a.length-1];return(n?s.querySelector(o.nu):s)??r}if(d)return c(r,l.O.LEFT,n);let t=f-1;if(-1===t)return r;s=a[t],t-=1}else if(t===l.O.DOWN){if(document.activeElement===e){s=a[0];return(n?s.querySelector(o.nu):s)??r}if(d)return c(r,l.O.RIGHT,n);let t=f+1;if(t===a.length)return r;s=a[t],t+=1}return(n?s.querySelector(o.nu):s)??r}function c(e,r,t=!1){const n=e.closest('li[role="row"]');if(!n)return e;let u=e;const s=Array.from(n.querySelectorAll(o.nu)),c=s.indexOf(e);let a=0;if(r===l.O.RIGHT&&c-1!==s.length)a=c+1;else{if(r===l.O.LEFT&&-1===c)return n;if(r===l.O.LEFT&&0!==c)a=c-1;else if(r===l.O.LEFT&&0===c){return(t?n.querySelector(o.nu):n)??n}}return u=s.at(a),u??e}function a(e,r=!1){const{currentFocus:t,listEl:n}=function(){const e=document.activeElement,r=e?.closest("ul");return((0,l.I)(e)||e instanceof HTMLLIElement)&&r?{currentFocus:e,listEl:r}:{currentFocus:null,listEl:null}}();if(null===t||null===n)return null;const u=t.closest('li[role="row"]');if(!u)return t;const s=Array.from(n.querySelectorAll('li[role="row"]')),c=Array.from(u.querySelectorAll(o.nu));if(s.indexOf(u)<0)return t;const a=r&&t===c[0]||!r&&t===u;if(e===l.O.HOME){if(a){return(r?s[0].querySelector(o.nu):s[0])??t}return(r?c[1]:c[0])??t}if(e===l.O.END){if(a){return(r?s[s.length-1].querySelector(o.nu):s[s.length-1])??t}return c[c.length-1]??t}return t}var i=t(89977),f=t(43365),d=t(86070);const T=(0,n.forwardRef)((({onKeyDown:e,children:r,firstInteractiveIsWrapper:t=!1,...s},c)=>{const a=(0,f.N)(c);(0,i.R)(a);const T=(0,n.useCallback)((r=>{a.current?.contains(r.target)&&("ArrowUp"!==r.key&&"ArrowDown"!==r.key&&"Home"!==r.key&&"End"!==r.key||r.preventDefault(),"ArrowUp"!==r.key&&"ArrowDown"!==r.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===r.key&&u(a.current,l.O.UP,t),"ArrowDown"===r.key&&u(a.current,l.O.DOWN,t),"ArrowRight"===r.key&&u(a.current,l.O.RIGHT,t),"ArrowLeft"===r.key&&u(a.current,l.O.LEFT,t),"Home"===r.key&&u(a.current,l.O.HOME,t),"End"===r.key&&u(a.current,l.O.END,t),e?.(r))}),[t,a,e]),S=(0,n.useCallback)((e=>{if(!a.current)return;const r=e.target,t=a.current.querySelector('[tabindex="0"]');r.closest('li[role="row"]')&&r!==t&&(0,o.MS)(t,r,{preventScroll:!0})}),[a]);return(0,d.jsx)("ul",{role:"treegrid",ref:a,onKeyDown:T,onFocus:S,tabIndex:0,...s,children:r})}))},64493:(e,r,t)=>{t.d(r,{W:()=>u});var n=t(30758),l=t(52956),o=t(86070);const u=({children:e,innerRef:r,reRunOnDOMUpdate:t=!1,...u})=>{const s=(0,n.useRef)(null),c=r??s;return(0,l.g)(c,t),(0,o.jsx)("li",{ref:c,"aria-expanded":"true","aria-level":1,role:"row",...u,children:e})}},19988:(e,r,t)=>{t.d(r,{Nz:()=>s,Vp:()=>o,Vv:()=>c,wD:()=>a,xz:()=>u});var n=t(20256),l=t(56563);const o=[n.fl.TRACKS,n.fl.LOCAL_TRACKS,n.fl.ALBUMS,n.fl.ARTISTS,n.fl.AUTHORS,n.fl.PLAYLISTS,n.fl.PLAYLISTS_V2,n.fl.FOLDERS,n.fl.EPISODES,n.fl.CHAPTERS,n.fl.SHOWS,n.fl.AUDIOBOOKS,n.fl.PSEUDO_PLAYLISTS],u={[n.fl.TRACKS]:"tracks",[n.fl.ALBUMS]:"albums",[n.fl.ARTISTS]:"artists",[n.fl.AUTHORS]:"authors",[n.fl.PLAYLISTS]:"playlists",[n.fl.FOLDERS]:"folders",[n.fl.SHOWS]:"shows",[n.fl.EPISODES]:"episodes",[n.fl.CHAPTERS]:"chapters",[n.fl.LOCAL_TRACKS]:"local-tracks",[n.fl.AUDIOBOOKS]:"audiobooks",[n.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let s=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const c=(0,l.g)(s);function a(e){return o.includes(e)}},85583:(e,r,t)=>{t.d(r,{A:()=>O});var n=t(30758),l=t(88308),o=t(20256),u=t(19988);function s(e,r,t,n){if(e.defaultPrevented)return null;const l=r.includes(u.Nz.BEFORE),o=r.includes(u.Nz.AFTER);let s=u.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(l||o)){const{top:o,height:c,left:a,width:i,right:f}=e.currentTarget.getBoundingClientRect(),d=r.includes(u.Nz.ON);if("horizontal"===t)if(d&&l){(n?e.clientX>Math.round(f)-i/4:e.clientX<Math.round(a)+i/4)&&(s=u.Nz.BEFORE)}else{s=(n?e.clientX>Math.round(f)-i/2:e.clientX<Math.round(a)+i/2)?u.Nz.BEFORE:u.Nz.AFTER}else"vertical"===t&&(d&&l?e.clientY<Math.round(o)+c/4&&(s=u.Nz.BEFORE):s=e.clientY<Math.round(o)+c/2?u.Nz.BEFORE:u.Nz.AFTER)}return r.includes(s)?s:null}var c=t(72574);function a(e,r){return Array.from(e.dataTransfer?.types??[]).filter(o._4).filter((e=>!!(0,u.wD)(e)&&r.includes(e))).filter(u.wD)}var i=t(98628);function f(e,r,t){const n=a(e,r);if(!n.length)return function(e,r){return e.split(/[\s,;]+/g).map((e=>(0,c.o_h)(e?.trim()))).filter(i.P).reduce(((e,t)=>{const n=o.Ay[t.type];return(0,u.wD)(n)&&r.includes(n)?(e[n]||=[],e[n].push(t.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),r);const l=Object.fromEntries(n.map((r=>[r,e.dataTransfer?.getData(r)?.split("\n").filter(Boolean)??[]])));if(t){const{[o.fl.PLAYLISTS]:e,...r}=l,t=Array.from(new Set([...l[o.fl.PLAYLISTS_V2]??[],...(l[o.fl.PLAYLISTS]??[]).map(d)]));return{...r,...t.length?{[o.fl.PLAYLISTS_V2]:t}:null}}return l}function d(e){const r=(0,c.o_h)(e);return r?.type===c.NQG.PLAYLIST?(0,c.Pse)(r.id).toURI():e}var T=t(74568),S=t(13867);const p={droppableMimeTypes:"albums artists authors episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"main-useDropTarget-base","useDropTarget--albums":"main-useDropTarget-album","useDropTarget--artists":"main-useDropTarget-artist","useDropTarget--authors":"CU0fvofmxUbTupSDNOQ3","useDropTarget--episodes":"main-useDropTarget-episode","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"main-useDropTarget-folder","useDropTarget--playlists":"main-useDropTarget-playlist","useDropTarget--shows":"main-useDropTarget-show","useDropTarget--tracks":"main-useDropTarget-track","useDropTarget--local-tracks":"main-useDropTarget-local","useDropTarget--audiobooks":"main-useDropTarget-audiobook","useDropTarget--pseudo-playlists":"main-useDropTarget-pseudoPlaylist"};function O({uri:e,id:r=e,allowedMimeTypesByDropPosition:t,onDrop:c,onLongDragOver:i,longDragOverTimeout:d=1e3,reorderDirection:O="vertical"}){const E=(0,l.lB)((()=>t),[t]),m=(0,S.W)(),y=(0,T.wK)(),D=!!r&&1===y.length&&y[0]===r,A=Object.values(E).every((e=>e.includes(o.fl.PLAYLISTS_V2)&&!e.includes(o.fl.PLAYLISTS))),[L,h]=(0,n.useState)(null),v=(0,n.useCallback)((e=>D?[]:Object.entries(E).filter((([r,t])=>a(e,t).length>0)).map((([e])=>e)).filter(u.Vv)),[D,E]),w=(0,n.useRef)(!0),R=(0,n.useRef)(null),k=(0,n.useRef)(c);k.current=c;const I=(0,n.useRef)(i);I.current=i;const b=(0,n.useCallback)((()=>{w.current=!0,h(null),R.current&&(window.clearTimeout(R.current),R.current=null)}),[]);(0,n.useEffect)((()=>b),[b]);const N=(0,n.useCallback)((e=>{const r=v(e);r.length&&(h(s(e,r,O,m)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=r.includes(u.Nz.ON)?"copy":"move"),e.preventDefault())}),[v,m,O]),P=(0,n.useCallback)((e=>{if(v(e).length&&!e.defaultPrevented){if(w.current){w.current=!1;const r=e.currentTarget,t=()=>{document.contains(r)||(b(),document.removeEventListener("dragenter",t))};document.addEventListener("dragenter",t),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",t),b()}),{once:!0}),I.current&&(R.current=window.setTimeout((()=>{I.current?.()}),d))}e.preventDefault()}}),[v,d,b]),F=(0,n.useCallback)((e=>{v(e).length&&(function(e){return null===e.relatedTarget&&g?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&b(),e.preventDefault())}),[v,b]),M=(0,n.useCallback)((e=>{const r=s(e,v(e),O,m);if(!e.defaultPrevented&&r){const t=f(e,E[r]??[],A),n=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(o.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(t).length&&k.current&&(k.current(t,r,n),e.preventDefault())}b()}),[v,O,m,b,E,A]),H=(0,n.useMemo)((()=>`${p.useDropTarget} ${Array.from(new Set(Object.values(E).flat()))?.map((e=>p[`useDropTarget--${u.xz[e]}`]??"")).join(" ")}`),[E]);return(0,n.useMemo)((()=>({dropPosition:L,className:H,onDragEnter:P,onDragLeave:F,onDragOver:N,onDrop:M})),[H,L,P,F,N,M])}const g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},89977:(e,r,t)=>{t.d(r,{R:()=>l});var n=t(30758);const l=e=>{const[r,t]=(0,n.useState)(null);(0,n.useEffect)((()=>{const r=e.current;if(!r)return()=>{};const n=({target:e})=>{e instanceof HTMLElement&&t(e)};return r.addEventListener("focusout",n),()=>{r.removeEventListener("focusout",n)}}),[e]),(0,n.useEffect)((()=>{const n=e.current;if(!r||!n)return;const l=n.contains(r),o=n.contains(document.activeElement);!l&&!o&&n.focus({preventScroll:!0}),t(null)}),[e,r])}},43365:(e,r,t)=>{t.d(r,{N:()=>l});var n=t(30758);function l(e){const r=(0,n.useRef)(null);return(0,n.useEffect)((()=>{e&&("function"==typeof e?e(r.current):e.current=r.current)})),r}}}]);
//# sourceMappingURL=6130.js.map