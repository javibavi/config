(()=>{var e,t,n,s={2866:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{enableAccountsDPoP:()=>d,enableDesktopApiEndpointNonAuth:()=>u,enableNewLoginExperience:()=>c,enableNothing:()=>l,enableQrCodeLoginExperience:()=>h});var r=n(9576),i=n(3118),o=n(5280);let a=function(e){return e.Control="Control",e.LoginCTA="LoginCta",e.SignupCTA="SignupCta",e}({});const l=(0,o.m9)({name:"enableNothing",description:"Property to that does nothing.",default:!1}),c=(0,o.m9)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1}),u=(0,o.m9)({name:"enable_desktop_api_endpoint_non_auth",description:"Enable the creation of the local API endpoint",default:!1}),d=(0,o.m9)({name:"enableDPoP",description:"Enable DPoP for loginWithAccounts flow",default:!1}),h=(0,o.BL)({name:"enableQrCodeLoginExperience",description:"Enable treatment group for QR-code login experience",values:a,default:a.Control});var g=n(758),p=n(4438),m=n(555);const f="EDO6W2NIL5kJzuuvw2J7";var v=n(4758),y=n.n(v);const w=864e5;class b{_cache=new Map;constructor(e=null){if(this._ttl=e,null!==e&&(e<1||e>w))throw new Error("TTL should be between 1 (1 ms) and 86400000 (1 day).")}isExpired(e){return null!==e.expiry&&e.expiry<Date.now()}getExpiry(){return null!==this._ttl?Date.now()+this._ttl:null}entries(){return this._cache.entries()}has(e){return void 0!==this.get(e)}peek(e){const t=this._cache.get(e);return t?.value}get(e){const t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}set(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}create(e,t){const n=this.get(e);if(void 0===n){const n=t();return this.set(e,n),n}return n}delete(e){this._cache.delete(e)}clear(){this._cache.clear()}cleanup(){this._cache.forEach(((e,t)=>{this.isExpired(e)&&this._cache.delete(t)}))}}class x extends b{constructor(){super(null)}deleteOnSettle(e,t){return t.then((()=>this.delete(e)),(()=>this.delete(e))),t}create(e,t){const n=super.create(e,t);return this.deleteOnSettle(e,n)}set(e,t){super.set(e,this.deleteOnSettle(e,t))}}let E=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}({}),_=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});const S=new Intl.Locale(_.en);Object.values(_);function C(e){const t=`(?:${e.join("|")})`;return new RegExp(String.raw`(\{${t}\}|%${t}%)`,"g")}const k=new class{_localeForTranslation=S;_localeForFormatting=S;_localeForURLPath=S;_translations={};_relativeTimeFormat=null;_dateTimeFormats=new b;_pluralRules=null;getRelativeTimeFormat(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting.toString())),this._relativeTimeFormat}getDateTimeFormat(e){const t=JSON.stringify(Object.keys(e).sort().map((t=>({[t]:e[t]}))));return this._dateTimeFormats.create(t,(()=>new Intl.DateTimeFormat(this._localeForFormatting.toString(),e)))}getPluralRules(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation.toString())),this._pluralRules}getPluralKey(e){const t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch{return"other"}}initialize({localeForTranslation:e,localeForFormatting:t,translations:n}){var s;this._localeForTranslation=new Intl.Locale(e),this._localeForFormatting=("string"==typeof(s=t??e)&&(s=new Intl.Locale(s)),"ar"===s.baseName?new Intl.Locale(s,{numberingSystem:"latn"}):s),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));const t=new Set([_.paIN,_.paPK,_.zhCN,_.zhTW,_.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):S}(e),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=n}getLocaleForTranslation(){return this._localeForTranslation.baseName}getLocaleForFormatting(){return this._localeForFormatting.baseName}getLocaleForURLPath(){return this._localeForURLPath.baseName}getLocaleForSmartling(){const e=this._localeForTranslation.baseName;return y()[e]||e}getTranslations(){return this._translations}toLocaleLowerCase(e){return e?.toLocaleLowerCase(this._localeForTranslation.toString())}toLocaleUpperCase(e){return e?.toLocaleUpperCase(this._localeForTranslation.toString())}get(e,...t){const n=e in this._translations?this._translations[e]:e;let s="";if("string"!=typeof n){const e=t[0],r=n[this.getPluralKey(e)];void 0!==r?s=r:n.other&&(s=n.other)}else s=n;if(/%\d%/.test(s)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}const r={},i={};t.forEach(((e,t)=>{const n="object"!=typeof e||null===e||(0,g.isValidElement)(e)?[[t,e]]:Object.entries(e);for(const[e,t]of n)(0,g.isValidElement)(t)?i[e]=t:void 0!==t&&(r[e]=t)})),s=s.replace(C(Object.keys(r)),((e,t)=>{const n=t.slice(1,-1),s=r[n];return"number"==typeof s?this.formatNumber(s):s}));const o=Object.keys(i);return o.length?(0,g.createElement)(g.Fragment,null,s.split(C(o)).map(((e,t)=>{if(t%2){const t=e.slice(1,-1),n=i[t];return(0,g.cloneElement)(n,{key:n.key??t})}return e})).filter((e=>""!==e))):s}getSeparator(){switch(new Intl.Locale(this._localeForTranslation).language){case _.ar:return E.AR;case _.fa:return E.FA;default:return E.EN}}formatNumber(e,t){return e.toLocaleString(this._localeForFormatting,t)}formatNumberCompact(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(n).format(e)}formatRelativeDate(e,t=null,n=new Date,s=2592e6){const r=this.getRelativeTimeFormat(),i=e.getTime()-n.getTime(),o=Math.abs(i)<s;if(null!==r&&o){const{weeks:t,days:s,hours:o,minutes:l,seconds:c}=(a=i,{seconds:Math.round(a/1e3),minutes:Math.round(a/1e3/60),hours:Math.round(a/1e3/60/60),days:Math.round(a/1e3/60/60/24),weeks:Math.round(a/1e3/60/60/24/7)}),u=e.getFullYear()-n.getFullYear(),d=e.getMonth()-n.getMonth()+12*u;return Math.abs(d)>=12?r.format(u,"years"):Math.abs(t)>4?r.format(d,"months"):Math.abs(s)>=7?r.format(t,"weeks"):Math.abs(o)>=24?r.format(s,"days"):Math.abs(l)>=60?r.format(o,"hours"):Math.abs(c)>=60?r.format(l,"minutes"):r.format(c,"seconds")}var a;return this.formatDate(e,t)}};var N=n(6070);const A=({toggleSettings:e})=>(0,N.jsxs)("header",{className:f,children:[(0,N.jsx)(p.G,{height:"40"}),(0,N.jsx)(m.$,{onClick:e,size:"small",colorSet:"invertedDark",children:k.get("desktop.login.PreferencesLink")})]}),R="dDq7z7SMlOtaz9XvBhD8",j="U5LyL65TJ6tdGjHlaK1q",I="awxiyoFzSyDm_MbWN_eY";var O=n(9806),L=n(3505),T=n(1751),M=n(1974);let F=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});const P="_Cavu1tQ2xHOf1gnVGLI",U="OAeAxLyDsiZO9kZm0WTJ",D="aO8ExrFCupBc13AZlOiu";var B=n(1223);const H="RKmCwNfF52QOvDMMoteA",W="VDAySBjjOh9Kf83VFHyw",G="N8UxiIkVqP_rLpZHNysn",z="E5bQk5goX9hChELcTBbe",V="cgl3eWBkELRCNdMhDX8w",K="cRd8EyQyHz4DK42rr3yw";var Q=n(7500),q=n.n(Q),$=n(933),J=n.n($);const X="lij5P44ZbO8C0Oh8ZJtb",Z="x3YuUrWGHgimbC8VFa2e",Y="qQItFS8myykGhpxMYzyA",ee="I3zkdnuhFFrZ1Rr1BJhb",te="AvH27oyRpOm17rom9Bnt",ne="sXrNbiybT8RKnisJnpV3",se="qh9X1aEYVqtUP2alr32V",re="F9EQJ9z0gxjxglXhzCcg",ie="zogFp9G1AEqb8AKOd5BO",oe=e=>{const{isOpen:t,contentLabel:n,children:s,className:r,overlayClassName:i,animated:o,animation:a,shouldFocusAfterRender:l=!0,...c}=e;let u=0;return o?u=300:a?.closeTimeoutMs&&(u=a.closeTimeoutMs),(0,N.jsx)(J(),{className:{base:q()(ie,{[X]:o},[a?.modal?.base,r]),afterOpen:q()({[Z]:o},[a?.modal?.afterOpen]),beforeClose:q()({[Y]:o},[a?.modal?.beforeClose])},overlayClassName:{base:q()(ee,{[te]:o},[a?.overlay?.base,i]),afterOpen:q()({[ne]:o},[a?.overlay?.afterOpen]),beforeClose:q()({[se]:o},[a?.overlay?.beforeClose])},bodyOpenClassName:re,isOpen:t,...u?{closeTimeoutMS:u}:{},shouldFocusAfterRender:l,preventScroll:!0,ariaHideApp:!1,contentLabel:n,...c,children:s})},ae=e=>(0,N.jsx)(oe,{...e}),le=({isSigningUp:e,closeModal:t,retryOpeningBrowser:n,errorMessage:s,isOpen:r=!0})=>(0,N.jsx)(ae,{className:H,isOpen:r,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:G,onRequestClose:t,"aria-label":e?k.get("desktop-auth.login.redirect-to-browser-signup"):k.get("desktop-auth.login.redirect-to-browser-login"),children:(0,N.jsxs)("div",{className:W,children:[(0,N.jsx)(p.G,{height:"38"}),(0,N.jsx)(L.E,{variant:"titleMedium",semanticColor:"textBase",children:e?k.get("desktop-auth.login.redirect-to-browser-signup"):k.get("desktop-auth.login.redirect-to-browser-login")}),s&&(0,N.jsxs)("div",{className:V,role:"alert","aria-live":"assertive",children:[(0,N.jsx)(B.b,{className:K}),(0,N.jsx)("span",{dangerouslySetInnerHTML:{__html:s}})]}),(0,N.jsxs)("button",{className:z,onClick:n,children:[!s&&(0,N.jsx)(L.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:k.get("desktop-auth.login.not-seeing-browser")}),(0,N.jsx)(L.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:k.get("desktop-auth.login.try-again")})]})]})}),ce="https://www.spotify.com/redirect/account-page/",ue="showSettings",de={id:"UnknownLoginErrorMessage"},he={id:"DefaultErrorMessage",replace:[ue]},ge={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[ue]},400:de,401:de,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:de,405:de,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[ce]},408:{id:"RegionMismatchMessage",replace:[ce,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:de,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:de,415:de,416:de,417:{id:"FacebookCredentialsMisusedMessage"},418:de,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},pe={1:de,2:de,3:{id:"BadCredentialsMessage"},4:de,5:de,6:de,7:de,8:de,9:de,10:de,11:de},me={1:{silent:!0},2:de,3:de,4:{id:"SessionExpiredMessage"},5:he};function fe(e,t,n){if(0===t)return"";if(!e&&!t)return"";let s=ge;switch(e){case"session":s=pe;break;case"desktop_login_accounts":s=me}const r=s[t]||he;if(r.silent)return"";const i=r.replace||[];let o="";switch(r.id){case"UnknownLoginErrorMessage":o=k.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":o=k.get("desktop.login.DefaultErrorMessage",i[0]);break;case"SessionTerminatedMessage":o=k.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":o=k.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":o=k.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":o=k.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":o=k.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":o=k.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":o=k.get("desktop.login.ErrorProxyAuthRequired",i[0]);break;case"CriticalUpdate":o=k.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":o=k.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":o=k.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":o=k.get("desktop.login.MissingUserInfoMessage",i[0]);break;case"RegionMismatchMessage":o=k.get("desktop.login.RegionMismatchMessage",i[0],i[1]);break;case"PremiumUsersOnlyMessage":o=k.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":o=k.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":o=k.get("desktop.login.ClientUpdateFail",i[0]);break;case"FbUserNotFoundSignUp":o=k.get("desktop.login.FbUserNotFoundSignUp",i[0])}return n?`${o}<br>${k.get("desktop.login.errorCode",n)}`:o}var ve=n(5366),ye=n(3074),we=n.n(ye);const be=we().create().toString(),xe="has-used-app";function Ee(){const e=!window.localStorage.getItem(xe);return e&&window.localStorage.setItem(xe,"true"),e}const _e=window.localStorage,Se=()=>{const e=_e.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};class Ce{constructor(e){this._eventSender=e}logPageView({page:e,actionHash:t}){this.logAction({page:e,action_type:"pageview",action_intent:"",action_hash:t})}logAction({page:e,action_type:t,action_intent:n,item_id:s,action_hash:r},i){this._eventSender.send((0,ve.I)({action_type:t,action_intent:n,action_page:e,action_item_id:s,action_hash:r,device_is_new_install:Ee(),device_locale:window.__spotify.locale,device_referrer:Se(),ab_flags:"",session_id:be}),i)}async finalFlush(){await this._eventSender.finalFlush()}}function ke(){return we().create().toString()}const Ne=(0,g.createContext)(null),Ae=({eventSender:e,children:t})=>{const n=(0,g.useMemo)((()=>new Ce(e)),[e]),[s,r]=(0,g.useState)(ke()),i=(0,g.useCallback)((()=>{r(null)}),[]),o=(0,g.useMemo)((()=>({logger:n,pageviewActionHash:s,clearPageviewActionHash:i})),[i,n,s]);return(0,N.jsx)(Ne.Provider,{value:o,children:t})},Re=()=>{const e=(0,g.useContext)(Ne);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e},je=(0,g.createContext)(null);function Ie(e){return function(){const e=(0,g.useContext)(je);if(null===e)throw new Error("Trying to use 'RegistryContext' without 'RegistryProvider'!");return e}().resolve(e)}function Oe(e){return Symbol.for(e)}function Le(e){return e.description??e.toString()}const Te=Oe("DesktopLoginClient");var Me=function(e){return e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e}(Me||{});const Fe=()=>{const[e,t]=(0,g.useState)(!1),[n,s]=(0,g.useState)(!1),[r,o]=(0,g.useState)(""),a=(0,i.NC)(d),l=(0,g.useRef)(0),c=Ie(Te),{logger:u,pageviewActionHash:h,clearPageviewActionHash:p}=Re();return{handleLoginOrSignupClick:(0,g.useCallback)((async e=>{const n=++l.current;let r;s(e),o(""),t(!0),h?(r=h,p()):r=ke(),u.logAction({page:"auth-on-web",action_type:"click",action_intent:e?"sign-up-with-browser":"log-in-with-browser",action_hash:r});try{const t=await c.loginWithAccounts({enableSignup:e,actionHash:r,useDpop:a});if(t.error)throw t.error;u.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-success-signup":"show-success-login"},{flush:!1}),await u.finalFlush(),location.href="spotify:app:xpui"}catch(s){const r="string"==typeof s?JSON.parse(s):s;if(n!==l.current)return void u.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:r?.errorReference});t(!1);let i=fe(r.errorCategory,r.errorCode,r.errorReference);"desktop_login_accounts"===r.errorCategory&&r.errorCode===Me.OPERATION_TIMED_OUT&&(i=e?k.get("desktop-auth.login.signup-time-out"):k.get("desktop-auth.login.login-time-out")),o(i),u.logAction({page:"auth-on-web",action_type:"view",action_intent:e?"show-error-signup":"show-error-login",item_id:r?.errorReference})}}),[p,u,c,h,a]),handleTryAgainClick:(0,g.useCallback)((()=>{t(!1),u.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})}),[u]),isWaitingForBrowser:e,isSigningUp:n,errorMessage:r}},Pe=({titleStrings:e,titleVariants:t,widthBreakpoint:n,heightBreakpoint:s})=>{const[r,i]=(0,g.useState)(!1),{handleLoginOrSignupClick:o,isSigningUp:a,errorMessage:l}=Fe(),c=()=>{let e=t[n??F.MEDIUM];return n===F.LARGE&&s===F.SMALL?e=t[F.MEDIUM]:n===F.MEDIUM&&s===F.LARGE?e=t[s]:n!==F.SMALL||s!==F.MEDIUM&&s!==F.LARGE||(e=t[s]),e};return(0,N.jsxs)(N.Fragment,{children:[r&&(0,N.jsx)(le,{isSigningUp:a,closeModal:()=>i(!1),retryOpeningBrowser:()=>{o(!0)},errorMessage:l}),(0,N.jsxs)("div",{className:P,children:[(0,N.jsx)("div",{className:D,children:e.map(((e,t)=>(0,N.jsx)(L.E,{variant:c(),semanticColor:"textBase",children:e},`title-${t}`)))}),(0,N.jsxs)("div",{className:U,children:[(0,N.jsx)(m.$,{onClick:()=>{o(!0)},iconTrailing:T.H,"data-testid":"signup-button",children:k.get("desktop-auth.login.sign-up-with-browser")}),(0,N.jsx)(M.n,{onClick:()=>{o(!1)},iconTrailing:T.H,"data-testid":"login-button",children:k.get("desktop-auth.login.log-in-with-browser")})]})]})]})},Ue="pGPnNDcYgyNwnreAcAjH",De="SH3eUKfHc4CgBmWIBRrv",Be="Tcw5QBhdNr3DQLv4tFI6",He="Z0UVjrWuri5SAyaPIcXN",We="AW58_lCPMJQuX4DRlFnb",Ge="Dd2IOSyZz6e01mIY_yfr";var ze=n(1878),Ve=n(4259);const Ke=({nrSteps:e,atStep:t,navigate:n,backgroundImage:s})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:Ue,children:[(0,N.jsxs)("div",{className:De,children:[(0,N.jsx)(m.$,{colorSet:"invertedDark",size:"medium",iconOnly:ze.g,onClick:()=>n((t-1+e)%e),"aria-label":"previous page"}),(0,N.jsx)(m.$,{colorSet:"invertedDark",size:"medium",iconOnly:Ve.V,onClick:()=>n((t+1)%e),"aria-label":"next page"})]}),(0,N.jsx)("div",{className:He,children:Array.from({length:e}).map(((e,s)=>(0,N.jsx)("button",{className:Be,onClick:()=>n(s),children:(0,N.jsx)("div",{className:q()(We,{[Ge]:t===s}),"aria-label":`navigate to page ${s+1}`})},s)))})]}),s]}),Qe="ziwA70F7A7bE1f_6JfC6",qe="OspetDqlUGDfoHpTMfNO",$e="GFbAscggSBjAyjtM_3jg",Je="pi2IJ4liRapxpGdxMJu5",Xe=({imageLocale:e,fadeInRef:t})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{className:q()(Qe,{[qe]:t.current}),src:`images/localised-carousel-image/login-1-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,N.jsx)("div",{className:Je}),(0,N.jsx)("div",{className:$e})]}),Ze=({imageLocale:e,fadeInRef:t})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("img",{className:q()(Qe,{[qe]:t.current}),src:`images/localised-carousel-image/login-2-${e}.avif`,onAnimationEnd:()=>{t.current=!1},alt:""}),(0,N.jsx)("div",{className:Je}),(0,N.jsx)("div",{className:$e})]}),Ye="t71Gs8ndLnfWLdcqPzTw",et="eSEJ1rqeTzD_6sklBWTI",tt="XGEPBM1JHuPOpeuZsIwA",nt="Kj3InjxX0eAmTViGluAm",st="_SsAtuLKRe2TvyQ7V_iu",rt="IONRZYfY863Fg8_TZZwW",it="mzc8KoGBYnUXfOViDxlH",ot=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],at=({imgSrc:e,reverse:t})=>{const[n,s]=(0,g.useState)(!1),[r,i]=(0,g.useState)(!1),[o,a]=(0,g.useState)(!1),l=n&&r&&o;return(0,N.jsxs)("div",{className:q()(et,{[tt]:l&&!t,[nt]:l&&t}),children:[(0,N.jsx)("img",{src:e,className:rt,onLoad:()=>{s(!0)},alt:""}),(0,N.jsx)("img",{src:e,className:rt,onLoad:()=>{i(!0)},alt:""}),(0,N.jsx)("img",{src:e,className:rt,onLoad:()=>{a(!0)},alt:""})]})},lt=({fadeInRef:e})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{dir:"ltr",className:q()(Ye,{[st]:e.current}),onAnimationEnd:()=>{e.current=!1},children:[...Array(6).keys()].concat([...Array(6).keys()]).concat([...Array(6).keys()]).map(((e,t)=>(0,N.jsx)(at,{imgSrc:`images/artwork-grid/row-${e+1}.avif`,reverse:t%2==0},`image-row-${t}`)))}),(0,N.jsx)("div",{className:it})]});var ct=n(9856),ut=n.n(ct);function dt(){return"Safari"===ut().parse(window.navigator.userAgent).browser.name}const ht="zrvvPyoxE6wQNqnu0yWA",gt="jmu6DFPvhxRl0wSfmv2O",pt=({value:e,id:t,children:n,disabled:s,onSelect:r,className:i,dir:o})=>(0,N.jsx)("span",{className:i,children:(0,N.jsx)("select",{className:q()(ht,{[gt]:dt()}),value:e?.toString(),id:t,disabled:s,onBlur:()=>{},onChange:e=>{r(e.target.value)},dir:o,children:n})}),mt=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),ft=/\p{White_Space}/u,vt=/\p{P}/u,yt=/\p{sc=Han}/u;function wt(e){return null!==e&&ft.test(e)}function bt(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||wt(e))}function xt(e){return null!==e&&vt.test(e)}function Et(e){return null!==e&&yt.test(e)}class _t{constructor(e,t,n){if(t<0||n<0||t+n>e.length)throw new RangeError;this.data=e,this.offset=t,this.length=n,this.position=0}static from(e){const t=Array.from(e.normalize("NFC"));return new _t(t,0,t.length)}toString(){return this.data.slice(this.offset,this.offset+this.length).join("")}slice(e=0,t=this.length){if(e<0||t>this.length)throw new RangeError;const n=this.offset+e,s=t-e;return new _t(this.data,n,s)}nextCodePoint(){return this.position===this.length?null:this.data[this.offset+this.position++]}}function St(e){let t;do{t=e.nextCodePoint()}while(null!==t&&wt(t)||xt(t));return t}function Ct(e,t){let n=St(e),s=St(t);if(null===s)return{offset:0,length:0};const r=e.offset+e.position-1;let i=e.offset+e.position;for(;;){if(null===n&&null===s)return{offset:r,length:i-r};if(null===s)return{offset:r,length:i-r};if(null===n)return null;if(0!==mt.compare(n,s))return null;i=e.offset+e.position,n=St(e),s=St(t)}}function kt(e,t){let n,s,r;do{s=e.position,n=e.nextCodePoint()}while(null!==n&&wt(n));if(t?.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){const t=n;s=e.position;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&n!==t);return null===n&&s===r?null:e.slice(s,r)}do{if(r=e.position,t?.segmentCJKUnifieIdeographs&&Et(n))break;n=e.nextCodePoint()}while(null!==n&&!bt(n));return null===n&&s===r?null:e.slice(s,r)}function Nt(e){return kt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function At(e){return kt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Rt(e,t){const n=[];for(let s=At(e);null!==s;s=At(e)){let r=Ct(s,t.slice());null===r?(r=Ct(e.slice(s.offset),t.slice()),null===r||n.push(r)):n.push(r)}return n}function jt(e,t){return e.offset===t.offset&&e.length===t.length}const It=(e,t)=>"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e,...t){const n=_t.from(e),s=[];for(let e=Nt(n);null!==e;e=Nt(n)){const n=[];for(let s=0;s<t.length;++s){const r=t[s],i=Rt(_t.from(r),e);for(const e of i)n.push({text:r,range:e})}if(0===n.length)return null;s.push(...n.filter(((e,t,n)=>e.range.length>0&&n.findIndex((t=>jt(e.range,t.range)))===t)))}return s.length>0?s:null}(e,t):"boolean"!=typeof e||e;(0,n(2273).vt)((e=>({lastFilterState:"",lastFilteredUri:"",setLastState:(t,n)=>{e({lastFilterState:t,lastFilteredUri:n})}})));const Ot=(0,g.createContext)({setFilter:()=>{throw new Error("setFilter must be used within a FilterProvider")},filter:""}),Lt=(0,g.createContext)(void 0),Tt=({children:e})=>{const[t,n]=(0,g.useState)(!1),[s,r]=(0,g.useState)(new Set),i=(0,g.useCallback)(((e,t)=>{r((n=>{if(n.has(e)===t)return n;const s=new Set(n);return t?s.add(e):s.delete(e),s}))}),[]),o=s.size>0,a=(0,g.useMemo)((()=>({sectionMatch:t,setSectionMatch:n,sectionContainsMatch:o,setSectionFilterMatchQueryValue:i})),[o,t,i]);return(0,N.jsx)(Lt.Provider,{value:a,children:e})},Mt="k6GFKyOKVR5Ruofj3aTQ",Ft="afyQ2L5zTtlSDtn9WPjd";function Pt({children:e,filterMatchQuery:t}){const{filter:n}=(0,g.useContext)(Ot),{setSectionMatch:s,sectionContainsMatch:r}=(()=>{const e=(0,g.useContext)(Lt);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e})(),i=It(n,t);(0,g.useEffect)((()=>{s(i)}),[i,s]);const o=!i&&!r;return(0,N.jsx)("div",{className:q()(Mt,{[Ft]:o}),children:e})}function Ut(e){return(0,N.jsx)(Tt,{children:(0,N.jsx)(Pt,{...e})})}var Dt=n(1170),Bt=n.n(Dt);const Ht="M0E2Al6URHV3iyoDbvi_";function Wt({searchWords:e,textToHighlight:t,...n}){return 0===e.length||e.every((e=>!e))?(0,N.jsx)(N.Fragment,{children:t}):(0,N.jsx)(Bt(),{highlightClassName:Ht,searchWords:e,textToHighlight:t,autoEscape:!0,...n})}function Gt({children:e,className:t,semanticColor:n="textBase"}){const{filter:s}=(0,g.useContext)(Ot);return(0,N.jsx)(L.E,{as:"h2",variant:"bodyMediumBold",semanticColor:n,className:t,children:(0,N.jsx)(Wt,{searchWords:[s],textToHighlight:e})})}const zt=2,Vt=3,Kt=4,Qt={"auto-detect":{label:()=>k.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>k.get("desktop.settings.proxy.noproxy")},http:{label:()=>k.get("desktop.settings.proxy.http")},socks4:{label:()=>k.get("desktop.settings.proxy.socks4")},socks5:{label:()=>k.get("desktop.settings.proxy.socks5")}},qt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}];var $t=n(1431);const Jt="mpdBa62OP4Fr5wvCsa89",Xt="acVhMt5pELcXQyLaaPuV",Zt="AavUTirpKSAHapguSAy0",Yt="SkbGMKYv49KtJNB5XxdX",en="qfjicQPaTTPrLWJWRxMQ",tn=({id:e,type:t,placeHolder:n,inputRef:s,handleOnChange:r})=>(0,N.jsx)("input",{type:t||"text",id:e,"data-testid":e,className:Yt,placeholder:n,ref:s,onChange:r}),nn=({children:e,label:t})=>(0,N.jsx)($t.g,{label:t,className:en,children:e}),sn="wjxwX0Alq8DVfoBObi3R";function rn({onClick:e}){return(0,N.jsx)(M.n,{className:sn,onClick:e,children:k.get("settings.restartApp")})}const on=(e,t,n)=>{let s=`${e}:${t}`;switch(n){case zt:s+="@http";break;case Vt:s+="@socks4";break;case Kt:s+="@socks5"}return s},an=({addr:e,mode:t="0",pass:n,user:s,setValue:r,restartContainer:i,fullWidth:o,onChange:a})=>{const l=(0,g.useRef)(null),c=(0,g.useRef)(null),u=(0,g.useRef)(null),d=(0,g.useRef)(null),h=Number(t),[p,m]=(0,g.useState)(""),[f,v]=(0,g.useState)(""),[y,w]=(0,g.useState)(!1);(0,g.useEffect)((()=>{const[t,n]=e?.split(/[:@]+/)||["",""];m(t),v(n),l.current&&(l.current.value=t),c.current&&(c.current.value=n)}),[e]),(0,g.useEffect)((()=>{d.current&&n&&(d.current.value=n.toString())}),[n]),(0,g.useEffect)((()=>{u.current&&s&&(u.current.value=s.toString())}),[s]);const b=(0,g.useCallback)((({target:e})=>{const t=on(e.value,f,h);m(e.value),r("network.proxy.addr",t),w(!0)}),[h,f,r]),x=(0,g.useCallback)((({target:e})=>{const t=on(p,e.value,h);v(e.value),r("network.proxy.addr",t),w(!0)}),[h,p,r]),E=(0,g.useCallback)((({target:e})=>{r("network.proxy.user",e.value),w(!0)}),[r]),_=(0,g.useCallback)((({target:e})=>{r("network.proxy.pass",e.value),w(!0)}),[r]),S=0!==h&&1!==h,C=h!==Vt;return(0,N.jsxs)(Ut,{filterMatchQuery:k.get("desktop.settings.proxy.title"),children:[(0,N.jsx)(Gt,{children:k.get("desktop.settings.proxy.title")}),(0,N.jsxs)("div",{className:q()(Xt,o?Zt:null),children:[(0,N.jsx)(nn,{label:k.get("desktop.settings.proxy.type"),children:(0,N.jsx)(pt,{id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);r("network.proxy.mode",t),w(!0);const n=qt.find((e=>e.enumValue===t));n&&a?.(n.enumKey)},children:qt.map((({enumKey:e,enumValue:t})=>(0,N.jsx)("option",{value:t,"data-testid":e,children:Qt[e]?Qt[e].label():""},e)))})}),S?(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("div",{className:Jt,children:[(0,N.jsx)(nn,{label:k.get("desktop.settings.proxy.host"),children:(0,N.jsx)(tn,{id:"network.proxy.host",handleOnChange:b,placeHolder:k.get("desktop.settings.proxy.host"),inputRef:l})}),(0,N.jsx)(nn,{label:k.get("desktop.settings.proxy.port"),children:(0,N.jsx)(tn,{id:"network.proxy.port",type:"number",handleOnChange:x,placeHolder:k.get("desktop.settings.proxy.port"),inputRef:c})})]}),(0,N.jsxs)("div",{className:C?Jt:void 0,children:[(0,N.jsx)(nn,{label:k.get("desktop.settings.proxy.user"),children:(0,N.jsx)(tn,{id:"network.proxy.user",handleOnChange:E,placeHolder:k.get("desktop.settings.proxy.user"),inputRef:u})}),C?(0,N.jsx)(nn,{label:k.get("desktop.settings.proxy.pass"),children:(0,N.jsx)(tn,{id:"network.proxy.pass",handleOnChange:_,placeHolder:k.get("desktop.settings.proxy.pass"),type:"password",inputRef:d})}):null]})]}):null,y&&(0,N.jsx)("div",{children:(0,N.jsx)(rn,{onClick:i})})]})]})},ln=Oe("DesktopProxySettingsClient");const cn=(0,g.createContext)(null),un=({settings:e,children:t})=>{const[n,s]=(0,g.useState)(e),r=Ie(ln);(0,g.useEffect)((()=>{r.getProxySettings({}).then((e=>{s({mode:e.mode,address:e.addr??"",username:e.user??"",password:e.pass??""})}))}),[s,r]);const i=(0,g.useCallback)((e=>{(async function(e,t){const n={mode:t.mode};[zt,Vt,Kt].includes(t.mode)&&(n.addr=t.address,n.user=t.username),[zt,Kt].includes(t.mode)&&(n.pass=t.password),e.setProxySettings(n)})(r,e).then((()=>s({...e})))}),[s,r]),o=(0,g.useMemo)((()=>({settings:n,updateSettings:i})),[n,i]);return(0,N.jsx)(cn.Provider,{value:o,children:t})};const dn=Oe("DesktopLifecycleClient");function hn(){const e=Ie(dn);return(0,g.useCallback)((()=>e.restart({})),[e])}const gn="BuzoTjBZd1UqCn6DmFJr",pn="HKamyJi9H31s99erfVyG",mn=()=>(0,N.jsxs)("div",{className:pn,children:[(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,N.jsx)("circle",{className:gn,cx:"-140",cy:"50",r:"32"}),(0,N.jsx)("circle",{className:gn,cx:"0",cy:"50",r:"32"}),(0,N.jsx)("circle",{className:gn,cx:"140",cy:"50",r:"32"})]}),(0,N.jsx)("span",{className:"hidden-visually",children:k.get("page.loading")})]});var fn=n(7132);const vn="VxGWf6EHUMBNI_BTLnUX";var yn=n(9268);const wn=(0,g.createContext)(void 0),bn=({value:e,children:t})=>(0,N.jsx)(wn.Provider,{value:e,children:t}),xn=(0,g.createContext)(void 0),En=({instance:e,children:t})=>(0,N.jsx)(xn.Provider,{value:e,children:t}),_n=g.memo((function({spec:e,children:t}){const n=(0,g.useMemo)((()=>e?.getAbsoluteLocation()??null),[e]);return(0,N.jsx)(bn,{value:n,children:t})})),Sn=(e,t)=>{const n=(()=>{const e=(0,g.useContext)(xn);if(void 0===e)throw new Error("useUBILogger() must be used within a UBILoggerContextProvider");return e})(),s=(()=>{const e=(0,g.useContext)(wn);if(void 0===e)throw new Error("useUBIEventLocation() must be used within a UBIEventLocationContextProvider");return e})(),r=(0,yn.lB)((()=>({...t,parentAbsoluteLocation:t.parentAbsoluteLocation??s})),[t,s]);return{spec:(0,g.useMemo)((()=>e(r)),[e,r]),logger:n,UBIFragment:_n}},Cn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const kn=()=>{const{settings:e,updateSettings:t}=function(){const e=(0,g.useContext)(cn);if(!e)throw new Error("useProxySettings must be used within a ProxySettingsContext");return{settings:e.settings,updateSettings:e.updateSettings}}(),n=hn(),{logger:s,spec:r}=Sn(fn.i,{}),i=(0,g.useCallback)(((n,s)=>{if(null!==e&&function(e){return!!Cn.includes(e)}(n)){const r=e;switch(n){case"network.proxy.mode":r.mode=s;break;case"network.proxy.addr":r.address=s;break;case"network.proxy.user":r.username=s;break;case"network.proxy.pass":r.password=s}t(r)}return Promise.resolve()}),[e,t]);return(0,N.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,N.jsx)(L.E,{className:vn,variant:"titleSmall",id:"settings-form-title",children:k.get("desktop.login.PreferencesLink")}),null!==e?(0,N.jsx)(an,{mode:e.mode,addr:e.address,user:e.username,pass:e.password,setValue:i,restartContainer:n,fullWidth:!0,onChange:e=>{const t=r.settingsScreenFactory().proxySettingsSelectFactory().hitSelectEntityInList({entityToBeSelected:e});s.logInteraction(t)}}):(0,N.jsx)(mn,{})]})};var Nn=n(1e3);const An=({toggleSettings:e,isOpen:t=!0})=>(0,N.jsx)(ae,{className:H,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:G,onRequestClose:e,"aria-label":k.get("desktop.login.PreferencesLink"),children:(0,N.jsxs)("div",{className:W,children:[(0,N.jsx)(p.G,{height:"38"}),(0,N.jsx)(un,{settings:null,children:(0,N.jsx)(kn,{})}),(0,N.jsx)(Nn.H,{size:"medium",semanticColor:"textBase",onClick:e,children:k.get("close")})]})});function Rn(e){return!("undefined"==typeof window)&&e instanceof HTMLElement}let jn;const In={subscribersByElement:new WeakMap,get resizeObserver(){return jn||(jn=new ResizeObserver((e=>{Array.isArray(e)&&e.forEach((t=>{const n={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(In.subscribersByElement.get(t.target)??new Set).forEach((s=>{s(n,t,e)}))}))}))),jn}};function On({onResize:e,refOrElement:t,observeOnly:n,observeOnMount:s=!1}){const r=(0,g.useRef)(e);r.current=e;const i=(0,g.useRef)(n);i.current=n;const o=(0,g.useRef)({width:-1,height:-1}),a=(0,g.useCallback)(((e,t,n)=>{if(!r.current)return;const s=o.current.width!==e.width,a=o.current.height!==e.height;("width"===i.current&&s||"height"===i.current&&a||!i.current&&(s||a))&&r.current(e,t,n),o.current.width=e.width,o.current.height=e.height}),[]),l=function({refOrElement:e,subscriber:t}){let n=null;const s=(0,g.useRef)(null),r=(0,g.useRef)(null),i=(0,g.useRef)(null),o=(0,g.useRef)(),a=(0,g.useRef)(t);a.current=t;const l=(0,g.useCallback)((()=>{let t=null;r.current?t=r.current:s.current?t=s.current:Rn(e)&&(t=e),i.current!==t&&(o.current&&(o.current(),o.current=null),i.current=t,t&&a.current&&(o.current=a.current(t)))}),[e]),c=(0,g.useCallback)((e=>{r.current=e,l()}),[l]);e&&!Rn(e)&&(n=e);const u=(0,g.useCallback)((()=>{n?.current!==s.current&&(n&&(s.current=n.current),l())}),[n,n?.current,l]);return(0,g.useLayoutEffect)(u,[u]),(0,g.useEffect)(u,[u]),(0,g.useEffect)((()=>()=>{o?.current?.()}),[]),c}({refOrElement:t,subscriber:e=>(s&&a({width:e.offsetWidth,height:e.offsetHeight},null,[]),In.subscribersByElement.has(e)||(In.resizeObserver.observe(e),In.subscribersByElement.set(e,new Set)),In.subscribersByElement.get(e)?.add(a),()=>{In.subscribersByElement.get(e)?.delete(a),0===In.subscribersByElement.get(e)?.size&&(In.resizeObserver.unobserve(e),In.subscribersByElement.delete(e))})});return l}function Ln(e,t,n){const[s,r]=(0,g.useState)(),i=Object.entries(e).sort(((e,t)=>t[1]-e[1]));return{ref:On({refOrElement:n,observeOnly:t,observeOnMount:!0,onResize:({[t]:e})=>{if(void 0===e)return;const n=i.find((([,t])=>e>=t)),o=n&&n[0];o&&o!==s&&r(o)}}),breakpoint:s}}var Tn=n(9438);class Mn{subscriptionId=null;subscription=null;constructor(e,t){this._watchdogClient=e,this._url=t,this.subscribeToWatchdog()}subscribeToWatchdog(){this.subscription=this._watchdogClient.subscribe({url:this._url},(e=>{0!==e.id?(this.subscriptionId=e.id,this.scheduleNextPing()):this.subscription?.cancel()}))}async pingWatchdog(){this.subscriptionId&&(await this._watchdogClient.ping({id:this.subscriptionId}),this.scheduleNextPing())}scheduleNextPing(){setTimeout((()=>{this.pingWatchdog()}),6e4)}}class Fn{constructor(e,t=0){this._output=e,this._offset=t,this._view=new DataView(this._output.buffer,this._output.byteOffset)}write(e){this._view.setInt32(this._offset,e.byteLength),this._output.set(e,this._offset+4),this._offset+=e.byteLength+4}}function Pn(e){const t=new TextEncoder,n=t.encode(e.service),s=t.encode(e.method),r=e.payload,i=new Uint8Array(4+n.byteLength+4+s.byteLength+4+r.byteLength),o=new Fn(i);return o.write(n),o.write(s),o.write(r),i.buffer}class Un extends Error{constructor(){super("aborted")}}const Dn=Oe("EsperantoTransport");class Bn{constructor(e,t){this._onSend=e,this._onCancel=t}callSingle(e,{signal:t}={}){let n;return new Promise(((s,r)=>{const i=this.call(e,!1,s,r);t?.addEventListener("abort",n=()=>{i.cancel(),r(new Un)})})).finally((()=>t?.removeEventListener("abort",n)))}callStream(e,t){return this.call(e,!0,t,(e=>{throw e}))}call(e,t,n,s){const r=this._onSend({request:Pn(e),persistent:t,onSuccess:t=>{t instanceof ArrayBuffer?n(new Uint8Array(t)):s(new Error(`${e.service}.${e.method} failed with invalid payload!`))},onFailure:(t,n)=>{s(new Error(`${e.service}.${e.method} failed with code: ${n}`))}}),i=this._onCancel;return{cancel(){i(r)}}}}function Hn(){const e=n.g.window||{};return new Bn(e.executeEsperantoCall,e.cancelEsperantoCall)}async function Wn(){return new Promise(((e,t)=>{const n=JSON.stringify({type:"view_loaded",name:"/loginUI",innerWidth:window.innerWidth,innerHeight:window.innerHeight});window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:n}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}});const s=Hn();var r,i;r=s,i="/loginUI",new Mn(new Tn.NH(r),i)}))}const Gn=()=>{const{logger:e,pageviewActionHash:t}=Re();(0,g.useEffect)((()=>{Wn()}),[]),(0,g.useEffect)((()=>{t&&e.logPageView({page:"auth-on-web",actionHash:t})}),[e,t]);const n=(0,g.useRef)(!0),s=(0,g.useRef)(!0),r=(0,g.useRef)(!0),i=(0,g.useRef)(null),[o,a]=(0,g.useState)(!1),[l,c]=(0,g.useState)(0),{breakpoint:u}=Ln({[F.SMALL]:0,[F.MEDIUM]:1024,[F.LARGE]:1600},"width",i);const{breakpoint:d}=function(e,t){return Ln(e,"height",t)}({[F.SMALL]:0,[F.MEDIUM]:800,[F.LARGE]:1200},i),h=(0,g.useCallback)((()=>{a(!o)}),[o]),p=ot.includes(k.getLocaleForTranslation().valueOf())?k.getLocaleForTranslation().valueOf():"en",m=[{backgroundImage:(0,N.jsx)(lt,{fadeInRef:n}),titleStrings:[k.get("desktop-auth.login.millions-of-songs"),k.get("desktop-auth.login.free-on-spotify")],titleVariants:{[F.SMALL]:"titleLarge",[F.MEDIUM]:"headlineMedium",[F.LARGE]:"headlineLarge"}},{backgroundImage:(0,N.jsx)(Xe,{imageLocale:p,fadeInRef:s}),titleStrings:[k.get("desktop-auth.login.collect-and-create")],titleVariants:{[F.SMALL]:"titleMedium",[F.MEDIUM]:"titleLarge",[F.LARGE]:"headlineMedium"}},{backgroundImage:(0,N.jsx)(Ze,{imageLocale:p,fadeInRef:r}),titleStrings:[k.get("desktop-auth.login.perfect-work-environment")],titleVariants:{[F.SMALL]:"titleMedium",[F.MEDIUM]:"titleLarge",[F.LARGE]:"headlineMedium"}}],f=(0,g.useCallback)((t=>{c(t),e.logAction({page:"auth-on-web",action_type:"click",action_intent:"carousel-navigate"})}),[e]);return(0,N.jsx)(O.K,{children:(0,N.jsx)("div",{className:R,ref:i,"data-testid":"new-login",children:(0,N.jsxs)("main",{className:j,children:[(0,N.jsxs)("div",{className:I,children:[(0,N.jsx)(A,{toggleSettings:h}),(0,N.jsx)(Pe,{titleStrings:m[l].titleStrings,titleVariants:m[l].titleVariants,widthBreakpoint:u,heightBreakpoint:d})]}),(0,N.jsx)(Ke,{nrSteps:m.length,atStep:l,navigate:f,backgroundImage:m[l].backgroundImage}),o&&(0,N.jsx)(An,{toggleSettings:h})]})})})};var zn=n(1871);const Vn="XGOGsSMhkGuaC9FwBgno",Kn="PJyEBjiHV3PGibh4MUsH",Qn="EvnKkLz6jBAzH5MlvadZ",qn="rzofwjOflHmzbzATk37j",$n="AJRv4KQdWWr1ncquna5B",Jn="j2RCP4uWJutAFE6YTEBt",Xn="DeWH97FAjFfgaEjzEMPW",Zn="cxFOViofXycO3Ytzb3ty",Yn="BsDh0YtM9RFKQIG5DS1H",es=({toggleSettings:e,isOpen:t=!0})=>(0,N.jsx)(ae,{className:Xn,isOpen:t,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:Yn,onRequestClose:e,"aria-label":k.get("desktop.login.PreferencesLink"),children:(0,N.jsxs)("div",{className:Zn,children:[(0,N.jsx)(p.G,{height:"38"}),(0,N.jsx)(un,{settings:null,children:(0,N.jsx)(kn,{})}),(0,N.jsx)(Nn.H,{size:"medium",semanticColor:"textBase",onClick:e,children:k.get("close")})]})});var ts=n(638);const ns=({handleLoginOrSignupClick:e})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.$,{onClick:()=>{e(!1)},iconTrailing:T.H,"data-testid":"login-button",children:k.get("desktop-auth.login.log-in-with-browser")}),(0,N.jsxs)(L.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:[k.get("desktop-auth.login.new-to-spotify")," ",(0,N.jsxs)(zn.Y,{tabIndex:0,semanticColor:"textBase",onClick:()=>e(!0),className:Qn,children:[k.get("desktop-auth.login.sign-up-with-browser"),(0,N.jsx)(T.H,{size:"small"})]})]})]}),ss=({handleLoginOrSignupClick:e})=>(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(m.$,{onClick:()=>{e(!0)},"data-testid":"login-button",children:k.get("desktop-auth.login.sign-up-with-browser")}),(0,N.jsxs)(L.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:[k.get("already_have_account")," ",(0,N.jsxs)(zn.Y,{tabIndex:0,semanticColor:"textBase",onClick:()=>e(!1),className:Qn,children:[k.get("desktop-auth.login.log-in-with-browser"),(0,N.jsx)(T.H,{size:"small"})]})]})]}),rs=(0,g.memo)((function({onError:e}){const{logger:t,pageviewActionHash:n}=Re(),[s,r]=(0,g.useState)(!1),o=(0,i.NC)(h),{logger:l,spec:c}=Sn(fn.i,{});(0,g.useEffect)((()=>{n&&t.logPageView({page:"auth-on-web",actionHash:n})}),[t,n]);const u=(0,g.useCallback)((()=>{r((e=>!e))}),[]),{handleLoginOrSignupClick:d,handleTryAgainClick:m,isWaitingForBrowser:f,isSigningUp:v,errorMessage:y}=Fe(),w=(0,ts.YQ)((e=>{const t=c.loginSignupScreenFactory(),n=e?t.registerButtonFactory().hitNavigateToExternalUri({destination:""}):t.loginButtonFactory().hitNavigateToExternalUri({destination:""});l.logInteraction(n),d(e)}),2e3,{leading:!0,trailing:!1});return(0,g.useEffect)((()=>{y&&e(y)}),[y,e]),f?(0,N.jsxs)("div",{className:Vn,"data-testid":"login",children:[(0,N.jsx)(p.G,{height:"38"}),(0,N.jsx)(L.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",children:v?k.get("desktop-auth.login.redirect-to-browser-signup"):k.get("desktop-auth.login.redirect-to-browser-login")}),(0,N.jsxs)("div",{children:[(0,N.jsxs)(L.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:[k.get("desktop-auth.login.not-seeing-browser")," "]}),(0,N.jsx)(L.E,{variant:"bodyMediumBold",children:(0,N.jsx)(zn.Y,{tabIndex:0,semanticColor:"textBase",onClick:m,className:Qn,children:k.get("desktop-auth.login.try-again")})})]})]}):(0,N.jsxs)("div",{className:Vn,"data-testid":"login",children:[(0,N.jsx)(p.G,{height:"38"}),(0,N.jsxs)(L.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",children:[k.get("desktop-auth.login.millions-of-songs"),(0,N.jsx)("br",{}),k.get("desktop-auth.login.free-on-spotify")]}),y&&o===a.Control&&(0,N.jsxs)("div",{className:Kn,role:"alert",onClick:e=>{if(e.currentTarget.getAttribute("data-action")){"showSettings"===e.currentTarget.getAttribute("data-action")&&u()}},"aria-live":"assertive",children:[(0,N.jsx)(B.b,{className:qn}),(0,N.jsx)("span",{dangerouslySetInnerHTML:{__html:y}})]}),o===a.SignupCTA?(0,N.jsx)(ss,{handleLoginOrSignupClick:w}):(0,N.jsx)(ns,{handleLoginOrSignupClick:w}),(0,N.jsx)("div",{className:$n,children:(0,N.jsx)(Nn.H,{size:"small",semanticColor:"textSubdued",className:Jn,onClick:()=>{t.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"});const e=c.loginSignupScreenFactory().settingsButtonFactory().hitUiNavigate({destination:""});l.logInteraction(e),u()},"data-ta-id":"login-footer-settings",children:k.get("desktop.login.PreferencesLink")})}),(0,N.jsx)(es,{isOpen:s,toggleSettings:u})]})})),is="OYhgAcJHkxEs_EdseJFM",os="vfpYBTspSGqbKwzy819K",as="cHltmVhyRCTE_RtBZCN_",ls="L31TGrgR0yAGlxogVAjK",cs=function(){return(0,N.jsx)("div",{className:ls})},us="OuCh_nQJ5HsCmSyckOwV",ds="XdopzdkI3AFNr8D8n0NP";var hs=n(3242);const gs="z23yTXuGRftOblXfQ3DA",ps="md2XfHazwyi5M7i1gk4n",ms="TUBo8Jth_ZMuUm3EQkCz",fs="gZGged6okxz8HUgNyIvm",vs="L5rfsNTvHQ_5F9mmhq2G",ys="c2zxZGL8kqwfXHDumVKN";function ws({onClick:e}){const{logger:t,spec:n}=Sn(fn.i,{});(0,g.useEffect)((()=>{t.logImpression(n.loginQrCodeFactory().refreshQrCodeFactory().impression())}),[t,n]);const s=(0,ts.YQ)((()=>{const s=n.loginQrCodeFactory().refreshQrCodeFactory().hitUiReveal();t.logInteraction(s),e()}),4e3,{leading:!0,trailing:!1});return(0,N.jsx)(m.$,{colorSet:"inverted",size:"small",onClick:s,children:k.get("desktop-auth.login.get-code")})}function bs(e){const t=(0,g.useRef)(e);return(0,g.useLayoutEffect)((()=>{t.current=e})),(0,g.useCallback)(((...e)=>t.current(...e)),[])}let xs=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.LOGIN_ERROR=1]="LOGIN_ERROR",e[e.GENERIC_ERROR=2]="GENERIC_ERROR",e[e.EXPIRED=3]="EXPIRED",e[e.AUTHORIZATION_REQUIRED=4]="AUTHORIZATION_REQUIRED",e}({});function Es(e,t){try{!function(e,t){throw new Error(t??`Unexpectedly hit unreachable code! Unhandled discriminated union member: ${JSON.stringify(e)}`)}(e,t)}catch(e){}}const _s=({onError:e})=>{const[t,n]=(0,g.useState)(null),[s,r]=(0,g.useState)(!1),{logger:i,spec:o}=Sn(fn.i,{}),{startLoginWithQRCodeSub:a}=function(e){const t=Ie(Te),n=(0,g.useRef)(null),s=bs(e);return{startLoginWithQRCodeSub:(0,g.useCallback)((()=>{n.current?.cancel();try{n.current=t.loginWithQRCode({},(e=>{if(e.success)s({type:xs.SUCCESS});else{if(e.timeout)return s({type:xs.EXPIRED}),void n.current?.cancel();e.authorizationRequired?.verificationUri&&s({type:xs.AUTHORIZATION_REQUIRED,verificationUrl:e.authorizationRequired.verificationUri}),e.error&&s({type:xs.LOGIN_ERROR,error:e.error})}}))}catch(e){s({type:xs.GENERIC_ERROR,error:e})}return()=>{n.current?.cancel()}}),[t,s])}}((t=>{switch(t.type){case xs.SUCCESS:return void(location.href="spotify:app:xpui");case xs.EXPIRED:return void r(!0);case xs.AUTHORIZATION_REQUIRED:return r(!1),n(t.verificationUrl),void i.logInteraction(o.loginQrCodeFactory().loggedInFactory().autoLogin());case xs.LOGIN_ERROR:return void e(fe(t.error.errorCategory,t.error.errorCode,t.error.errorReference));case xs.GENERIC_ERROR:return void e(k.get("error.generic"));default:Es(t)}}));return(0,g.useEffect)(a,[a]),t?(0,N.jsxs)("div",{className:gs,children:[(0,N.jsxs)("div",{className:q()(ms,{[fs]:s}),children:[(0,N.jsx)(hs.Ay,{level:"H",size:136,value:t,className:vs}),(0,N.jsx)("div",{className:ys,children:(0,N.jsx)(p.G,{condensed:!0,height:"28",semanticColor:"backgroundElevatedBase"})})]}),s&&(0,N.jsx)("div",{className:ps,children:(0,N.jsx)(ws,{onClick:a})})]}):(0,N.jsx)("div",{className:gs})},Ss=(0,g.memo)((({onError:e})=>(0,N.jsxs)("div",{className:us,children:[(0,N.jsx)(_s,{onError:e}),(0,N.jsx)(L.E,{semanticColor:"textBase",variant:"titleSmall",children:k.get("desktop-auth.login.scan-code-to-login")}),(0,N.jsx)(L.E,{className:ds,semanticColor:"textSubdued",variant:"bodyMedium",children:k.get("desktop-auth.login.scan-code-to-login-explanation")})]})));var Cs=n(6664),ks=n(8611),Ns=n(4898);const As=["open.spotifycdn.com","xpui.app.spotify.com"],Rs=()=>(0,Cs.o5)(),js=e=>{(0,ks.Cp)(e)},Is=e=>{(0,Cs.v4)((t=>{t.setTag("FatalError","true"),js(e)}))};var Os=n(5673);const Ls=4,Ts="accounts",Ms="accounts:4";function Fs({onOnline:e,onOffline:t}){const n=bs(e),s=bs(t);!function(e){const[t,n]=(0,g.useState)((()=>globalThis.navigator.onLine)),s=bs(e);(0,g.useEffect)((()=>{const e=()=>{n(!0)},t=()=>{n(!1)};return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),(0,g.useEffect)((()=>{s(t)}),[t,s])}((e=>{e?n():s(fe(Ts,Ls,Ms))}))}const Ps=()=>{const{logger:e}=Re(),t=(0,g.useRef)(null),n=(0,i.NC)(h),[s,r]=(0,g.useState)(null);(0,g.useEffect)((()=>{Wn()}),[]),(0,g.useEffect)((()=>{e.logPageView({page:"login"})}),[e]);const o=(0,g.useCallback)((e=>{js(e),r((0,N.jsx)("span",{dangerouslySetInnerHTML:{__html:e}}))}),[r]);return Fs({onOffline:o,onOnline:()=>{r(null)}}),(0,N.jsxs)("div",{className:"App","data-ta-id":"login-app","data-testid":"login-app",children:[(0,N.jsxs)("div",{className:"fakeWebPlayer",children:[(0,N.jsx)("div",{className:"fakeWebPlayer__sidebar"}),(0,N.jsxs)("div",{className:"fakeWebPlayer__footer",children:[(0,N.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,N.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,N.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,N.jsx)("div",{className:"fakeWebPlayer__content-wrapper",children:(0,N.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,N.jsxs)("div",{className:"App__content",children:[s&&n!==a.Control&&(0,N.jsx)(Os.l,{colorSet:"negative",className:as,role:"alert","area-live":"assertive",onClose:()=>{r(null)},children:s}),(0,N.jsxs)("main",{className:q()(is,{[os]:n!==a.Control}),ref:t,children:[(0,N.jsx)(rs,{onError:o}),n!==a.Control&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(cs,{}),(0,N.jsx)(Ss,{onError:o})]})]})]})]})},Us=Oe("ControlMessageAPI");function Ds(){return Ie(Us)}const Bs=()=>{const e=(0,i.NC)(c);return(()=>{const e=Ds();(0,g.useEffect)((()=>{e.setTitlebarHeight(64)}),[e])})(),(()=>{const e=Ds(),t=(0,i.NC)(u);(0,g.useEffect)((()=>{t&&e.enablePLEEndpoint()}),[e,t])})(),(0,N.jsx)(N.Fragment,{children:e?(0,N.jsx)(Gn,{}):(0,N.jsx)(Ps,{})})};var Hs=n(4751),Ws=n(9054),Gs=n(2403);let zs=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),Vs=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});const Ks={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function Qs(e,t){var n;n=Object.values(Ks),document.documentElement.classList.remove(...n);const s=[];"Microsoft Edge"===ut().parse(window.navigator.userAgent).browser.name?s.push(Ks.BROWSER_EDGE):dt()&&s.push(Ks.BROWSER_SAFARI),t===Vs.macOS?s.push(Ks.OS_MACOS):t===Vs.Windows?s.push(Ks.OS_WINDOWS):t===Vs.Linux?s.push(Ks.OS_LINUX):t===Vs.ChromeOS&&s.push(Ks.OS_CHROMEOS),e===zs.Desktop?s.push(Ks.CONTAINER_DESKTOP):e===zs.PWA?s.push(Ks.CONTAINER_PWA):e===zs.Web&&s.push(Ks.CONTAINER_WEB),function(e){e.forEach((e=>{document.documentElement.classList.add(e)}))}(s)}var qs=n(127);const $s=(e,t)=>{const n=e.event_sender_context_information;return[(0,qs.QI)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,qs.ks)(t),(0,qs.xB)(n.installation_id),(0,qs.es)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},Js=/Spotify\/(?<version>.+)\s/;function Xs(){if(!!window.navigator.userAgent.match(Js))return zs.Desktop;const e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?zs.PWA:zs.Web}var Zs=n(8898);const Ys=/Spotify\/(?<version>.+)\s/;function er(){const e=window.navigator.userAgent.match(Ys);return e?.groups?.version||"unknown"}var tr=n(7239),nr=n(8599);class sr{_subs=new Set;_inFlightCache=new x;constructor(e,t=new b(36e5)){this.productStateApi=e,this.cache=t,this.productStateApi.subValues(nr.kM.fromPartial({}),(async e=>{const t=this.mapKeys(e.pairs),n=this.cache.get("productState");let s;n?(s={...n,...t},this.cache.set("productState",s)):s=await this.getValues();for(const e of this._subs)try{e(s)}catch(e){}}))}mapKeys({country_code:e,type:t,...n}){const s={...n};return void 0!==e&&(s.country=e),void 0!==t&&(s.product=t),s}async getValues(){const e=this.cache.get("productState");if(e)return e;const t=await this._inFlightCache.create("getValues",(()=>this.productStateApi.getValues(nr.kM.fromPartial({})))),n=this.mapKeys(t.pairs);return this.cache.set("productState",n),n}getCachedValues(){return this.cache.get("productState")??null}subValues(e){return this._subs.add(e),()=>{this._subs.delete(e)}}async setValues(e){await this.productStateApi.putValues(nr.n3.fromPartial({pairs:e}))}}var rr=n(5077),ir=n(8929);function or(e,t,n,s){const r=[{node:e,path:[]}],i={terminate:!1,exclude:!1};let o=s;for(;r.length>0;){const{node:e,path:s}=r.pop();if(o=n(o,e,s,i),!0===i.terminate)return o;if(!0===i.exclude){i.exclude=!1;continue}const a=e.getNodes(t).reverse();r.push(...a.map((t=>({node:t,path:[...s,e]}))))}return o}let ar=function(e){return e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e}({});class lr extends Error{}class cr{_parents=new Set;_children=new Map;constructor(e,t,n){this._key=t,this._value=n,null!==e&&this._parents.add(e)}addChild(e,t){let n=this._children.get(e);return void 0!==n?(n._parents.add(this),n):(function(e,t,n){t(e,ar.BACKWARD,((e,t,s)=>{const r=s.map((e=>e.getKey()));if(r.includes(n))throw new lr(`Found dependency cycle! ${[n,...r].reverse().join(" -> ")}`)}),void 0)}(this,or,e),n=new cr(this,e,t),this._children.set(e,n),n)}removeChild(e){this._children.delete(e)}getNodes(e){switch(e){default:case ar.FORWARD:return this.getChildren();case ar.BACKWARD:return this.getParents()}}getParents(){return Array.from(this._parents.values())}getChildren(){return Array.from(this._children.values())}isRoot(){return 0===this._parents.size}getKey(){return this._key}getValue(){return this._value}}class ur extends cr{constructor(e,t){super(null,e,t)}}class dr{addChild(){return this}removeChild(){}getNodes(){return[]}getParents(){return[]}getChildren(){return[]}isRoot(){return!0}getKey(){throw new Error("Method not supported.")}getValue(){throw new Error("Method not supported.")}}let hr=function(e){return e[e.ROOT=0]="ROOT",e[e.DEPENDENCY=1]="DEPENDENCY",e[e.INSTANCE=2]="INSTANCE",e[e.VALUE=3]="VALUE",e}({});class gr extends Error{}class pr{constructor(e,t){this._resolve=e,this._wrap=t}resolve(e){return mr(e,this.resolveImpl(e))}resolveNoThrow(e){return this.resolveImpl(e)}resolveImpl(e){return this._resolve(e)}wrap(e,t){return this.wrapImpl(e,t)}wrapImpl(e,t){return this._wrap(e,t)}}function mr(e,t){if(null===t)throw new gr(`No registration was found for token '${Le(e)}'!`);return t}function fr(e,t){e.getChildren().forEach((e=>{const n=t.addChild(e.getKey(),e.getValue());fr(e,n)}))}function vr(e){const t=new ur(e.getKey(),e.getValue());return fr(e,t),t}class yr{_map=new Map;_tree=function(){return new dr}();constructor(e=[]){this._parents=e}registerValue(e,t){return this.registerImpl(e,{instance:t})}registerFactory(e,t){return this.registerImpl(e,{factory:t,instance:void 0})}registerImpl(e,t){const n=Le(e);return this._tree.addChild(`dependency:${n}`,{type:hr.DEPENDENCY,name:n,token:e}),this._map.set(e,t),this}resolve(e){return mr(e,this.resolveImpl(this._tree,e))}resolveNoThrow(e){return this.resolveImpl(this._tree,e)}resolveImpl(e,t){{const n=Le(t);e=e.addChild(`dependency:${n}`,{type:hr.DEPENDENCY,name:n,token:t})}const n=this._map.get(t);if(void 0===n){for(const e of this._parents){const n=e.resolveNoThrow(t);if(null!==n)return n}return null}if(function(e){return void 0!==e.instance}(n))return n.instance;const s=new pr((t=>this.resolveImpl(e,t)),((t,n)=>this.wrapImpl(e,t,n)));const r=n.factory(s);{const t=function(e){return null===e?"null":"object"==typeof e?e.constructor.name:typeof e}(r);e=e.addChild(`instance:${t}`,{type:hr.INSTANCE,name:t})}return n.instance=r}wrap(e,t){return this.wrapImpl(this._tree,e,t)}wrapImpl(e,t,n){return e=e.addChild(`value:${n}`,{type:hr.VALUE,name:n}),t}getDependencyTree(){return this._map.forEach(((e,t)=>this.resolve(t))),vr(this._tree)}}function wr(e=[]){return new yr(e)}function br(e){return Object.keys(e).reduce(((t,n)=>(t[n.toLowerCase()]=e[n],t)),{})}let xr=function(e){return e.DELETE="DELETE",e.GET="GET",e.HEAD="HEAD",e.POST="POST",e.PUT="PUT",e.SUB="SUB",e.PATCH="PATCH",e}({});class Er{constructor(e,t,n,s){this.uri=t,this.headers=br(n),this.body=this.stringifyBody(s||""),this.method=e}stringify(){return JSON.stringify({headers:this.headers,body:this.body,method:this.method,uri:this.uri})}stringifyBody(e){return"string"!=typeof e?JSON.stringify(e):e}static parse(e){const t=JSON.parse(e);return new Er(t.method,t.uri,t.headers,t.body)}}const _r=Oe("Cosmos");class Sr{constructor(e,t){this.resolver=e,this.requestFactory=t}head(e,t){return this.resolve(xr.HEAD,e,null,t).then((e=>e.headers))}get(e,t,n){return this.resolve(xr.GET,e,t,n).then((e=>e.body))}post(e,t=null,n){return this.resolve(xr.POST,e,t,n).then((e=>e.body))}put(e,t,n){return this.resolve(xr.PUT,e,t,n).then((e=>e.body))}del(e,t,n){return this.resolve(xr.DELETE,e,t,n).then((e=>e.body))}patch(e,t,n){return this.resolve(xr.PATCH,e,t,n).then((e=>e.body))}sub(e,t,n=e=>{},s=null,r={}){const i=this.requestFactory(xr.SUB,e,r,s);return this.resolver.resolve(i,(e=>t(e.body)),n)}postSub(e,t=null,n,s=e=>{}){const r=this.requestFactory(xr.SUB,e,{},t);return this.resolver.resolve(r,(e=>n(e.body)),s)}request(e,t,n=null,s){return this.resolve(e,t,n,s)}resolve(e,t,n=null,s={}){return new Promise(((r,i)=>{const o=this.requestFactory(e,t,s,n);this.resolver.resolve(o,r,i)}))}}var Cr=n(5081),kr=n(2690);class Nr{constructor(e=new kr.bk){this._emitter=e,this._emitter=e||new kr.bk}createEvent(e,t){return this._emitter.createEvent(e,t)}addListener(e,t,n){this._emitter.addListener(e,t,n);return()=>{this.removeListener(e,t,n)}}removeListener(e,t,n){return this._emitter.removeListener(e,t,n),this}onAddListener(e,t){return this._emitter.onAddListener(e,t),this}onRemoveListener(e,t){return this._emitter.onRemoveListener(e,t),this}emit(e,t){return this._emitter.emit(e,t)}emitSync(e,t){return this._emitter.emitSync(e,t)}}class Ar extends Nr{}class Rr extends Ar{_numListeners=0;_subscriptions=[];constructor(e,t){super(),this._cosmos=e,this._endpoints=t,this.onAddListener("message",this.onListenerAdded.bind(this)),this.onRemoveListener("message",this.onListenerRemoved.bind(this))}onListenerAdded(){if(++this._numListeners,0===this._subscriptions.length)for(const e of this._endpoints){const t=this._cosmos.sub(e,(e=>{this.emit("message",e)}),(()=>{}));this._subscriptions.push(t)}}onListenerRemoved(){0==--this._numListeners&&this._subscriptions.length>0&&(this._subscriptions.forEach((e=>e.cancel())),this._subscriptions=[])}}let jr=function(e){return e.FILTER="enable_filter_item",e}({});const Ir={[jr.FILTER]:Cr.AG.MENU_FIELD_FILTER},Or=e=>Ir[e]??Cr.AG.MENU_FIELD_UNSPECIFIED;class Lr{constructor(e,t,n){this._cosmos=e,this._updateUiClient=t,this._partnerApiClient=n}async enableMenuItem(e){await this._updateUiClient.updateMenuState({fields:[{field:Or(e),enable:!0}]})}async disableMenuItem(e){await this._updateUiClient.updateMenuState({fields:[{field:Or(e),enable:!1}]})}async setTitlebarHeight(e){await this._updateUiClient.updateTitlebarHeight({height:e})}async enablePLEEndpoint(){await this._partnerApiClient.enablePartnerApiEndpoint({enable:!0})}async notifyUsableStateReached(e){await this._cosmos.post("sp://messages/v1/container/control",{type:"loaded_initial_state",name:e})}async notifyReadyStateReached(){await this._cosmos.post("sp://messages/v1/container/control",{type:"ready"})}async notifyViewLoaded(e){await this._cosmos.post("sp://messages/v1/container/control",{type:"view_loaded",name:e,innerWidth:window.innerWidth,innerHeight:window.innerHeight})}getEvents(){return e=this._cosmos,new Rr(e,["sp://messages/v1/container/control","sp://desktop/v1/navigation"]);var e}}class Tr{constructor(e,t,n){this.status=e,this.headers=br(t),this.body=this.parseBody(n)}static isSuccessStatus(e){return e>=200&&e<=299}static parse(e){const t=JSON.parse(e),n=this.isSuccessStatus(t.status)&&t.body?t.body:"";return new Tr(t.status,t.headers||{},n)}parseBody(e){return""!==e?JSON.parse(e):{}}}var Mr=n(1771),Fr=n.n(Mr);class Pr{constructor(e,t){this.send=e,this.cancel=t}resolve(e,t,n){const s=this.send({request:e.stringify(),persistent:e.method===xr.SUB,onSuccess:s=>this.onSuccess(e,s,t,n),onFailure:(t,s)=>this.onFailure(e,t,s,n)});return{cancel:()=>{this.cancel(s)}}}onSuccess(e,t,n,s){try{const r=Tr.parse(t);if(Tr.isSuccessStatus(r.status))n(r);else{s(Fr()(r.status,`${e.method} request to ${e.uri} failed with status code ${r.status}`))}}catch(t){const n=t instanceof Error?t.message:"(unknown error object)";s(new Error(`${e.method} request to ${e.uri} failed with exception '${n}'`))}}onFailure(e,t,n,s){s(new Error(`${e.method} request to ${e.uri} request failed with error code ${t} (${n})`))}}function Ur(){const e=function(){const e=n.g.window||{};return new Pr(e.sendCosmosRequest,e.cancelCosmosRequest)}();return new Sr(e,((...e)=>new Er(...e)))}const Dr=({registry:e,children:t})=>{const n=(0,g.useContext)(je);return null!==n&&(e=wr([e,n])),(0,N.jsx)(je.Provider,{value:e,children:t})},Br=Oe("ProductStateAPI"),Hr=Oe("EventSender"),Wr=(Oe("History"),Oe("Transport"));var Gr=n(3213),zr=n(8185),Vr=n(4925),Kr=n(6031),Qr=n(9044),qr=n(352),$r=n(5387),Jr=n(339);const Xr={version:"1.1.64.510",date:new Date(2021,6,20)};function Zr(){if(Xs()!==zs.Desktop)return!0;const e=function(){const e=window.navigator.userAgent.match(Js);return e?.groups?.version??null}();if(!e)return!0;const t=function(e){const t=Xr.version.split(".")[2],[,n,s]=e.split(".");if("1"!==n)return new Date;const r=parseInt(t,10),i=parseInt(s,10);if(isNaN(i))return new Date;const o=i-r,a=new Date(Xr.date.getTime());return a.setDate(a.getDate()+14*o),a}(e);return n=t,((new Date).getTime()-n.getTime())/864e5<30;var n}const Yr=e=>{const t=(e.transaction||"").replace(/^\/intl-[A-Za-z]{2}/i,"/");return e.transaction=t,e};var ei=n(2574);const ti=new Set([ei.NQG.ALBUM,ei.NQG.ARTIST,ei.NQG.AUTHOR,ei.NQG.PLAYLIST,ei.NQG.PLAYLIST_V2,ei.NQG.TRACK,ei.NQG.EPISODE,ei.NQG.SHOW,ei.NQG.LOCAL_TRACK,ei.NQG.PRERELEASE]);let ni=function(e){return e.INTERACTION="INTERACTION",e.IMPRESSION="IMPRESSION",e.NAVIGATION_START="NAVIGATION_START",e.NAVIGATION_END="NAVIGATION_END",e.CLIENT_STARTED="CLIENT_STARTED",e}({});class si extends Nr{}class ri{constructor(e){this.ubiLogger=e,this._events=new si}getEvents(){return this._events}logInteraction(e){const t=this.ubiLogger.logInteraction.bind(this.ubiLogger),n=this.ubiLogger.getPageInstanceId()??void 0;if("ui_navigate"!==e.actionName){this._events.emit(ni.INTERACTION,{event:e});return{interactionId:t(e),pageInstanceId:n}}const s=this.formatUiNavigateEvent(e);this._events.emit(ni.INTERACTION,{event:s});const r=t(s);return this.interaction={id:r,event:s},{interactionId:r,pageInstanceId:n}}logImpression(e){return this._events.emit(ni.IMPRESSION,{event:e}),this.ubiLogger.logImpression(e)}logNavigation(e){this._events.emit(ni.NAVIGATION_START,{event:e}),this.ubiLogger.logNavigationStart(e);const t={pageId:e.pageId,entityUri:e.entityUri};this._events.emit(ni.NAVIGATION_END,{event:t}),this.ubiLogger.logNavigationEnd(t),this.interaction=void 0}logClientStarted(e,t){"navigationReason"in e&&(this._events.emit(ni.CLIENT_STARTED,{event:e,isForeground:t}),this.ubiLogger.logClientStarted({navigationReason:e.navigationReason,navigationalRoot:e.navigationalRoot},{entityUri:e.entityUri,pageId:e.pageId},t))}getInteractionId(e){if(!this.interaction)return;const{event:t,id:n}=this.interaction,s=t.actionParameterNames?.findIndex((e=>"destination"===e));if(void 0===s||-1===s)return;const r=t.actionParameterValues?.[s];if(r&&r===e)return n}formatUiNavigateEvent=e=>{const t=e.actionParameterNames?.findIndex((e=>"destination"===e));return void 0===t||-1===t?e:{...e,actionParameterValues:e.actionParameterValues?.map(((e,n)=>n!==t?e:(e=>{const t=(0,ei.o_h)(e);if(!t)return;if((0,ei.ThT)(t))return ti.has(t.id)?t.toString().replace(":app:",":"):t.toString();if(ti.has(t.type))return t.toString();const n=t.args||t.query&&[t.query]||t.category&&[t.category]||void 0,s=(0,ei.bXC)(t.type,n);return s?.toString()??void 0})(e)??""))}}}var ii=n(772);const oi=Object.values(s);function ai(e){e.registerFactory(_r,(e=>Ur())).registerFactory(Dn,(e=>Hn())).registerFactory(Br,(e=>new sr(new nr.EW(e.resolve(Dn))))).registerFactory(Wr,(e=>function(){const e=(0,Zs.ZA)({providers:{endpoints:(0,Zs.u6)(),token:()=>Promise.reject()}});return e.connect(),e}()))}function li(){if(Zr()){((e,t,n={},s,r)=>{try{(0,Ns.T)({dsn:e,allowUrls:As,sampleRate:.1,tracesSampleRate:0,environment:"production",release:t,...n,integrations:r,ignoreErrors:[/\/[\dA-F]{8}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{4}-[\dA-F]{12}\/main\.js/,/^NotFoundError: Failed to execute '(removeChild|insertBefore)' on 'Node': The node.*child.*this node.$/,/ResizeObserver loop limit exceeded/,"PresentationRequest",/DA97E0680A7030159BC0C0EE3A1D098E947A08E3/,/^This Suspense boundary received an update before it finished hydrating/]});const i=Rs();s&&i.setTag("container",s),""!==document.referrer&&i.setExtra("referrer",document.referrer)}catch(e){}})("https://de32132fc06e4b28965ecf25332c3a25@o22381.ingest.sentry.io/114855","login_2025-01-28_1738065213461_a68d2d4",function(){const{error:e,transaction:t}={error:.001,transaction:0};return{sampleRate:e,tracesSampleRate:t,debug:!1,beforeSendTransaction:Yr}}(),Xs(),function(){const e=[];return e.push((0,Qr.Z)()),e.push((0,qr.jS)({useEffect:g.useEffect,useLocation:$r.zy,useNavigationType:$r.wQ,createRoutesFromChildren:$r.AV,matchRoutes:Jr.ue})),e}());const e=Rs(),t=window.__spotify.event_sender_context_information?.installation_id;e.setUser({id:t||"pre-login",username:"pre-login"}),e.setTag("product","pre-login")}}(0,Gs.Cd)(),async function(){for(const e of[window.__spotify.locale,_.en])try{const t=await fetch(`i18n/${e}.json`).then((e=>e.json()));return void k.initialize({localeForTranslation:e,localeForFormatting:navigator.language,translations:t})}catch(e){0}throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.")}().then((async function(){li(),Qs(Xs(),function(){const e=ut().parse(window.navigator.userAgent).os.name;return"macOS"===e?Vs.macOS:"Windows"===e?Vs.Windows:"Linux"===e?Vs.Linux:"Chrome OS"===e?Vs.ChromeOS:Vs.Other}());const e=wr();ai(e),e.registerFactory(Us,(e=>new Lr(e.resolve(_r),new Cr.f_(e.resolve(Dn)),new zr.ef(e.resolve(Dn))))),e.registerFactory(dn,(e=>new tr.A(e.resolve(Dn)))),e.registerFactory(ln,(e=>new Vr.ni(e.resolve(Dn)))),e.registerFactory(Te,(e=>new Gr.tx(e.resolve(Dn))));const t="65b708073fc0480ea92a077233ca87bd";e.registerFactory(Hr,(e=>((e,t,{clientId:n,ownerProvider:s,storagePrefix:r,useInMemoryStorage:i,useOptimizedESS2NA:o})=>(0,qs.kE)({transport:t,suppressPersist:!1,context:$s(e,n),storage:i?{adapter:new qs.ty,flushStrategy:{kind:qs.aN.IMMEDIATE}}:void 0,storagePrefix:r,ownerProvider:s,useOptimizedESS2NA:o}))(window.__spotify,e.resolve(Wr),{clientId:t,ownerProvider:()=>null,storagePrefix:`${t}-loginui`,useInMemoryStorage:!0,useOptimizedESS2NA:!1})));const n=new ri(ii.vR.getUBILogger({eventSender:e.resolve(Hr),disableAutoBackgroundMonitoring:!1,authenticationProvider:{isAuthenticated:()=>!1}})),s=window.__spotify&&window.__spotify.locale;s&&document.documentElement.setAttribute("lang",s);const o=Ws.HZ.addMiddleware(Hs.F),a=new rr.E({defaultOptions:{queries:{gcTime:0,networkMode:"always"},mutations:{networkMode:"always"}}});(0,r.H)(document.getElementById("main")).render((0,N.jsx)(i.PE,{resolver:o,context:{username:null},options:{clientId:"client-desktop-ui-app-login",properties:oi,timeout:1e4,transport:e.resolve(Wr),eventSender:e.resolve(Hr),version:er(),sp_t_cookie:window.__spotify.event_sender_context_information?.installation_id},children:(0,N.jsx)(Dr,{registry:e,children:(0,N.jsx)(ir.Ht,{client:a,children:(0,N.jsx)(bn,{value:null,children:(0,N.jsx)(En,{instance:n,children:(0,N.jsx)(Ae,{eventSender:e.resolve(Hr),children:(0,N.jsx)(g.Suspense,{fallback:null,children:(0,N.jsx)(Kr.M,{children:(0,N.jsx)(Bs,{})})})})})})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,Gs.Lj)("UI init phase is done for login")})).catch((e=>{throw(e=>{(0,Cs.v4)((t=>{t.setTag("TopLevelError","true"),Is(e)}))})(e),e}))},4758:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={id:e,loaded:!1,exports:{}};return s[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=s,e=[],i.O=(t,n,s,r)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){for(var[n,s,r]=e[u],a=!0,l=0;l<n.length;l++)(!1&r||o>=r)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(a=!1,r<o&&(o=r));if(a){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[n,s,r]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(e,s){if(1&s&&(e=this(e)),8&s)return e;if("object"==typeof e&&e){if(4&s&&e.__esModule)return e;if(16&s&&"function"==typeof e.then)return e}var r=Object.create(null);i.r(r);var o={};t=t||[null,n({}),n([]),n(n)];for(var a=2&s&&e;"object"==typeof a&&!~t.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((t=>o[t]=()=>e[t]));return o.default=()=>e,i.d(r,o),r},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={966:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var s,r,[o,a,l]=n,c=0;if(o.some((t=>0!==e[t]))){for(s in a)i.o(a,s)&&(i.m[s]=a[s]);if(l)var u=l(i)}for(t&&t(n);c<o.length;c++)r=o[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var o=i.O(void 0,[452],(()=>i(2866)));o=i.O(o)})();
//# sourceMappingURL=login.js.map