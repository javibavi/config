"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7875],{29028:(e,t,s)=>{s.d(t,{U:()=>d});var i=s(93492),n=s(79202),a=s(585),r=s(86070);const d=({menu:e,onClick:t,"aria-label":s})=>(0,r.jsx)(a.b,{menu:e,children:(0,r.jsx)(n.e,{size:n.M.xs,label:i.Ru.get("more"),ariaLabel:s,onClick:t})})},89410:(e,t,s)=>{s.d(t,{n:()=>r});var i=s(61e3),n=s(92197),a=s(86070);const r=({icon:e,activeIcon:t,label:s,isActive:r,...d})=>(0,a.jsx)(n.Zp,{label:s,children:(0,a.jsx)(i.H,{"aria-label":`${s}, ${r?"selected":"unselected"}, button`,"aria-pressed":r,semanticColor:r?"textBrightAccent":"textSubdued",iconOnly:r?t:e,"aria-haspopup":"menu",size:"small",...d})})},87875:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Ot});var i=s(30758),n=s(97500),a=s.n(n),r=s(3118),d=s(4869),o=s(13505),c=s(93492),l=s(64411);const u={standardHeader:"OnnbOInFe49hYMQmhwUC",fixedHeader:"XZaBo7y3JfnBbjVV9TZo",verticalVideoHeader:"UP1rH6cQZiAZCdkPnDOg"};var v=s(86070);const m=({item:e,variant:t="bodyMediumBold",semanticColor:s="textBase",experience:i="standard"})=>{const n=u[`${i}Header`],a=e.isPodcastAd?c.Ru.get("ad-formats.npv.header.podcast-context"):c.Ru.get("ad-formats.npv.header.music-context");return(0,v.jsx)("div",{className:n,children:(0,v.jsx)(l.r,{children:(0,v.jsx)(o.E,{variant:t,semanticColor:s,children:a})},a)})};var x=s(62411),p=s(84971);const y="SEeVinRsd8ZYEQY4h1bX",g=({url:e})=>(0,v.jsx)("div",{className:y,"data-testid":"canvas-image-container",children:(0,v.jsx)(p._,{testid:"cover-art-image",loading:"lazy",src:e})});var f=s(79431);const h=({item:e})=>{const{capturePlaybackError:t}=(0,i.useContext)(f.O),s=e.metadata?.["ad.canvas.url"];return(0,i.useEffect)((()=>{s||t()}),[s,t]),s?(0,v.jsx)(g,{url:s}):null};var j=s(88308),_=s(10703),b=s(68031),k=s(57818),I=s(22408);const A="dSMBEH0cx3KxzZGHN3rL";const E=({canvasUri:e,canvasUrl:t,children:s,fileId:n,playerContainerClass:r})=>{const{capturePlaybackError:d}=(0,i.useContext)(f.O),o=(0,i.useRef)(null),c=(0,i.useMemo)((()=>({disallowProtectedTracks:!1,enableWithoutEME:!0,videoPlayerContainer:`.${r}`,audioPlayerContainer:`.${r}`})),[r]),l=(0,b.H)(c,void 0,void 0,void 0,void 0),{isPlaying:u}=(0,I.GK)();return(0,j.Ij)((()=>{const s=function(e,t,s){return(0,_.a2)({fileId:t,url:s,uri:e,mediaType:"video",format:{}.DEBUG_OVERTURE_WITHOUT_EME?"GENERIC_MEDIA":"MANIFEST_ID",options:{},logData:{playbackId:(0,k.E)()}})}(e,n,t);if(s)return l.playTracks([s],{paused:!u,muted:!0,loop:!0}),l.on(_.LW.TRACK_LOADED,(()=>{const e=document.getElementsByClassName(r),t=e[0]?.querySelector("video");t&&o.current&&(o.current.appendChild(t),t.autoplay=!0)})),l.on(_.LW.ERROR,(e=>{d()})),()=>{l.stop(),l.removeAllListeners()}}),[n,e]),(0,v.jsx)("div",{"data-testid":"canvas-ad-player",className:a()(r,A),ref:o,children:s})};const T=({item:e})=>{const{capturePlaybackError:t}=(0,i.useContext)(f.O),s=e.metadata?.["ad.canvas.url"],n=e.metadata?.["ad.canvas.file_id"],a=(r=s,r?.split("/").pop());var r;const d=n||a;return(0,i.useEffect)((()=>{d||t()}),[d,t]),d?(0,v.jsx)(E,{playerContainerClass:"canvasAdPlayerNpv",canvasUri:e.uri,fileId:d,canvasUrl:s}):null};var N=s(48367),C=s(10325),M=s(35656),V=s(5119);const w="pvAyLo3KN8QP7KxQtiub",R="r4EqB8Z5_aywMW_8I84P",q="N6A5jVwfl6XHew58jDUw",Q=e=>{const{item:t,canvasAdType:s}=e;return"video"===s?(0,v.jsx)(T,{item:t}):(0,v.jsx)(h,{item:t})},S=e=>{const t=(0,x.wA)(),{url:s}=(0,N.b)(e.item);return(0,v.jsxs)("div",{className:w,"data-testid":"canvas-ad-container",children:[(0,v.jsx)("div",{className:R}),(0,v.jsx)("div",{className:q,children:s?(0,v.jsx)(V.N,{to:s,onClick:()=>{t((0,M.q5)(C.c.VIDEO_PLAYER,C.V.AD_NPV))},children:(0,v.jsx)(Q,{...e})}):(0,v.jsx)(Q,{...e})})]})};var P=s(29028),O=s(7340),U=s(82371);const F="iDW7b6oChePRpgfDFY3U",D=({item:e})=>(0,v.jsxs)("div",{className:F,children:[(0,v.jsx)(U.T,{item:e}),(0,v.jsx)(O.t,{item:e})]});var Z=s(44466),B=s(22356);const L="JiMklw0itqYJ1aE76Vi8",z=({item:e})=>(0,v.jsxs)("div",{className:L,children:[(0,v.jsx)(B.f,{item:e,surface:"AD_NPV"}),(0,v.jsx)(Z.L,{item:e,surface:"AD_NPV"})]});var W=s(85162),H=s(9159),$=s(83400),Y=s(26906);function G(){const e=(0,Y.vh)();return{linkUbiEvent:function({adId:t,ubiEventId:s,product:i,format:n,requestId:a}){e.send((0,$.A)({ad_id:t,ad_request_id:a,ad_format:n,content_type:i,ubi_event_id:s}))}}}var K=s(55669),X=s(56695),J=s(3585),ee=s(12032),te=s(92732),se=s(24395),ie=s(99802);const ne=({item:e,spec:t,contextTrack:s})=>{const i=(0,x.wA)(),n=(0,ie.s)(),{linkUbiEvent:a}=G(),r=`${W.Q.getAdFormat(s)}_${W.Q.getAdProduct(s)}`;return(0,v.jsx)(X.D,{role:"menuitem",testid:"about-this-ad-context-menu-item",leadingIcon:(0,v.jsx)(J.p,{size:"small"}),"aria-label":c.Ru.get("ad-formats.dsa.aboutThisAd"),onClick:()=>{i((0,te.Oc)()),i((0,ee.b0)(e));const d=t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:r}).triggerDsaFactory().hitUiNavigate({destination:"/context_menu"}),{interactionId:o}=n.logInteraction(d);a({adId:e.adId,requestId:e.requestId,ubiEventId:o,format:W.Q.getAdFormat(s),product:W.Q.getAdProduct(s)})},divider:"before",children:c.Ru.get("ad-formats.dsa.aboutThisAd")})},ae=(0,i.memo)((function(e){return(0,v.jsx)(se.pZ,{value:"about-this-ad",children:(0,v.jsx)(ne,{...e})})})),re=(0,i.memo)((function({item:e,spec:t,contextTrack:s}){const n=(0,ie.s)(),{linkUbiEvent:a}=G(),r=`${W.Q.getAdFormat(s)}_${W.Q.getAdProduct(s)}`;return(0,i.useEffect)((()=>{(()=>{const i=n.logImpression(t.contextMenuFactory({identifier:e.metadata?.lineitem_id,reason:r}).impression());a({adId:e.adId,requestId:e.requestId,format:W.Q.getAdFormat(s),product:W.Q.getAdProduct(s),ubiEventId:i})})()}),[]),(0,v.jsx)(se.pZ,{value:"ad",children:(0,v.jsxs)(K.W,{children:[(0,v.jsx)(se.pZ,{value:"ad-title",children:(0,v.jsx)(X.D,{role:"menuitem",testid:"ad-title-context-menu-item",divider:"after",disabled:!0,children:e.metadata.advertiser})}),(0,v.jsx)(ae,{item:e,spec:t,contextTrack:s})]})})})),de="NYcvpWpgvQYZploOD6rI",oe="OpXrpghZvv_w9ygosJFP",ce=({item:e,spec:t})=>{const s=(0,H.mr)(),i=(0,ie.s)(),{linkUbiEvent:n}=G(),a=`${W.Q.getAdFormat(e)}_${W.Q.getAdProduct(e)}`;return(0,v.jsxs)("div",{className:de,children:[(0,v.jsx)(z,{item:e}),(0,v.jsxs)("div",{className:oe,children:[(0,v.jsx)(D,{item:e}),s?.isDsaEligible&&(0,v.jsx)("div",{"data-testid":"PanelHeader_AdContextMenuButton",children:(0,v.jsx)(P.U,{menu:(0,v.jsx)(re,{item:s,contextTrack:e,spec:t}),onClick:()=>{if(s){const r=t.infoContainerFactory().contextMenuButtonFactory({identifier:s.metadata?.lineitem_id,reason:a}).hitUiNavigate({destination:"/context_menu"}),{interactionId:d}=i.logInteraction(r);n({adId:s.adId,requestId:s.requestId,format:W.Q.getAdFormat(e),product:W.Q.getAdProduct(e),ubiEventId:d})}}})})]})]})};var le=s(45872);const ue=({item:e,context:t,index:s})=>t?(0,v.jsx)(le.h,{context:t,item:e,index:s}):null;var ve=s(90630);const me="tD84X2SD0IicMx3osK8a",xe=({item:e,spec:t,canvasAdType:s})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(S,{item:e,canvasAdType:s}),(0,v.jsx)("div",{className:me,children:(0,v.jsx)(ce,{item:e,spec:t})})]}),pe=({item:e,spec:t,context:s,index:i})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(ue,{item:e,context:s,index:i}),(0,v.jsx)(ce,{item:e,spec:t})]}),ye=e=>{const{item:t}=e,{state:s}=(0,i.useContext)(f.O),n=(0,r.NC)(ve.U5l,{loadingValue:!1}),a=t?.metadata?.["ad.canvas.type"];return n&&("image"===a||"video"===a)&&s!==f.j.Errored?(0,v.jsx)(xe,{...e,canvasAdType:a}):(0,v.jsx)(pe,{...e})};var ge=s(12431),fe=s(70585),he=s(55158),je=s(14259),_e=s(25136);const be="mJucukPuB6OTWgaD4MZk",ke="i3o8ABclZov7rz8zzKYP",Ie=(0,i.lazy)((()=>Promise.resolve().then(s.bind(s,10252)))),Ae=({item:e,backgroundColor:t,className:s})=>{const n=(0,x.wA)(),{url:r,buttonMessage:d,tagline:o}=(0,N.b)(e),l=d||c.Ru.get("ad-formats.learnMore");if(!r)return null;const u=a()(be,s),m=(0,_e.H)(r);return(0,v.jsx)(V.N,{to:m,"data-testid":"ad-companion-card",className:u,onClick:()=>{n((0,M.q5)(C.c.COMPANION_CARD,C.V.AD_NPV))},children:(0,v.jsx)(ge.v,{style:{backgroundColor:t},className:ke,onClickHint:c.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,fe.po)("looser"),id:e.uri,title:(0,v.jsx)(he.d,{variant:"mestoBold","data-testid":"ad-companion-card-tagline",children:o||l}),trailing:(0,v.jsx)(i.Suspense,{fallback:(0,v.jsx)(je.V,{}),children:o?(0,v.jsx)(Ie,{text:l,clickUrl:m,onClick:()=>{n((0,M.q5)(C.c.CTA_BUTTON,C.V.AD_NPV))}}):(0,v.jsx)(je.V,{semanticColor:"textBase"})})})})};var Ee=s(30875),Te=s(41223);const Ne="_9mvd0bTv9vUHyKGzvBNV",Ce="hQjIgVttFxVwEZ52g6Rg",Me=({isPodcastAd:e,noticeType:t,primaryText:s})=>{(0,i.useEffect)((()=>{const e=document.getElementById("connected-box");if(e){const t=e.offsetWidth;e.style.height=`${t}px`}}),[]);const n=e?c.Ru.get("ad-formats.survey-podcast-content"):c.Ru.get("ad-formats.survey-music-content");return(0,v.jsx)("div",{className:Ce,id:"connected-box",children:(0,v.jsxs)(v.Fragment,{children:["success"===t?(0,v.jsx)(Ee.T,{size:"xxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-check"}):(0,v.jsx)(Te.b,{size:"xxlarge",spacing:"small",semanticColor:"textBase","data-testid":"survey-notice-exclamation"}),(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:Ne,semanticColor:"textBase",children:s}),(0,v.jsx)(o.E,{children:n})]})})},Ve=({isPodcastAd:e,logger:t})=>((0,i.useEffect)((()=>{t.logSurveyAdEventWithoutAd({event:"event_survey_on_connect",eventReason:"secondary_device"})}),[]),(0,v.jsx)(Me,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("ad-formats.survey-connected-note")})),we=({isPodcastAd:e,validationResult:t,logger:s})=>((0,i.useEffect)((()=>{s.logAdEvent({event:"errored",reason:"survey_malformed"}),s.logAdError({errorType:"survey_malformed",errorMessage:t.errorMessage})}),[]),(0,v.jsx)(Me,{isPodcastAd:e,noticeType:"alert",primaryText:c.Ru.get("error-dialog.generic.header")}));var Re=s(50154),qe=s(77298),Qe=s(86882),Se=s(43448),Pe=s(60646);const Oe=()=>{const{logger:e}=(0,H.yU)();return e},Ue="zr0dLusU4AgiRoEVZVx_",Fe="FQKI6EvRALxogOFyociA",De=({data:e,selected:t,handleOptionClick:s,className:i,ad:n})=>{const r=Oe(),d=(i,a)=>{const d={id:i.id,"aria-label":`Select ${i.primaryText}`};return e.surveyQuestionType===qe.xV.MULTI_SELECT?(0,v.jsx)(Qe.c,{...d,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:a}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:a,ad:n})}}):(0,v.jsx)(Se.M,{...d,checked:t.has(i.id),onChange:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:a}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:"event_option_selected",position:a,ad:n})}})};return(0,v.jsx)(Pe.g,{labelFor:e.id,withFieldset:!0,className:a()(Ue,i),children:(0,v.jsx)("div",{children:e.surveyQuestionOptions.map(((i,a)=>(0,v.jsx)(ge.v,{"data-testid":"survey-option-ad",className:Fe,id:i.id,variant:"elevated",title:i.primaryText,leading:d(i,a),isSelected:t.has(i.id),onClick:()=>{s({optionId:i.id,isExclusive:i.isExclusive,questionType:e.surveyQuestionType,position:a}),r.logSurveyAdEventWithAd({optionId:i.id,questionId:e.id,event:t.has(i.id)?"event_option_deselected":"event_option_selected",position:a,ad:n})}},i.id)))})})};var Ze=s(555);const Be="o1cH6TNkpq2sTkq1EAZU",Le="urYkLZy00wWdQH24F1Ja",ze="GneD3mdmK5FDZVz6bzhB",We="MTSvglGhr7gd3paX4exJ",He=({selected:e,submitted:t,handleClick:s})=>(0,v.jsx)("div",{className:a()(Be,Le,{[ze]:t}),children:(0,v.jsx)(Ze.$,{disabled:0===e.size,size:"medium",fullWidth:!0,colorSet:"invertedLight",label:"Submit","data-testid":"survey-submit-button",onClick:s,id:We,children:c.Ru.get("ad-formats.survey-submit-button")})}),$e="HgfSrPwFpIvBDXNMx0NO",Ye="FjDNaretUQGhB3YYHUaZ",Ge="MDmTCQhrCnUXjUhyWx_A",Ke=({showThankYou:e,ad:t,questionId:s})=>{const n=Oe();return(0,i.useEffect)((()=>{e&&n.logSurveyAdEventWithAd({questionId:s,event:"event_thank_you_displayed",ad:t})}),[s,e]),(0,v.jsxs)("div",{className:a()(Ye,{[Ge]:e}),"data-testid":"survey-ad-thank-you",children:[(0,v.jsx)(Ee.T,{size:"xxlarge",spacing:"small"}),(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:$e,"data-testid":"survey-ad-thank-you",children:c.Ru.get("ad-formats.survey-thankyou")})]})};function Xe(){const[e,t]=(0,i.useState)(new Map),[s,n]=(0,i.useState)(!1);return{selected:e,handleOptionClick:({optionId:s,isExclusive:i,questionType:n,position:a})=>{let r=new Map(e);n===qe.xV.MULTI_SELECT?r=function({optionId:e,selected:t,isExclusive:s,position:i}){let n;t.has(e)?(n=new Map(t),n.delete(e)):n=function({optionId:e,selected:t,isExclusive:s,position:i}){const n=new Map(t);s&&n.clear();return t.forEach((({isExclusive:e},t)=>{e&&n.delete(t)})),n.set(e,{isExclusive:s,position:i}),n}({optionId:e,isExclusive:s,selected:t,position:i});return n}({optionId:s,isExclusive:i,selected:e,position:a}):n===qe.xV.SINGLE_SELECT&&(r=function({optionId:e,selected:t,position:s}){let i=new Map(t);t.has(e)||(i=function({optionId:e,selected:t,position:s}){const i=new Map(t);return i.clear(),i.set(e,{isExclusive:!0,position:s}),i}({optionId:e,selected:t,position:s}));return i}({optionId:s,selected:e,position:a})),t(r)},setSurveyIsSubmitted:n,submitted:s}}class Je{constructor(e){this.isValid=e.isValid,this.errorMessage=e.errorMessage}}var et=s(18968),tt=s(63755);const st=({ad:e,eventSender:t,logger:s,questionId:i,selected:n})=>{const a=[];n.forEach(((e,t)=>{const s=(({id:e,selectedOption:t})=>tt.$y.create({selectedSurveyQuestionOptionId:e,optionPositionIndex:t.position.toString()}))({id:t,selectedOption:e});a.push(s)}));const r=tt.Tl.create({surveyQuestionId:i,selectedSurveyOptions:a}),d=tt.BN.create({surveyQuestionAnswers:[r]}),o=tt.A7.create({survey:d});s.logAdEvent({event:"survey_submitted",payload:o}),s.logAdEvent({event:"ended"}),t.send((0,et.i)({ad_id:e.adId,event:"event_survey_submitted",format:(0,qe.gh)(e.format).toLowerCase(),in_focus:!0,lineitem_id:e.metadata?.lineitem_id,product_name:"brand_survey",question_id:i,request_id:e.requestId,response:JSON.stringify(o),slot:e.slot}))};const it=function(e,t=2e3){const s=(0,H.dY)();(0,i.useEffect)((()=>{if(!e)return;const i=setTimeout((()=>s.skipToNext()),t);return()=>clearTimeout(i)}),[t,e,s])},nt="QcjxDZqAGwQOqerAjHdc",at="GZDC018jhUZA8opoHkpM",rt="xNk9rFVlHRml2zumyfQI",dt="rA7_f0w9lodVUT7ad3RC",ot="FfcoZWtdfcG0Ihbesrub",ct="q1uiO23dnmvrVxxEOq9l",lt="KRI6OoYy611XXayRUTyE",ut=({question:e,ad:t})=>{const s=Oe(),n=(0,Y.vh)(),r=(0,H.dY)();(0,i.useEffect)((()=>{s.logSurveyAdEventWithAd({questionId:e.id,event:"event_companion_viewed",ad:t})}),[e.id]);const{selected:d,handleOptionClick:c,submitted:l,setSurveyIsSubmitted:u}=Xe();(0,i.useEffect)((()=>{e.surveyQuestionType in qe.xV||(s.logAdEvent({event:"errored",reason:"survey_malformed"}),r.skipToNext())})),it(l,2e3);return(0,v.jsxs)(Re.a,{className:a()(nt,dt),padding:"looser",children:[(0,v.jsxs)("div",{className:a()(at,{[ct]:l}),children:[(0,v.jsxs)("div",{className:lt,children:[(0,v.jsx)(o.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",children:e.primaryText}),(0,v.jsx)(o.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:e.secondaryText})]}),(0,v.jsx)(De,{className:a()(rt,ot),ad:t,selected:d,handleOptionClick:c,data:e})]}),(0,v.jsx)(He,{handleClick:()=>{u(!0),st({eventSender:n,ad:t,selected:d,logger:s,questionId:e.id})},submitted:l,selected:d}),(0,v.jsx)(Ke,{showThankYou:l,ad:t,questionId:e.id})]})},vt=({survey:e,ad:t})=>e?(0,v.jsx)(ut,{question:e?.surveyQuestions[0],ad:t}):null,mt=e=>{return t=e,t.survey?.surveyQuestions?.length?(e=>!e.survey?.surveyTransparencyContent||0===Object.keys(e.survey.surveyTransparencyContent).length)(e)?new Je({isValid:!1,errorMessage:"survey.survey_transparency_content : missing"}):new Je({isValid:!0}):new Je({isValid:!1,errorMessage:"survey.survey_questions : missing"});var t},xt=e=>{const t=e?.[0];if(s=t,!s?.id||s.id.length<1)return new Je({isValid:!1,errorMessage:"survey.survey_questions[0].id : missing"});var s;if((e=>(0,qe.BM)(e?.surveyQuestionType)<=0)(t))return new Je({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_type : invalid type"});if((e=>!e?.primaryText||e?.primaryText?.length<1)(t))return new Je({isValid:!1,errorMessage:"survey.survey_questions[0].primary_text : missing"});if((e=>!e?.surveyQuestionOptions?.length)(t))return new Je({isValid:!1,errorMessage:"survey.survey_questions[0].survey_question_options : missing"});const i=t?.surveyQuestionOptions.find((e=>(e=>!e.id||e?.id?.length<1)(e)));if(i)return new Je({isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(i)}].id : missing`});const n=t?.surveyQuestionOptions.find((e=>(e=>!e.primaryText||e.primaryText.length<1)(e)));return new Je(n?{isValid:!1,errorMessage:`survey.survey_questions[0].survey_question_options[${t?.surveyQuestionOptions.indexOf(n)}].primary_text : missing`}:{isValid:!0})},pt=e=>{if(!e)return new Je({isValid:!1,errorMessage:"no ad"});const t=(e=>e?.companions.find((e=>e.survey)))(e);if(!t)return new Je({isValid:!1,errorMessage:"companions.survey : missing"});const s=mt(t);if(s&&!s.isValid)return s;const i=t?.survey?.surveyQuestions,n=xt(i);if(n&&!n.isValid)return n;const a=t?.survey?.surveyTransparencyContent,r=(d=a)&&(e=>!e?.transparencyLabel||e?.transparencyLabel.length<1)(d)?new Je({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_label : missing"}):d&&(e=>!e?.transparencyUrl||e?.transparencyUrl.length<1)(d)?new Je({isValid:!1,errorMessage:"survey.survey_transparency_content.transparency_url : missing"}):new Je({isValid:!0});var d;return r||new Je({isValid:!0})},yt=(0,i.memo)((function({displayText:e,url:t,ad:s,questionId:n}){const a=Oe();return(0,i.useEffect)((()=>{a.logSurveyAdEventWithAd({questionId:n,event:"event_context_menu",ad:s})}),[n]),(0,v.jsx)(K.W,{children:(0,v.jsx)(X.D,{role:"menuitem",leadingIcon:(0,v.jsx)(J.p,{size:"small"}),"aria-label":`${e}, link`,to:t,children:e})})}));var gt=s(65282);const ft="iFWtvDR8p3PNwLx46nWu",ht="wj4kWjE4PuHVGqEf0ohK",jt=({item:e})=>{const t=(0,H.mr)(),s=pt(t),n=Oe(),a=(0,i.useMemo)((()=>t?.companions.find((e=>e.survey))?.survey),[t]),r=a?.surveyTransparencyContent,{currentDevice:d}=(0,gt.l)(),{isLocal:o}=d;return(0,v.jsxs)("div",{"data-testid":"survey-ad",className:ht,children:[o?t&&s.isValid?(0,v.jsx)(vt,{survey:a,ad:t}):(0,v.jsx)(we,{isPodcastAd:e?.isPodcastAd,validationResult:s,logger:n}):(0,v.jsx)(Ve,{isPodcastAd:e?.isPodcastAd,logger:n}),(0,v.jsxs)("div",{className:ft,children:[(0,v.jsx)(z,{item:e}),r&&t&&(0,v.jsx)(P.U,{"aria-label":"More options, button",menu:(0,v.jsx)(yt,{questionId:a?.surveyQuestions[0]?.id,ad:t,displayText:r.transparencyLabel,url:r.transparencyUrl})})]})]})},_t=e=>{const t=(0,x.d4)((e=>e.ads?.vto));return"audio"===e?.mediaType||!t?.isMinimized};var bt=s(21240);const kt="M7UVXKPsARIM71fmtSUG",It="HKhLNVB5OsH5osqax9lk",At="i_7T75rV7Rj7AyykwrCf",Et="na5oNvZD9KtuYIUiIUZg",Tt="_7QFCuyjgT6BwUe1JJVL",Nt="g1fyNwi0G98CTbv9v4We",Ct=({item:e,context:t,index:s,spec:i})=>{const n=_t(e),r="portrait"===e.videoOrientation,d=r&&!n?kt:"",o=a()(Tt,{[Nt]:r}),c=a()({[Et]:r});return(0,v.jsxs)("div",{className:o,children:[n?(0,v.jsx)(ue,{item:e,context:t,index:s}):(0,v.jsxs)("div",{className:At,children:[r&&(0,v.jsx)("div",{className:It}),(0,v.jsx)("div",{className:c,children:(0,v.jsx)(bt.F,{})})]}),(0,v.jsx)("div",{className:d,children:(0,v.jsx)(ce,{item:e,spec:i})})]})};var Mt=s(668),Vt=s(63317);var wt=s(82362);const Rt="nONhpa6k5EMxHTR1RXhM",qt="SDP4__0ksgTwERvZfjE8",Qt="cp7_8T7Q27pZ5zYXUFOW",St="IVGg8Hz4Py4BaPEyJz0T",Pt="tUurYuAJ2ZftcyLRFJ9z",Ot=({item:e,context:t,index:s})=>{const n=_t(e),{state:o}=(0,i.useContext)(f.O),c=(0,r.NC)(ve.U5l),{spec:l,UBIFragment:u}=(0,wt.r)(d.m,{}),x=(e=>{const{logoImage:t}=(0,N.b)(e),s=e?.images[0]?.url;return W.Q.isVideoAd(e)?t||s:s||t})(e),p=((e=null,t=0,s=Mt.CpN)=>{const[n,a]=(0,i.useState)(s),r=(0,Vt.z)(e,s,"colorDark");return(0,i.useEffect)((()=>{setTimeout((()=>{a(r)}),t)}),[t,r]),n})(x,600),y=(0,i.useMemo)((()=>W.Q.isVerticalVideoAd(e)&&!n),[e,n]),g=(0,i.useMemo)((()=>y?"verticalVideo":c&&W.Q.isCanvasAd(e)&&o!==f.j.Errored?"fixed":"standard"),[o,c,e,y]),h=(e=>{const t=(0,H.mr)(),s=t?.requestId,n=Oe(),a=(0,r.NC)(ve.o4S,{loadingValue:!1});return(0,i.useEffect)((()=>{s&&W.Q.isSurveyAd(e)&&!a&&n.logAdError({errorType:"survey_ad_feature_disabled",errorMessage:"survey feature flag is disabled"})}),[]),W.Q.isSurveyAd(e)&&a?"survey":W.Q.isVideoAd(e)?"video":"audio"})(e),j="survey"===h;return(0,v.jsx)("div",{className:a()(Rt,{[qt]:j}),children:(0,v.jsx)(u,{spec:l,children:(0,v.jsxs)("div",{className:Qt,children:[(0,v.jsxs)("div",{className:a()(St,{[qt]:j}),children:[(0,v.jsx)(m,{item:e,experience:g}),(()=>{switch(h){case"video":return(0,v.jsx)(Ct,{item:e,spec:l,index:s,context:t});case"survey":return(0,v.jsx)(jt,{item:e});default:return(0,v.jsx)(ye,{item:e,context:t,index:s,spec:l})}})()]}),j?null:(0,v.jsx)(Ae,{item:e,className:Pt,backgroundColor:p})]})})})}},7340:(e,t,s)=>{s.d(t,{t:()=>f});var i=s(62411),n=s(40565),a=s(74455),r=s(93492),d=s(89410),o=s(45649),c=s(13087),l=s(60410),u=s(585),v=s(30758),m=s(55669),x=s(56695),p=s(24395),y=s(86070);const g=(0,v.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["not_relevant",r.Ru.get("ad-formats.ad-feedback.dislike.not-relevant")],["too_often",r.Ru.get("ad-formats.ad-feedback.dislike.too-often")],["unpleasant",r.Ru.get("ad-formats.ad-feedback.dislike.unpleasant-content")],["offensive",r.Ru.get("ad-formats.ad-feedback.dislike.offensive-content")],["do_not_like",r.Ru.get("ad-formats.ad-feedback.dislike.do-not-like")]]);return(0,y.jsx)(p.pZ,{value:"dislike-ad",children:(0,y.jsx)(m.W,{children:Array.from(t).map((([t,s])=>(0,y.jsx)(p.pZ,{value:s,children:(0,y.jsx)(x.D,{role:"menuitem","aria-label":s,onClick:()=>e(t,s),children:s})},t)))})})})),f=({item:e,isDisabled:t})=>{const s=(0,i.wA)(),{logAdFeedback:v}=(0,o.L)(e),m=(0,i.d4)((t=>(0,l.N)(t,e.id)));return(0,y.jsx)(u.b,{menu:(0,y.jsx)(g,{onFeedbackReasonSelect:(t,i)=>{e.id&&(s((0,c.NI)({adId:e.id,reason:i})),v(`dislike_${t}`))}}),children:(0,y.jsx)(d.n,{item:e,icon:n.P,activeIcon:a.X,label:r.Ru.get("ad-formats.ad-feedback.dislike"),isActive:m,"data-testid":"button-dislike-ad",onClick:()=>{if(e.id){if(m)return s((0,c.vA)({adId:e.id})),void v("cancel_dislike");s((0,c.NI)({adId:e.id})),v("dislike_menu")}},disabled:t})})}},82371:(e,t,s)=>{s.d(t,{T:()=>f});var i=s(62411),n=s(44158),a=s(48776),r=s(93492),d=s(89410),o=s(45649),c=s(13087),l=s(60410),u=s(585),v=s(30758),m=s(55669),x=s(56695),p=s(24395),y=s(86070);const g=(0,v.memo)((function({onFeedbackReasonSelect:e}){const t=new Map([["relevant",r.Ru.get("ad-formats.ad-feedback.like.relevant")],["interested_in_brand",r.Ru.get("ad-formats.ad-feedback.like.interested-in-brand")],["interested_in_product",r.Ru.get("ad-formats.ad-feedback.like.interested-in-product")],["enjoyable",r.Ru.get("ad-formats.ad-feedback.like.enjoyable-content")],["discovered_new",r.Ru.get("ad-formats.ad-feedback.like.discovered-new")]]);return(0,y.jsx)(p.pZ,{value:"like-ad",children:(0,y.jsx)(m.W,{children:Array.from(t).map((([t,s])=>(0,y.jsx)(p.pZ,{value:s,children:(0,y.jsx)(x.D,{role:"menuitem","aria-label":s,onClick:()=>e(t,s),children:s})},t)))})})})),f=({item:e,isDisabled:t})=>{const s=(0,i.wA)(),{logAdFeedback:v}=(0,o.L)(e),m=(0,i.d4)((t=>(0,l.T)(t,e.id)));return(0,y.jsx)(u.b,{menu:(0,y.jsx)(g,{onFeedbackReasonSelect:(t,i)=>{e.id&&(s((0,c.F$)({adId:e.id,reason:i})),v(`like_${t}`))}}),children:(0,y.jsx)(d.n,{item:e,icon:n.G,activeIcon:a.q,label:r.Ru.get("ad-formats.ad-feedback.like"),isActive:m,"data-testid":"button-like-ad",onClick:()=>{if(e.id){if(m)return s((0,c.D$)({adId:e.id})),void v("cancel_like");s((0,c.F$)({adId:e.id})),v("like_menu")}},disabled:t})})}},45649:(e,t,s)=>{s.d(t,{L:()=>r});var i=s(54683),n=s(9159),a=s(26906);const r=e=>{const t=(0,n.dY)(),s=(0,a.vh)(),r=t.getInStreamAd();return{logAdFeedback:function(t){s.send((0,i.F)({ad_id:e.id,advertiser:e.advertiser,creative_id:r?.adId===e.id?r?.metadata?.creative_id:void 0,format:e.mediaType,line_item_id:r?.adId===e.id?r?.metadata?.lineitem_id:void 0,event:t}))}}}},60410:(e,t,s)=>{s.d(t,{N:()=>r,T:()=>a});var i=s(42551);const n=e=>e.ads.adFeedback,a=(0,i.Mz)([e=>n(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.liked)),r=(0,i.Mz)([e=>n(e),(e,t)=>t],((e,t)=>!(!t||e.adId!==t)&&e.disliked))}}]);
//# sourceMappingURL=7875.js.map