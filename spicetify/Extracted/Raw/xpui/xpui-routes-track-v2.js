"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6863],{80918:(e,s,a)=>{a.d(s,{X:()=>j});var t=a(30758),r=a(62411),i=a(49263),l=a(93492),n=a(12032),o=a(56695),c=a(71338),u=a(56116),d=a(48975),m=a(24395),p=a(21053),h=a(49593),x=a(68055),g=a(80687),y=a(86070);const b=({currentUserUri:e,uri:s,name:a,divider:m,onBlock:b})=>{const j=(0,u.W)(),v=!(0,d.n)(),{isBlocked:k,blockUser:f,unblockUser:C}=function(e,s,a,i){const[o,u]=(0,t.useState)(!1),d=(0,r.wA)(),m=(0,p.a)(),y=(0,g.A)(),{enqueueSnackbar:b}=(0,c.d)();return(0,t.useEffect)((()=>{e&&(0,x.zP)(y,{currentUserUri:e,uri:s}).then((e=>{if(m()){if(200!==e.status)throw new Error("Invalid response from socialgraph");u(e.body?.[0]?.is_dismissed||!1)}}))}),[e,s,m,y]),{isBlocked:o,blockUser:()=>{e&&d((0,n.zj)(s,a,i))},unblockUser:async()=>{e&&(await(0,x.kV)(h.n.getInstance(),{currentUserUri:e,uri:s}),b(l.Ru.get("feedback.unblock-user")))}}}(e,s,a,b),R=(0,t.useCallback)((async()=>{j({targetUri:s,intent:k?"unblock":"block",type:"click"}),k?await C():await f()}),[j,s,f,C,k]);if(!e||e===s)return null;const L=k?l.Ru.get("contextmenu.unblock"):l.Ru.get("contextmenu.block");return(0,y.jsx)(o.D,{role:"menuitem",divider:m,disabled:v,onClick:R,leadingIcon:(0,y.jsx)(i.r,{semanticColor:"textSubdued",size:"small"}),children:L})},j=t.memo((function(e){return(0,y.jsx)(m.pZ,{value:"block-user",children:(0,y.jsx)(b,{...e})})}))},34855:(e,s,a)=>{a.d(s,{B:()=>M});var t=a(30758),r=a(62411),i=a(93492),l=a(55669),n=a(80918),o=a(42026),c=a(33650),u=a(56695),d=a(24395),m=a(86070);const p=t.memo((function({onClick:e,divider:s,canEdit:a}){return e&&a?(0,m.jsx)(d.pZ,{value:"edit-profile",children:(0,m.jsx)(u.D,{role:"menuitem",divider:s,onClick:e,leadingIcon:(0,m.jsx)(c.G,{semanticColor:"textSubdued",size:"small"}),children:i.Ru.get("contextmenu.edit-profile")})}):null}));var h=a(27508),x=a(96869),g=a(8950),y=a(56116),b=a(48975),j=a(306),v=a(98962),k=a(82362);const f=()=>{},C=({uri:e,divider:s,onRemoveCallback:a=f})=>{const{spec:l,logger:n}=(0,k.r)(g.F,{data:{uri:e}}),o=(0,y.W)(),c=!(0,b.n)(),d=(0,r.d4)(v.Ht).user,[p,C]=(0,j.Y)(e),R=(0,t.useCallback)((()=>{const s=l.followButtonFactory();o({targetUri:e,intent:p?"unfollow":"follow",type:"click"}),p?(C(!1),n.logInteraction(s.hitUnfollow({itemToBeUnfollowed:e})),a(e)):(C(!0),n.logInteraction(s.hitFollow({itemToBeFollowed:e})))}),[p,n,o,a,C,l,e]);if(d&&d.uri===e)return null;const L=p?i.Ru.get("contextmenu.unfollow"):i.Ru.get("contextmenu.follow");return(0,m.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:s,disabled:c,onClick:R,leadingIcon:p?(0,m.jsx)(h.M,{semanticColor:"textBrightAccent",size:"small"}):(0,m.jsx)(x.h,{semanticColor:"textSubdued",size:"small"}),children:L})},R=t.memo((function(e){return(0,m.jsx)(d.pZ,{value:"follow-user",children:(0,m.jsx)(C,{...e})})}));var L=a(97395),I=a(5879),w=a(12032),A=a(90843),P=a(94822),N=a(75788),T=a(33887);function U({userUri:e}){const{currentSession:s}=(0,P.D)(),a=(0,N.d)(),l=(0,r.wA)(),n=(0,t.useCallback)((()=>{const a=(0,T.Bj)(s?.sessionMembers??[],e);a&&l((0,w.A9)(A.EL.REMOVE_PARTICIPANT,void 0,a))}),[s?.sessionMembers,l,e]),o=(0,T.kt)(a,e);return s?.active&&e&&o?(0,m.jsx)(u.D,{role:"menuitem",onClick:n,leadingIcon:(0,m.jsx)(I.f,{semanticColor:"textSubdued",size:"small"}),children:i.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,m.jsx)(m.Fragment,{})}var E=a(68055),S=a(43080),B=a(69611);const M=t.memo((function({uri:e,onEditProfileCallback:s}){const{user:a}=(0,r.d4)(v.Ht),{spec:t}=(0,B.o)(e),{data:c,loading:u}=(0,S.Z)(E.E$,[{uri:e}]);return u?null:c?(0,m.jsx)(d.pZ,{value:"user",children:(0,m.jsxs)(l.W,{children:[(0,m.jsx)(R,{uri:e}),(0,m.jsx)(U,{userUri:e}),(0,m.jsx)(n.X,{uri:c.uri,name:c.name,currentUserUri:a?.uri}),(0,m.jsx)(p,{onClick:s,canEdit:!(e!==a?.uri||c.edit_image_disabled&&c.edit_name_disabled)}),(0,m.jsx)(L.P,{spec:t,uri:e,canReportUser:!c.report_abuse_disabled,currentUserUri:a?.uri}),(0,m.jsx)(o.m,{spec:t,uri:e,displayText:i.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},15810:(e,s,a)=>{a.d(s,{j:()=>A});var t=a(30758),r=a(97500),i=a.n(r),l=a(13505),n=a(24587),o=a(72574),c=a(93492),u=a(19837),d=a(12367),m=a(96691),p=a(34855),h=a(5119);var x=a(89232),g=a(20951),y=a(33059),b=a(88520),j=a(86070);function v(e){return e.displayName||e.name||""}const k=e=>{let s=null;return(0,o.ecE)(e)&&(s=(0,j.jsx)(m.t,{uri:e})),(0,o.APS)(e)&&(s=(0,j.jsx)(p.B,{uri:e})),s},f=({creator:e,onClick:s,position:a=0})=>{const r=(0,t.useCallback)((t=>{s?.(t,{position:a,creator:e})}),[e,s,a]);return(0,x.s)(e)?(0,j.jsx)(d.h,{menu:k(e.uri),children:(0,j.jsx)(l.E,{variant:"bodySmallBold",children:(0,j.jsx)(h.N,{"data-testid":"creator-link",to:e.uri,onClick:r,children:v(e)})})}):(0,j.jsx)(l.E,{variant:"bodySmall",children:v(e)})},C=({creator:e,onClick:s,isSmallIcon:a})=>{const[t,r]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,j.jsxs)("div",{className:i()(b.A.metaDataText,b.A.creatorWrapper,{[b.A.smallMadeForIcon]:a}),children:[(0,j.jsx)(n.D,{semanticColor:"textBrightAccent"}),(0,j.jsx)(l.E,{variant:"bodySmall",children:t}),(0,j.jsx)(f,{creator:e,onClick:s}),r&&(0,j.jsx)(l.E,{variant:"bodySmall",children:r})]})},R=({creator:e,onClick:s,isSmallIcon:a,prefix:t})=>(0,j.jsxs)("div",{className:i()(b.A.metaDataText,b.A.creatorWrapper),children:[e.images.length>0&&(0,j.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small"}),t&&(0,j.jsx)(l.E,{variant:"bodySmall",children:t}),(0,j.jsx)(f,{creator:e,onClick:s})]}),L=({creators:e,onPiledCreatorsClick:s,isSmallIcon:a})=>{const t=(0,j.jsx)("div",{className:b.A.piled,children:e.slice(0,3).map(((e,s)=>(0,j.jsx)(u.e,{label:v(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small",piled:s>0},e.uri)))});let r=c.Ru.get("playlist.header.creator-and-others",v(e[0]),e.length-1);return 2===e.length&&(r=c.Ru.get("playlist.header.creator-and-co-creator",v(e[0]),v(e[1]))),s?(0,j.jsxs)("button",{className:i()(b.A.metaDataText,b.A.creatorWrapper,b.A.creatorButton),onClick:s,children:[t,r]}):(0,j.jsxs)("div",{className:i()(b.A.metaDataText,b.A.creatorWrapper),children:[t,r]})},I=({creators:e,onCreatorClick:s})=>(0,j.jsx)(j.Fragment,{children:e.map(((e,a)=>(0,j.jsxs)(t.Fragment,{children:[0!==a&&(0,j.jsx)("span",{className:b.A.divider}),(0,j.jsx)(f,{creator:e,onClick:s,position:a})]},e.id)))}),w=({creators:e,onPiledCreatorsClick:s,onCreatorClick:a,isTunaApplied:t})=>{const r=(0,y.y)(),i=r===(g.E.SMALL||r===g.E.XSMALL);if(1===e.length){const[s]=e;return s.isMadeFor?(0,j.jsx)(C,{creator:s,onClick:a,isSmallIcon:i}):(0,j.jsx)(R,{creator:s,onClick:a,isSmallIcon:i,prefix:t?"":void 0})}return e.length>0&&e.every((e=>(0,o.APS)(e.uri)))?(0,j.jsx)(L,{creators:e,onPiledCreatorsClick:s,isSmallIcon:i}):(0,j.jsx)(I,{creators:e,onCreatorClick:a})};function A({creators:e,onCreatorClick:s,onPiledCreatorsClick:a,isTunaApplied:r}){return(0,j.jsx)(t.Suspense,{fallback:null,children:(0,j.jsx)(w,{creators:e,onPiledCreatorsClick:a,onCreatorClick:s,isTunaApplied:r})})}},54513:(e,s,a)=>{a.d(s,{R:()=>i});var t=a(5119),r=a(86070);const i=({uri:e,enabled:s,className:a,children:i,onClick:l})=>s?(0,r.jsx)(t.N,{to:e,className:a,onClick:l,children:i}):(0,r.jsx)(r.Fragment,{children:i})},53185:(e,s,a)=>{a.d(s,{D:()=>n});var t=a(30758),r=a(30047),i=a(56116),l=a(86070);const n=t.memo((function({uri:e,ariaPlayLabel:s,ariaPauseLabel:a,onClick:t,isPlaying:n,size:o,locked:c,...u}){const d=(0,i.W)();return(0,l.jsx)(r.R,{ariaPlayLabel:s,ariaPauseLabel:a,isPlaying:n,onClick:s=>{c||d({targetUri:e,intent:n?"pause":"play",type:"click",itemIdSuffix:"button"}),t(s)},size:o,locked:c,...u})}))},62355:(e,s,a)=>{a.d(s,{e:()=>m});var t=a(97500),r=a.n(t),i=a(32825),l=a(44397),n=a(17461),o=a(22810),c=a(86070);const u=({isVideo:e,isEpisode:s})=>{let a=i.v;return e?a=l.B:s&&(a=n.L),(0,c.jsx)("div",{className:r()(o.A.rowImage,o.A.rowImageFallback),style:{borderRadius:4},children:(0,c.jsx)(a,{size:"small"})})};var d=a(84971);const m=({src:e,isVideo:s=!1,isEpisode:a=!1})=>e?(0,c.jsx)(d._,{className:r()(o.A.rowImage,{[o.A.rowImageVideo]:s}),draggable:!1,src:e,loading:"eager",width:"40",height:"40",radius:4,children:(0,c.jsx)(u,{isVideo:s,isEpisode:a})}):(0,c.jsx)(u,{isVideo:s,isEpisode:a})},19146:(e,s,a)=>{a.d(s,{u:()=>p});var t=a(97500),r=a.n(t),i=a(40638),l=a(78245),n=a(62355),o=a(56116),c=a(22232),u=a(99802),d=a(22810),m=a(86070);const p=({uri:e,src:s,playAriaLabel:a,onClick:t,isPlaying:p,isActive:h,isLocked:x,isEpisode:g,isVideo:y,spec:b})=>{const j=(0,o.W)(),v=(0,u.s)(),k=(0,i.YQ)((s=>{let a;if(j({type:"click",intent:p?"pause":"play"}),b){const s=b.playbackButtonFactory();let t;t=h&&p?s.hitPause({itemToBePaused:e}):h&&!p?s.hitResume({itemToBeResumed:e}):s.hitPlay({itemToBePlayed:e}),a=v.logInteraction(t)}t(s,a)}),c.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:d.A.rowImageWithPlay,children:[(0,m.jsx)(n.e,{src:s,isEpisode:g,isVideo:y}),(0,m.jsx)(l.x,{className:r()(d.A.rowPlayPauseButton,d.A.rowImagePlayPauseButton),iconClassName:d.A.rowPlayPauseIcon,onClick:k,isPlaying:p,isLocked:x,playAriaLabel:a})]})}},81493:(e,s,a)=>{a.d(s,{i:()=>c,p:()=>o});var t=a(3987),r=a(18317),i=a(93492),l=a(74598),n=a(86070);const o=[l.I.COMPACT,l.I.LIST],c=[{value:l.I.COMPACT,text:()=>i.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"),icon:()=>(0,n.jsx)(t.d,{size:"small"})},{value:l.I.LIST,text:()=>i.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),icon:()=>(0,n.jsx)(r.N,{size:"small"})}]},46106:(e,s,a)=>{a.d(s,{$I:()=>l,Qv:()=>i,R2:()=>r});var t=a(45176);const r=(e,s)=>{const a=e.contextMenuButtonFactory().hitUiReveal();s.logInteraction(a)},i=(e,s,a,r)=>{let i;e===t.NV.ADD?i=s.hitDownload({itemToDownload:r}):e===t.NV.REMOVE?i=s.hitRemoveDownload({itemToRemoveFromDownloads:r}):e===t.NV.NO_PERMISSION&&(i=s.hitUiReveal?.()),i&&a.logInteraction(i)},l=({isPlaying:e,isActive:s,spec:a,logger:t,uri:r})=>{let i;return i=e?a.hitPause({itemToBePaused:r}):s?a.hitResume({itemToBeResumed:r}):a.hitPlay({itemToBePlayed:r}),t.logInteraction(i)}},306:(e,s,a)=>{a.d(s,{Y:()=>o});var t=a(30758),r=a(72574),i=a(12469),l=a(37395),n=a(9043);const o=e=>{const s=(0,l.f)(),[a,o]=(0,t.useState)(!1);if(!(0,r.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const c=(0,t.useCallback)((t=>t&&!a?s.followUsers([e]):!t&&a?s.unfollowUsers([e]):Promise.resolve()),[s,a,e]);return(0,t.useEffect)((()=>{o(!1),s.isFollowing([e]).then((s=>{o(s[e]??!1)}))}),[s,e]),(0,n.N)(i.mc.OPERATION_COMPLETE,(s=>{s.data.uris.includes(e)&&!s.data.error&&(s.data.operation===i.JK.FOLLOW_USER?o(!0):s.data.operation===i.JK.UNFOLLOW_USER&&o(!1))})),[a,c]}},57891:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(87732);const r="rTMkDBDp47Eo12ZEQv4U";var i=a(86070);const l=({copyrights:e,courtesyLine:s})=>{const a=(e||[]).map(((e,s)=>{if(e.untyped)return(0,i.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},s);const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let r;return r="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,i.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:`${r} ${a}`},s)}));return s&&a.unshift((0,i.jsx)(t.Z,{as:"p",variant:"finale",dir:"auto",children:s},a.length)),(0,i.jsx)("div",{className:r,children:a})}},20606:(e,s,a)=>{a.r(s),a.d(s,{default:()=>mt});var t=a(30758),r=a(97500),i=a.n(r),l=a(85387),n=a(13505),o=a(75635),c=a(61e3),u=a(58105),d=a(72574),m=a(93492),p=a(12367),h=a(71070),x=a(64359),g=a(94201),y=a(3996),b=a(4378),j=a(11951),v=a(49022),k=a(44746),f=a(15810),C=a(39856),R=a(78120),L=a(5389),I=a(26101),w=a(63161),A=a(57730),P=a(38167),N=a(44947),T=a(49810);const U=new N.l("internalLinkRecommenderTrack","query","c77098ee9d6ee8ad3eb844938722db60570d040b49f41f5ec6e7be9160a7c86b",null);var E=a(3118),S=a(95059),B=a(90630),M=a(14867),_=a(98176);var F=a(62411),O=a(384),D=a(35151),V=a(26906),z=a(60841),q=a(76252),Z=a(98962),$=a(59764),W=a(12959);var G=a(54513),X=a(30368),J=a(76762),Q=a(54878),Y=a(19146),K=a(22360),H=a(83298),ee=a(80742),se=a(97998),ae=a(1782),te=a(8562),re=a(23602),ie=a(61056),le=a(13670),ne=a(53458),oe=a(49157),ce=a(8766),ue=a(3568),de=a(57836),me=a(43671),pe=a(24395),he=a(21081),xe=a(89979);const ge="Z9Dr8PkXFtlO8KnnDcxp",ye="Bm0LUMlhVIcF5qusgdUP",be="GIyB7JDkRwjtVL6PSBbg",je="whTIka0YYAkqhqrs26Wa",ve="ulEQOyh4lZiAVbgiCfPQ";var ke=a(86070);const fe=t.memo((function({uri:e,name:s,imgUrl:a,artists:t,isExplicit:r,index:i,albumUri:l,contextUri:n,isPlayable:o,isMOGEFRestricted:c,totalMilliseconds:u,playcount:d,usePlayContextItem:x}){const{isActive:g,isPlaying:y,triggerPlay:b,togglePlay:j}=x({uri:e,index:i}),v=(0,he.T)(e),{isPlayable:k,isAnyArtistBanned:f}=(0,ce.g)(e,{isPlayable:o,isLocal:!1,isOutOfMarket:!1,artistUris:t.map((e=>e.uri))}),{unBanArtists:C}=(0,oe.M)(t.map((e=>e.uri))),R=t.map((e=>e.name)).join(m.Ru.getSeparator()),{badges:L,hasBadges:I}=(0,xe.b)({isMOGEFRestricted:c,downloadAvailability:v,isExplicit:r}),w=t.map((e=>e.name)).join(m.Ru.getSeparator()),A=(0,S.c)();return(0,ke.jsx)(pe.pZ,{value:"row",index:i,children:(0,ke.jsx)(p.h,{menu:(0,ke.jsx)(h.P,{uri:e,albumUri:l,artists:t,contextUri:n}),children:(0,ke.jsxs)(le.w,{uri:e,contextUri:n,isPlayable:k,isAnyArtistBanned:f,handleArtistBanUndoClick:C,onTriggerPlay:(e,s)=>{b({loggingParams:s})},isActive:g,index:i,ariaRowIndex:i,dragMetadata:{name:s,createdBy:R},isExplicit:r,children:[(0,ke.jsxs)(ae.U,{ariaColIndex:0,children:[(0,ke.jsx)(Y.u,{uri:e,src:a,onClick:(e,s)=>{j({loggingParams:s})},isLocked:!1,isPlaying:y,isActive:g,playAriaLabel:m.Ru.get("tracklist.a11y.play",s,R)}),(0,ke.jsxs)(K.l,{children:[(0,ke.jsx)(G.R,{uri:e,enabled:A,className:be,children:(0,ke.jsx)(ie.p,{titleText:s,children:s})}),I&&(0,ke.jsxs)(J.P,{children:[L.download&&(0,ke.jsx)(de._,{}),L.explicit&&(0,ke.jsx)(ue.U,{}),L.nineteen&&(0,ke.jsx)(me.q,{className:je,size:16})]}),(0,ke.jsx)(re.p,{children:(0,ke.jsx)(X.l,{artists:t})})]})]}),(0,ke.jsx)(te.o,{ariaColIndex:1,children:(0,ke.jsx)(ee.Y,{playcount:d})}),(0,ke.jsxs)(se.l,{ariaColIndex:2,children:[(0,ke.jsx)(ne.d,{uri:e}),(0,ke.jsx)(Q.P,{duration:u}),(0,ke.jsx)(H.Y,{menu:(0,ke.jsx)(h.P,{uri:e,albumUri:l,contextUri:n,artists:t}),label:m.Ru.get("more.label.track",s,w)})]})]})})})}),((e,s)=>e.uri===s.uri&&e.index===s.index));var Ce=a(43758),Re=a(40997),Le=a(33279),Ie=a(46307),we=a(37267),Ae=a(88176),Pe=a(78172);const Ne=t.memo((function({subtitle:e,uri:s}){const a=(()=>{const e=(0,S.c)(),s=(0,M.o)(_.P.ExtendTrackRecommendations,(0,l.zy)()),a=(0,E.NC)(B.FtF)===B.J9B.Enabled;return!!e&&(s||a)})(),{data:r}=(i={uri:s,limit:a?10:5},(0,T.I)(U,i,c));var i,c;const[u,d]=(0,t.useState)(!1),p=function(e){return(e||[]).filter((e=>(e=>{return s=e,"NotFound"!==s?.__typename&&"GenericError"!==s?.__typename&&"Track"===e.__typename;var s})(e.data))).map((e=>e.data))}(r?.seoRecommendedTrack.items),h=(0,t.useMemo)((()=>p?.slice(0,Math.min(p.length,5))),[p]),x=(0,t.useMemo)((()=>u?p:h),[h,u,p]),g=(0,t.useCallback)((e=>({uri:"uri"in e?e.uri:""})),[]),y=(0,t.useMemo)((()=>[Le.$.TITLE_AND_ARTIST,Le.$.ALBUM,Le.$.DURATION]),[]),b=`${s}|[${(a?p:h).map((e=>e.uri))}]`,j=(e=>{const s=(0,E.NC)(B.FtF),a=(0,V.vh)(),t=(0,S.c)(),r=(0,z.V)(),i=(0,F.d4)(Z.F6),l=(0,F.d4)(q.JJ),n={category:"track_ilr_exposures",action:"track_page_visit",variant:s,label:"dwp",os:(0,W.f)(),context:e,country:i?l:"",sp_t:(0,$.v8)("sp_t")};return()=>{t&&(r?a.send((0,D.r)(n)):a.send((0,O._)(n)))}})(b);(0,t.useEffect)((()=>{j()}),[j]);const{usePlayContextItem:v}=(0,Ie.P)({uri:"spotify:internal:recs:track-ilr",pages:[{items:p?.map((e=>({uri:e.uri,uid:null,type:Pe.c.TRACK,provider:null})))}]},{featureIdentifier:"ilr"}),k=(0,t.useCallback)(((e,a)=>(0,ke.jsx)(fe,{index:a,contextUri:s,uri:e.uri,name:e.name,totalMilliseconds:e.duration.totalMilliseconds,imgUrl:e.albumOfTrack?.coverArt?.sources[0]?.url,isPlayable:e.playability.playable,artists:e.artists.items.map((e=>({uri:e.uri,id:e.id,name:e.profile.name}))),albumUri:e?.albumOfTrack?.uri||"",isExplicit:e.contentRating?.label===Ae.x7.Explicit,isMOGEFRestricted:e.contentRating?.label===Ae.x7.NineteenPlus,playcount:parseInt(e.playcount||"0",10),usePlayContextItem:v},`${a}-${e.uri}`)),[s,v]);return p?.length?(0,ke.jsxs)("div",{className:ge,children:[(0,ke.jsxs)("div",{className:ye,children:[(0,ke.jsx)(n.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("playlist.extender.recommended.title")}),(0,ke.jsx)(n.E,{variant:"bodySmall",paddingBottom:o.CD,children:e})]}),(0,ke.jsx)(Re.S4,{ariaLabel:m.Ru.get("playlist.extender.recommended.title"),nrTracks:x.length,rowPlaceholder:Ce.qq,tracks:x,renderRow:k,resolveItem:g,columns:y},"internal-link-recommender-track-list"),a&&(0,ke.jsx)("button",{"aria-expanded":u,className:ve,onClick:()=>{d(!u)},"data-testid":u?"show-less-button":"see-more-button",children:(0,ke.jsx)(n.E,{as:"div",variant:"bodySmallBold",children:u?m.Ru.get("artist-page.tracks.showless"):m.Ru.get("artist-page.tracks.seemore")})})]}):null})),Te=e=>{const{entityType:s}=e;return(0,ke.jsx)(P.s,{onError:()=>{(0,we.fE)({metric_type:A.MetricTypes.COUNTER,what:"dwp-ilr-component-error",value:1,tags:{entityType:s}})},children:(0,ke.jsx)(Ne,{...e})})};var Ue=a(5119),Ee=a(8030),Se=a(53185),Be=a(53849),Me=a(2169),_e=a(66764);const Fe=({albums:e,artistName:s,artistId:a,artistUri:t,className:r})=>e?(0,ke.jsx)(pe.pZ,{value:"shelf/albums",children:(0,ke.jsx)(Me.$,{total:e.totalCount,title:m.Ru.get("rich-page.popular-albums-by-artist",{artist:s}),seeAllUri:`${(0,_e.Dh)(a)}:discography:${Ae._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,children:(0,_e.Ey)(e.items).map(((e,s)=>(0,ke.jsx)(Be.K,{album:e,index:s,artistURI:t},e.uri)))})}):null;var Oe=a(60308);const De=({artistId:e,className:s,fansAlsoLike:a,title:t})=>(0,ke.jsx)(pe.pZ,{value:"shelf/fans-also-like",children:(0,ke.jsx)(Me.$,{total:a.length,title:t??m.Ru.get("rich-page.fans-also-like"),seeAllUri:`${(0,_e.Dh)(e)}:related`,className:s,children:a.map(((e,s)=>(0,ke.jsx)(pe.pZ,{value:"card",index:s,children:(0,ke.jsx)(Oe.a,{index:s,uri:e.uri,name:e.profile.name,images:e.visuals.avatarImage?.sources||[]})},e.uri)))})});var Ve=a(82046);const ze="ERm7dIKbVoqGwPb_lXPH",qe=({artistName:e,artistUri:s,headerClassName:a,rowClassName:r,topTracks:i,topTracksTransformer:l,uri:o})=>{const c=(0,t.useMemo)((()=>i?.items.map((e=>l(e,o)))),[i?.items,l,o]);return c&&c.length>0?(0,ke.jsxs)("div",{className:r,children:[(0,ke.jsxs)("div",{children:[(0,ke.jsx)(n.E,{variant:"bodySmall",className:ze,children:m.Ru.get("rich-page.popular-tracks")}),(0,ke.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:a,children:e})]}),(0,ke.jsx)(Ve.z,{uri:s,nrTracks:c.length,initialTracks:c})]}):null};var Ze=a(51496);const $e=({artistName:e,artistId:s,artistUri:a,className:r,releases:i,artistImages:l})=>{const n=(0,t.useMemo)((()=>l?{title:e,pretitle:m.Ru.get("artist-page.popular"),media:(0,Ze.h)(l,{desiredSize:48})||""}:null),[l,e]);return i?(0,ke.jsx)(pe.pZ,{value:"shelf/releases",children:(0,ke.jsx)(Me.$,{total:10,title:m.Ru.get("rich-page.popular-releases-by-artist",{artist:e}),seeAllUri:`${(0,_e.Dh)(s)}:discography:${Ae._m.Album.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:r,...n,children:i.items.map(((e,s)=>(0,ke.jsx)(Be.K,{album:e,index:s,artistURI:a},e.uri)))})}):null},We=({artistId:e,artistName:s,artistUri:a,className:t,singles:r})=>r?(0,ke.jsx)(pe.pZ,{value:"shelf/singles-and-eps",children:(0,ke.jsx)(Me.$,{total:r.totalCount,title:m.Ru.get("rich-page.popular-singles-and-eps-by-artist",{artist:s}),seeAllUri:`${(0,_e.Dh)(e)}:discography:${Ae._m.Single.toLowerCase()}`,seeAllLabel:m.Ru.get("shelf.see-all"),alwaysShowSeeAll:!0,className:t,children:(0,_e.Ey)(r.items).map(((e,s)=>(0,ke.jsx)(Be.K,{album:e,index:s,artistURI:a},e.uri)))})}):null;var Ge=a(6256),Xe=a(61895),Je=a(5537),Qe=a(12888),Ye=a(29208),Ke=a(26923),He=a(52090);const es="VdIaMy6YRQX6cN5B7OVC",ss="LjkmarFarmUOq0nmv9iy",as="VHigmLQwT1FxkKEbCs4H",ts="qX5K6LTMIuXG1gFBXzjZ",rs="fsH_X6pBkexdxtu19q5k",is="sDbr7RxY_jjg1XXq8zU5",ls="MiWZGlZeQCy1tibDTql5",ns="uci6FedOoLZEL163ZR8k",os="GDA6ugyRoV7ZiqIyOU4d",cs="IUBwxdZXklSkRPTZ9w_Q",us="f7XB243E_dNMV9dkUXV6",ds="gQQC7YFmzffMUaCqbx3o",ms="QJVNM_FcLpEHhjDc_FU3",ps="Vd2oInYt1Ynz9X6KgL7o",hs="yUA20RYjsLIb7xXNRlfn",xs="MVDvKVX1aJ05U9lmHzaz",gs=({richTrack:e})=>{const{search:s}=(0,l.zy)(),a=(0,t.useCallback)((()=>new URLSearchParams(s.slice(1)).get("highlight")||""),[s])(),{tracklistRef:r}=(0,He.h)(),i=e.albumOfTrack,{playUri:n,playOptions:o}=(0,Ke.J)(i?.uri||""),{usePlayContextItem:c}=(0,Ie.P)({uri:n},{featureIdentifier:"album"},o),u=(0,t.useMemo)((()=>({items:[],totalCount:0})),[]),d=(0,Ye.t)();return i?(0,ke.jsx)("div",{ref:r,className:ls,children:(0,ke.jsx)(Je.a,{columns:d,children:(0,ke.jsx)(Qe.F,{albumName:i.name,nrTracks:i.tracks.totalCount,albumUri:i.uri,highlightUri:a,discs:u,usePlayContextItem:c,hasHeaderRow:!1})})}):null};var ys=a(35251),bs=a(42297),js=a(85277),vs=a(39782),ks=a(61621),fs=a(79202),Cs=a(585),Rs=a(9830),Ls=a(69623),Is=a(96437),ws=a(48975),As=a(46106),Ps=a(68508),Ns=a(67759),Ts=a(82362);const Us=t.memo((function({uri:e,togglePlay:s,isPlaying:a,isActive:r,spec:i,logger:l,backgroundColor:n,name:o,isPlayable:c,albumUri:u,artists:d}){const p=(0,ws.n)(),[x,g]=(0,Ns.A)(e),y=(0,Ls.d$)(),{spec:b,logger:j}=(0,Ts.r)(ys.e,{data:{uri:e}});(0,t.useEffect)((()=>{y&&j.logImpression(b.impression())}),[y,j,b]);const v=(0,t.useCallback)((async()=>{const s=i.saveButtonFactory();l.logInteraction(x?s.hitRemoveLike({itemNoLongerLiked:e}):s.hitLike({itemToBeLiked:e})),x&&y&&j.logInteraction(b.hitAddToPlaylist({itemToBeAdded:e,playlist:Ps.BP}));try{await g(!x)}catch{}}),[e,x,i,l,g,y,j,b]),k=(0,t.useCallback)((()=>{const t=(0,As.$I)({isPlaying:a,isActive:r,spec:i.playButtonFactory(),logger:l,uri:e});s({loggingParams:t})}),[r,a,l,i,s,e]),f=(0,t.useCallback)((()=>{l.logInteraction(i.contextButtonFactory().hitUiReveal())}),[l,i]),C=(0,Is.j)();return(0,ke.jsx)(bs.E,{backgroundColor:n,children:(0,ke.jsxs)(js.S,{children:[(0,ke.jsx)(Rs.e,{children:(0,ke.jsx)(Se.D,{onClick:k,isPlaying:a,disabled:!c,size:C,uri:e})}),(0,ke.jsx)(Rs.e,{children:(0,ke.jsx)(vs.M,{isAdded:x,onClick:v,disabled:!p,size:C,condensed:!0})}),(0,ke.jsx)(ks.f,{uri:e,isFollowing:x,onFollow:v,size:C,condensed:!0}),(0,ke.jsx)(Cs.b,{menu:(0,ke.jsx)(h.P,{uri:e,albumUri:u,artists:d}),onShow:f,children:(0,ke.jsx)(fs.e,{label:m.Ru.get("more.label.context",o),size:C})})]})})}));var Es=a(87732);const Ss="OH5mnpJIVCJozYM3raMt",Bs="etw0slM6uVrCi5RR3iDi",Ms=({padded:e,providerDisplayName:s})=>s?(0,ke.jsx)(Es.Z,{as:"p",dir:"auto",variant:"finale",className:`${Ss} ${e?Bs:""}`,children:m.Ru.get("web-player.lyrics.providedBy",s)}):null;var _s=a(52596);let Fs=function(e){return e.LOADING="LOADING",e.LOADED="LOADED",e.UNAVAILABLE="UNAVAILABLE",e}({});const Os=(e,s)=>{switch(s.type){case"LYRICS_LOADING":return{...e,[s.uri]:{status:Fs.LOADING}};case"LYRICS_LOADED":return{...e,[s.uri]:{status:Fs.LOADED,data:s.response}};case"LYRICS_ERROR":return{...e,[s.uri]:{status:Fs.UNAVAILABLE}};default:return(0,_s.d)(s,`Unhandled lyrics action with type: ${s.type}`)}};var Ds=a(49593),Vs=a(44816);var zs=a(1681);const qs=async({trackUri:e,api:s,imageForLyricsRequest:a,isPlayable:t})=>{if(!t)return{hasLyrics:!1};const r=(0,d.o_h)(e);try{const e=await(async(e,s,a)=>(await e.build().withHost(Vs.Hj).withPath(`/track/${encodeURIComponent(s)}/image/${encodeURIComponent(a)}`).withHeaders([{key:"App-Platform",value:"WebPlayer"}]).withQueryParameters({format:"json",vocalRemoval:!1}).withEndpointIdentifier("/track/{trackId}").send()).body)(s||Ds.n.getInstance(),r.id,a||"");return{hasLyrics:!0,syncType:e.lyrics.syncType,lyrics:e.lyrics.lines,provider:e.lyrics.provider,providerDisplayName:e.lyrics.providerDisplayName,providerLyricsId:e.lyrics.providerLyricsId,isRtlLanguage:e.lyrics.isRtlLanguage}}catch(e){if(e instanceof zs.O&&404===e.status)return{hasLyrics:!1};throw e}},Zs={status:Fs.LOADING},$s={status:Fs.UNAVAILABLE},Ws=t.createContext(void 0),Gs=({children:e,initialState:s={}})=>{const a=t.useReducer(Os,s);return(0,ke.jsx)(Ws.Provider,{value:a,children:e})},Xs=({uri:e,isNotPermittedToFetchLyrics:s,imageForLyricsRequest:a,isPlayable:r})=>{const i=t.useContext(Ws);if(void 0===i)throw new Error("useTrackEntityLyrics must be used within a TrackEntityLyricsProvider");const[l,n]=i,o=e?l[e]:null;return(0,t.useEffect)((()=>{s||!o&&e&&(n({type:"LYRICS_LOADING",uri:e}),qs({trackUri:e,imageForLyricsRequest:a,isPlayable:r}).then((s=>{n({type:"LYRICS_LOADED",uri:e,response:s})})).catch((()=>{n({type:"LYRICS_ERROR",uri:e})})))}),[n,a,s,r,o,e]),e&&(0,d.U_m)(e)&&!s&&r?o||Zs:$s},Js=({uri:e,imageForLyricsRequest:s,isPlayable:a})=>{const{data:t}=Xs({uri:e,imageForLyricsRequest:s,isPlayable:a});return t?.hasLyrics?(0,ke.jsx)(Ms,{providerDisplayName:t.providerDisplayName}):null};var Qs=a(555);const Ys="QhDsXG1Gmo7XmQWLggAO",Ks="bZgWQj7UxvK8GYKWDA7N",Hs="AW61P3tnW5cKJCWtbhFh",ea=({buttonText:e,onSecondaryButtonClick:s,onPrimaryButtonClick:a,secondaryButtonText:t,text:r})=>(0,ke.jsxs)("div",{className:Ys,"data-testid":"static-activation-trigger",children:[(0,ke.jsx)(n.E,{className:Ks,variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,ke.jsxs)("div",{className:Hs,children:[(0,ke.jsx)(c.H,{onClick:s,semanticColor:"textBase",children:t}),(0,ke.jsx)(Qs.$,{onClick:a,colorSet:"invertedLight",children:e})]})]});var sa=a(71272);var aa=a(75773);const ta="EaTxqhHk6J4ecKHwpY5m",ra="dUQl9yd5x_1oWk4L0Ntm",ia="xt5C47eHPYNiriMJxGnC";var la=a(9266);const na=({words:e,onObserve:s,lyricsInView:a,...r})=>{const{ref:i,inView:l}=(0,aa.Wx)({threshold:0}),o=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{a||(o.current=!1)}),[a]),(0,t.useEffect)((()=>{o.current||l&&(s({text:e,outOfView:!1}),o.current=!0)}),[l,s,e]),(0,ke.jsx)(n.E,{ref:i,as:"p",dir:"auto",variant:"bodyMedium",className:ia,"data-testid":r["data-testid"],children:e})},oa="q1JbsdMqX7OImgIFWa6J",ca="hAGejMh7SncdbJ5wcfUi",ua="IaG9Zc3xGxeYjsn73RAz",da="zgSEYVU2gMYxihFVEJPn",ma="expandable-lyrics-container";const pa=({lyrics:e,lyricsInView:s,onObserve:a,previewCount:r})=>{const[l,o]=(0,t.useState)(!1),{visibleLyrics:c,collapsibleLyrics:u}=function(e,s){let a=0,t=-1;const r=e.filter((e=>!!e.words));for(const[e,i]of r.entries())if(a+=i.words.length,a>s){t=e;break}if(t>-1)return{visibleLyrics:r.slice(0,t),collapsibleLyrics:r.slice(t)};return{visibleLyrics:r,collapsibleLyrics:[]}}(e,r),d=u.length>0,p=l?m.Ru.get("show_less"):`…${m.Ru.get("show_more")}`;return(0,ke.jsxs)(ke.Fragment,{children:[c.map((({words:e},t)=>(0,ke.jsx)(na,{onObserve:a,words:e,lyricsInView:s,"data-testid":"lyrics-line-always-visible"},`lyrics-seo-line-${t}`))),(0,ke.jsx)("span",{"aria-hidden":!l,className:i()(ua,{[da]:l}),children:u.map((({words:e},t)=>(0,ke.jsx)(na,{onObserve:l?a:()=>{},words:e,lyricsInView:l&&s},`lyrics-seo-line-${t}`)))}),d&&(0,ke.jsx)("button",{className:oa,onClick:()=>{o(!l)},"aria-controls":ma,"aria-owns":ma,"aria-label":p,children:(0,ke.jsx)(n.E,{variant:"bodyMediumBold",className:ca,children:p})})]})},ha=({data:e,eventSender:s,playbackId:a,previewCount:r,uri:i})=>{const{lyrics:l=[],provider:o,providerLyricsId:c,syncType:u}=e,{ref:d,inView:p}=(0,aa.Wx)({threshold:0}),h=function(e){const{trackUri:s,provider:a,providerLyricsId:r,syncType:i,eventSender:l,playbackId:n,isSnippet:o}=e,c=(0,t.useRef)(null),[u,d]=(0,t.useState)(!1),[m,p]=(0,t.useState)(0),[h,x]=(0,t.useState)(!1),g=(0,t.useMemo)((()=>(0,la.W)({lyrics_format:"track-page",track_uri:s,provider:a,provider_lyrics_id:r,sync_type:i,playback_id:n,is_snippet:o})),[s,a,r,i,n,o]);return(0,t.useEffect)((()=>{d(!1),p(0),x(!1),c.current=null}),[s]),(0,t.useEffect)((()=>{u&&n&&d(!1)}),[n]),(0,t.useEffect)((()=>{u||m>=140&&h&&(l?.send(g),d(!0))}),[m,u,g,l,h]),(0,t.useCallback)((e=>{const{text:s,outOfView:a}=e;s&&s.length>1&&(p((e=>e+s.length)),u||null!==c.current||(c.current=setTimeout((()=>{x(!0)}),1500))),a&&(c.current&&clearTimeout(c.current),c.current=null,p(0))}),[p,u])}({trackUri:i,provider:o,providerLyricsId:c,syncType:u,eventSender:s,playbackId:a});return(0,t.useEffect)((()=>{p||h({outOfView:!0})}),[p,h]),(0,ke.jsxs)("div",{className:ta,ref:d,children:[(0,ke.jsx)(n.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",className:ra,children:m.Ru.get("web-player.lyrics.title")}),(0,ke.jsx)(pa,{lyrics:l,lyricsInView:p,onObserve:h,previewCount:r})]})};var xa=a(40829),ga=a(34668),ya=a(58225);const ba=({uri:e,imageForLyricsRequest:s,isPlayable:a})=>{const[r,i]=(0,t.useState)(420),{data:l}=Xs({uri:e,imageForLyricsRequest:s,isPlayable:a}),n=(0,V.vh)(),{isPaused:o,currentTrackUri:c,playbackId:u}=(0,ga.o)((e=>({isPaused:e?.isPaused,currentTrackUri:e?.item?.uri,playbackId:e?.playbackId})),ya.a),d=!o&&c===e,m=(0,t.useCallback)((()=>{window.innerWidth<=768?i(280):window.innerWidth>768&&280===r&&i(420)}),[r]);return(0,t.useEffect)((()=>{m()}),[m]),(0,xa.s)(m),l&&l?.hasLyrics?(0,ke.jsx)(ha,{data:l,uri:e,eventSender:n,playbackId:d?u:void 0,previewCount:r}):null},ja=e=>{const s=(e=>{const s=(0,V.vh)(),a=(0,F.d4)(Z.F6),t=(0,F.d4)(q.JJ),r=(0,F.d4)(Z.oo),i=(0,z.V)();return()=>{if(i)return;(0,we.fE)({metric_type:A.MetricTypes.COUNTER,what:"dwp-lyrics-component-error",value:1});const l={category:"lyrics_render_error",label:"dwp",os:(0,sa.f)(),context:JSON.stringify({uri:e,product:r}),country:a?t:"",sp_t:(0,$.v8)("sp_t")};s.send((0,O._)(l))}})(e.uri);return(0,ke.jsx)(P.s,{onError:s,children:(0,ke.jsx)(ba,{...e})})};var va=a(4895);const ka="T1nqQ4HEh3heHy4RCCKa",fa="L8zjshPVgUMXyZR4FtOk",Ca="YMn1FWcFmOz9osBrNvhF",Ra="Inbyq3TnvKDOJtcKFTDQ",La="lWk5se4WETUOJwaEb8D6",Ia="i8DyQbWCmDV_8N5XGJQT",wa="t5WPFlGTY6GCd9UOFfLu",Aa="AGQ3wRyMVK1odq860qnT",Pa="ZX_r7uZgPgssaUplfpxT",Na="qrqctaPu2XBpxsw23nPX",Ta="XnWidTagai3nQwMPxIMF";var Ua=a(55117),Ea=a(75189),Sa=a(81531),Ba=a(93311);let Ma=function(e){return e.SMALL="small",e.LARGE="large",e}({});const _a=e=>{const{disabled:s,images:a,LinkComponent:t,name:r,size:n,uri:o,enableI18nRoutes:c,enableI18nAdditionalPages:u}=e,p=n===Ma.SMALL,h=(0,l.Zp)(),x=(0,d.o_h)(o),g=x?.type,y=m.Ru.getLocaleForURLPath(),b=(0,Sa.p)({localeFeatureFlag:c,entityFeatureFlag:u,urlLocale:y,entity:g,type:"link"});return(0,ke.jsxs)("div",{className:i()(fa,{[Ca]:s}),"data-testid":"track-artist-link-card",children:[(0,ke.jsx)(Ua.b,{shape:Ua.u.CIRCLE,images:a,size:Ea.Qe.SIZE_80,title:r,type:Pe.c.ARTIST}),(0,ke.jsxs)("div",{className:i()(La,{[Ia]:p}),children:[(0,ke.jsx)(Es.Z,{variant:"mestoBold",className:Ra,children:m.Ru.get("card.tag.artist")}),(0,ke.jsx)(t,{to:o,children:(0,ke.jsx)(Es.Z,{as:"div",dir:"ltr",className:wa,variant:"balladBold",children:r})})]}),(0,ke.jsx)("div",{onClick:()=>{const e=x?.toURL(`/${Ba.CT}${y}/`);if(x){const s=b?e:x.toURLPath(!0);h(s)}},className:Aa})]})},Fa=({size:e=Ma.LARGE,disabled:s=!1,enableI18nRoutes:a,enableI18nAdditionalPages:r,...l})=>{const[n,o]=(0,t.useState)(!1),u=(0,t.useCallback)((()=>{o(!n)}),[n]),d=l.artists;return(0,ke.jsxs)("div",{"data-testid":"track-artist-link-card-container",children:[(0,ke.jsx)("div",{className:ka,children:d.map(((t,o)=>(0,ke.jsx)("div",{className:i()({[Na]:n&&o>5,[Pa]:o>5}),children:(0,ke.jsx)(_a,{name:t.name,uri:t.uri,images:t.images,size:e,LinkComponent:l.LinkComponent,disabled:s,enableI18nRoutes:a,enableI18nAdditionalPages:r},t.id)},`${t.uri}-${o}`)))}),d.length>6&&(0,ke.jsx)(c.H,{onClick:u,className:Ta,children:(0,ke.jsx)(Es.Z,{as:"p",variant:"violaBold",children:n?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})})]})};var Oa=a(89249);const Da=e=>{const{albumArtists:s,columnCount:a,imageForLyricsRequest:r,isPlayable:l,uri:n}=e,o=a-2,c={"--column-count":a,"--left-column-end":o-2,"--right-column-start":o},{isAnonymous:u}=(0,F.d4)(Z.Ht),d=(0,ws.n)(),{data:p,status:h}=Xs({uri:n,isNotPermittedToFetchLyrics:u,imageForLyricsRequest:r,isPlayable:l}),x=!!p&&p.hasLyrics&&h!==Fs.UNAVAILABLE||u,g=(0,F.d4)(va.M),y=(0,F.d4)(va.N);return(0,ke.jsxs)(t.Suspense,{fallback:null,children:[x&&(0,ke.jsx)("div",{className:i()(as,{[ts]:a>5}),style:{...c},"data-testid":"lyrics-container",children:u?(0,ke.jsx)(ea,{buttonText:m.Ru.get("sign_up"),secondaryButtonText:m.Ru.get("login"),text:m.Ru.get("track-page.sign-in-to-view-lyrics"),onPrimaryButtonClick:Oa.ie,onSecondaryButtonClick:Oa.PW}):(0,ke.jsx)(ja,{uri:n,imageForLyricsRequest:r,isPlayable:l})}),(0,ke.jsx)("div",{className:i()(es,{[ss]:a>5&&x}),style:{...c},children:(0,ke.jsx)(Fa,{artists:s,LinkComponent:Ue.N,disabled:!d,enableI18nRoutes:g,enableI18nAdditionalPages:y})})]})};function Va({playcount:e,durationMs:s}){return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)(R.q,{children:(0,Ze.f)(s)}),e&&e>0?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)(L.J,{}),(0,ke.jsx)(R.q,{variant:"bodySmall","data-testid":"playcount",children:m.Ru.formatNumber(e)})]}):null]})}var za=a(6443),qa=a(16077),Za=a(57891),$a=a(32829);const Wa="o2TlnuNKxRO5RnB9BpHB",Ga="q0Ke_aAvTcc4dO4wCHQt",Xa="UlKUfS_GcROZmofuafOW",Ja="I5LORTI1u3A6VoUvRCBf",Qa="TS85Qkpioa31wR0p4kzT",Ya="yL1DLXBc05CR_ACv_NhA",Ka="k5kRkUyoz9znqg_SGOVQ";var Ha=a(2036),et=a(37452);let st=function(e){return e.SMALL="small",e.LARGE="large",e}({});const at=({art:e,disabled:s=!1,LinkComponent:a,name:t,size:r=st.SMALL,type:n,uri:o})=>{const c=e?[e]:[],u=r===st.SMALL?(0,Ha.C)(n):function(e){switch(e){case et.s.SINGLE:return m.Ru.get("track-page.from-the-single");case et.s.EP:return m.Ru.get("track-page.from-the-ep");case et.s.COMPILATION:return m.Ru.get("track-page.from-the-compilation");case et.s.ALBUM:default:return m.Ru.get("track-page.from-the-album")}}(n),p=(0,l.Zp)();return(0,ke.jsxs)("div",{className:i()(Wa,{[Xa]:r===st.SMALL,[Ga]:s}),children:[(0,ke.jsx)("div",{className:Ja,children:(0,ke.jsx)(Ua.b,{images:c,size:Ea.Qe.SIZE_80,title:t,type:Pe.c.ALBUM})}),(0,ke.jsxs)("div",{className:Qa,children:[(0,ke.jsx)(Es.Z,{variant:r===st.SMALL?"mestoBold":"finale",children:u}),(0,ke.jsx)(a,{to:o,children:(0,ke.jsx)(Es.Z,{as:"div",className:Ya,variant:"balladBold",dir:"auto",children:t})})]}),(0,ke.jsx)("div",{onClick:()=>{p((0,d.o_h)(o).toURLPath(!0))},className:Ka})]})};var tt=a(77612),rt=a(13946),it=a(73638),lt=a(47176),nt=a(17807),ot=a(53780);const ct=e=>(e.items||[]).map((e=>({name:e.profile.name,images:(e.visuals.avatarImage?.sources||[]).map((e=>({url:e.url,width:e.width,height:e.height}))),uri:e.uri,id:e.id}))),ut=e=>(e||[]).map((e=>e.profile.name)),dt=({uri:e,track:s})=>{const a=(0,ws.n)(),r=(0,z.V)(),l=(0,qa.W)({type:"locale",uri:e}),d=m.Ru.getLocaleForTranslation(),A=parseInt(s.playcount||"0",10),{firstArtist:P,otherArtists:N,albumOfTrack:T,duration:U,name:E}=s,S=T?.coverArt,B=T?.copyright.items,M=T?.courtesyLine,_=T?.date,F=S?.extractedColors?.colorRaw.hex,O=(S?.sources||[]).map((e=>({url:e.url,width:e.width||void 0,height:e.height||void 0}))),D=ut(P.items),V=ut(N.items),q=ct(P),Z=ct(N),$=[...q,...Z],W=P.items[0],G=s.albumOfTrack,X=G?.playability?.playable,J={artistId:W?.id,artistName:W?.profile?.name,artistUri:W?.uri},Q=s.albumOfTrack?.coverArt?.sources,Y=(0,Ze.h)(Q||void 0,{desiredLabel:"large",desiredSize:600})??Q?.[0]?.url??"",[K,H]=(0,t.useState)(!1),ee=(0,t.useCallback)((()=>{H(!K)}),[K]),se=N&&N.items.length>5,{spec:ae,logger:te}=(0,Ts.r)(u.y,{data:{uri:e}}),re=s.playability.playable,{togglePlay:ie,isPlaying:le,isActive:ne}=(0,Ie.P)({uri:e},{featureIdentifier:"track"}),oe=(0,t.useCallback)((()=>(0,nt.rO)({i18n:m.Ru,trackArtistsList:[...D,...V].join(m.Ru.getSeparator()),trackName:s.name,shouldLocalize:l})),[D,V,l,s.name]),ce=(0,t.useCallback)(((e,s)=>{te.logInteraction(ae.headerFactory().artistLinkFactory({position:s.position,uri:s.creator.uri}).hitUiNavigate({destination:s.creator.uri}))}),[te,ae]),ue=(0,t.useCallback)((()=>{const s=(0,As.$I)({isPlaying:le,isActive:ne,spec:ae.actionBarFactory().playButtonFactory(),logger:te,uri:e});ie({loggingParams:s})}),[ne,le,te,ae,ie,e]),de=G?.uri,me=(0,t.useMemo)((()=>[...P.items,...N.items].map((e=>({uri:e.uri,name:e.profile.name})))),[P.items,N.items]),pe=(0,ke.jsx)(h.P,{uri:e,albumUri:de,artists:me});return(0,ke.jsxs)("section",{"data-testid":"track-page",children:[(0,ke.jsx)(x.Q,{children:oe()}),(0,ke.jsx)(Xe.c,{artistOrShow:me.map((e=>e.name)).join(m.Ru.getSeparator()),title:E,uri:e,entityType:Xe.p.TRACK}),(0,ke.jsxs)(g.z,{backgroundColor:F,children:[(0,ke.jsxs)(j.h,{children:[(0,ke.jsx)(Se.D,{size:"medium",onClick:ue,disabled:!re,isPlaying:le,uri:e}),(0,ke.jsx)(p.h,{menu:pe,children:(0,ke.jsx)(v.X,{text:E,dragUri:e,dragLabel:E})})]}),(0,ke.jsx)(p.h,{menu:pe,children:(0,ke.jsx)(y.K,{dragUri:e,images:O,name:E,placeholderType:"album"})}),(0,ke.jsxs)(b.Y,{children:[(0,ke.jsx)(n.E,{variant:"bodySmallBold",children:m.Ru.get("song")}),(0,ke.jsx)(p.h,{menu:pe,children:(0,ke.jsx)(I.mm,{dragUri:e,dragLabel:E,children:E})}),(0,ke.jsxs)(k.X,{children:[(0,ke.jsx)(f.j,{creators:q,onCreatorClick:ce}),G&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)(L.J,{}),(0,ke.jsx)(R.q,{children:(0,ke.jsx)(Ue.N,{to:G.uri,children:G.name})})]}),(0,ke.jsx)(L.J,{}),(0,ke.jsx)(C.H,{releaseDate:_}),(0,ke.jsx)(L.J,{}),(0,ke.jsx)(Va,{playcount:A,durationMs:U.totalMilliseconds})]})]})]}),(0,ke.jsx)(Us,{uri:e,togglePlay:ie,isPlaying:le,isActive:ne,spec:(0,t.useMemo)((()=>ae.actionBarFactory()),[ae]),logger:te,backgroundColor:F,name:E,isPlayable:re,albumUri:de,artists:me}),(0,ke.jsxs)(Gs,{children:[(0,ke.jsxs)("div",{className:"contentSpacing",children:[(0,ke.jsx)("div",{className:rs,children:(0,ke.jsx)($a.E,{render:({columnCount:s})=>(0,ke.jsx)(Da,{imageForLyricsRequest:Y,albumArtists:$,columnCount:s,uri:e,isPlayable:re}),rowGap:o.lT})}),(0,ke.jsx)(Te,{subtitle:m.Ru.get("internal-link-recommender.based-on-this-song"),uri:s.uri,entityType:Pe.c.TRACK}),(0,ke.jsx)(qe,{artistName:W.profile.name,artistUri:W.uri,headerClassName:os,rowClassName:rs,topTracks:W.discography.topTracks,topTracksTransformer:Ge.fX,uri:s.uri}),(0,ke.jsx)($e,{className:ns,releases:W?.discography?.popularReleasesAlbums,...J}),(0,ke.jsx)(Fe,{albums:W?.discography?.albums,className:ns,...J}),(0,ke.jsx)(We,{className:ns,singles:W?.discography?.singles,...J}),N.items.length>0&&(0,ke.jsx)("div",{className:us,children:N.items.map(((e,s)=>(0,ke.jsx)($e,{className:i()(cs,{[ms]:s>4,[ps]:K&&s>4}),releases:e.discography.popularReleasesAlbums,artistName:e.profile.name,artistId:e.id,artistUri:e.uri,artistImages:e.visuals.avatarImage?.sources},e.id)))}),se&&(0,ke.jsx)(c.H,{onClick:ee,className:hs,children:(0,ke.jsx)(n.E,{as:"h2",variant:"bodySmallBold",children:K?m.Ru.get("show_less"):m.Ru.get("mwp.search.artists.all")})}),(0,ke.jsx)(w.b,{uri:e,className:ns}),(0,ke.jsx)(De,{artistId:W.id,className:i()(ns,{[ds]:N.items.length>0}),fansAlsoLike:W.relatedContent.relatedArtists.items,title:m.Ru.get("artist-page.fansalsolike")}),G&&(0,ke.jsx)(at,{art:G.coverArt?.sources[0],disabled:!X||!a,LinkComponent:Ue.N,name:G.name,type:G.type,size:st.LARGE,uri:G.uri}),(0,ke.jsx)(gs,{richTrack:s})]}),(0,ke.jsx)("div",{className:"contentSpacing",children:(0,ke.jsxs)("div",{className:is,children:[_?.isoString&&(0,ke.jsx)(n.E,{as:"p",variant:"bodySmall",className:xs,children:(0,ot.rh)((0,ot.ad)(_.isoString),d,{year:"numeric",month:"long",day:"numeric"},(0,ot.rk)(_.precision))}),(0,ke.jsx)(Za.Z,{copyrights:B||[],courtesyLine:M}),!r&&(0,ke.jsx)(Js,{uri:e,imageForLyricsRequest:Y,isPlayable:re})]})})]})]})},mt=(0,t.memo)((function(){const{trackId:e=""}=(0,l.g)(),s=(0,d.Mce)(e).toURI(),a=(0,za.J)({uri:s}),{data:t,isLoading:r}=(0,lt.r)(s);return a.loading||r||a.error||"Track"!==a.data?.trackUnion?.__typename?(0,ke.jsx)(Ee.LoadingPage,{hasError:!a.loading,errorMessage:m.Ru.get("track-page.error")}):(0,ke.jsx)(rt.P,{surface:tt.u.TRACK,uris:[s,a.data.trackUnion.albumOfTrack?.uri??null],children:(0,ke.jsx)(it.d,{dynamicColors:t,children:(0,ke.jsx)(dt,{uri:s,track:a.data.trackUnion})})})}))},6443:(e,s,a)=>{a.d(s,{J:()=>l});var t=a(44947),r=a(49810);const i=new t.l("getTrack","query","5c5ec8c973a0ac2d5b38d7064056c45103c5a062ee12b62ce683ab397b5fbe7d",null),l=(e,s)=>(0,r.I)(i,e,s)},44183:(e,s,a)=>{a.d(s,{a:()=>l});var t=a(81493),r=a(74598),i=a(72288);const l=()=>{const[e,s]=(0,i.x)("view-mode",r.I.LIST);let a=e;return t.p.includes(a)||(a=r.I.LIST),{viewMode:a,isCompactMode:a===r.I.COMPACT,setViewMode:s}}},86422:(e,s,a)=>{a.d(s,{a:()=>t.a});var t=a(44183)},74598:(e,s,a)=>{a.d(s,{I:()=>t});let t=function(e){return e.LIST="list",e.COMPACT="compact",e}({})},37395:(e,s,a)=>{a.d(s,{f:()=>i});var t=a(68334),r=a(18308);const i=()=>(0,r.N)(t.t)},9043:(e,s,a)=>{a.d(s,{N:()=>i});var t=a(30758),r=a(37395);const i=(e,s)=>{const a=(0,r.f)();(0,t.useEffect)((()=>a.getEvents().addListener(e,s)),[e,a,s])}},33887:(e,s,a)=>{a.d(s,{Bj:()=>r,T4:()=>i,kt:()=>l});var t=a(72574);function r(e,s){if(!s)return null;const a=(0,t.o_h)(s);if(!a||!(0,t.APS)(a))return null;const r=(0,t.XIp)(a.username);return e.find((e=>e.username===r))??null}function i(e){const s=e.getCurrentSession(),a=s?.sessionOwnerId;return a?s.sessionMembers.find((e=>e.id===a))??null:null}function l(e,s){if(!s||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const a=e.getCurrentSession(),t=r(a?.sessionMembers??[],s),l=i(e);return!!t&&t?.username!==l?.username}}}]);
//# sourceMappingURL=xpui-routes-track-v2.js.map