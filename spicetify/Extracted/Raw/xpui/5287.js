"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[5287],{80918:(e,n,t)=>{t.d(n,{X:()=>b});var r=t(30758),i=t(62411),s=t(49263),o=t(93492),l=t(12032),c=t(56695),a=t(71338),u=t(56116),d=t(48975),m=t(24395),p=t(21053),f=t(49593),k=t(68055),g=t(80687),h=t(86070);const x=({currentUserUri:e,uri:n,name:t,divider:m,onBlock:x})=>{const b=(0,u.W)(),C=!(0,d.n)(),{isBlocked:v,blockUser:j,unblockUser:y}=function(e,n,t,s){const[c,u]=(0,r.useState)(!1),d=(0,i.wA)(),m=(0,p.a)(),h=(0,g.A)(),{enqueueSnackbar:x}=(0,a.d)();return(0,r.useEffect)((()=>{e&&(0,k.zP)(h,{currentUserUri:e,uri:n}).then((e=>{if(m()){if(200!==e.status)throw new Error("Invalid response from socialgraph");u(e.body?.[0]?.is_dismissed||!1)}}))}),[e,n,m,h]),{isBlocked:c,blockUser:()=>{e&&d((0,l.zj)(n,t,s))},unblockUser:async()=>{e&&(await(0,k.kV)(f.n.getInstance(),{currentUserUri:e,uri:n}),x(o.Ru.get("feedback.unblock-user")))}}}(e,n,t,x),w=(0,r.useCallback)((async()=>{b({targetUri:n,intent:v?"unblock":"block",type:"click"}),v?await y():await j()}),[b,n,j,y,v]);if(!e||e===n)return null;const U=v?o.Ru.get("contextmenu.unblock"):o.Ru.get("contextmenu.block");return(0,h.jsx)(c.D,{role:"menuitem",divider:m,disabled:C,onClick:w,leadingIcon:(0,h.jsx)(s.r,{semanticColor:"textSubdued",size:"small"}),children:U})},b=r.memo((function(e){return(0,h.jsx)(m.pZ,{value:"block-user",children:(0,h.jsx)(x,{...e})})}))},34855:(e,n,t)=>{t.d(n,{B:()=>O});var r=t(30758),i=t(62411),s=t(93492),o=t(55669),l=t(80918),c=t(42026),a=t(33650),u=t(56695),d=t(24395),m=t(86070);const p=r.memo((function({onClick:e,divider:n,canEdit:t}){return e&&t?(0,m.jsx)(d.pZ,{value:"edit-profile",children:(0,m.jsx)(u.D,{role:"menuitem",divider:n,onClick:e,leadingIcon:(0,m.jsx)(a.G,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("contextmenu.edit-profile")})}):null}));var f=t(27508),k=t(96869),g=t(8950),h=t(56116),x=t(48975),b=t(306),C=t(98962),v=t(82362);const j=()=>{},y=({uri:e,divider:n,onRemoveCallback:t=j})=>{const{spec:o,logger:l}=(0,v.r)(g.F,{data:{uri:e}}),c=(0,h.W)(),a=!(0,x.n)(),d=(0,i.d4)(C.Ht).user,[p,y]=(0,b.Y)(e),w=(0,r.useCallback)((()=>{const n=o.followButtonFactory();c({targetUri:e,intent:p?"unfollow":"follow",type:"click"}),p?(y(!1),l.logInteraction(n.hitUnfollow({itemToBeUnfollowed:e})),t(e)):(y(!0),l.logInteraction(n.hitFollow({itemToBeFollowed:e})))}),[p,l,c,t,y,o,e]);if(d&&d.uri===e)return null;const U=p?s.Ru.get("contextmenu.unfollow"):s.Ru.get("contextmenu.follow");return(0,m.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:n,disabled:a,onClick:w,leadingIcon:p?(0,m.jsx)(f.M,{semanticColor:"textBrightAccent",size:"small"}):(0,m.jsx)(k.h,{semanticColor:"textSubdued",size:"small"}),children:U})},w=r.memo((function(e){return(0,m.jsx)(d.pZ,{value:"follow-user",children:(0,m.jsx)(y,{...e})})}));var U=t(97395),S=t(5879),E=t(12032),L=t(90843),N=t(94822),I=t(75788),R=t(33887);function _({userUri:e}){const{currentSession:n}=(0,N.D)(),t=(0,I.d)(),o=(0,i.wA)(),l=(0,r.useCallback)((()=>{const t=(0,R.Bj)(n?.sessionMembers??[],e);t&&o((0,E.A9)(L.EL.REMOVE_PARTICIPANT,void 0,t))}),[n?.sessionMembers,o,e]),c=(0,R.kt)(t,e);return n?.active&&e&&c?(0,m.jsx)(u.D,{role:"menuitem",onClick:l,leadingIcon:(0,m.jsx)(S.f,{semanticColor:"textSubdued",size:"small"}),children:s.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,m.jsx)(m.Fragment,{})}var T=t(68055),A=t(43080),M=t(69611);const O=r.memo((function({uri:e,onEditProfileCallback:n}){const{user:t}=(0,i.d4)(C.Ht),{spec:r}=(0,M.o)(e),{data:a,loading:u}=(0,A.Z)(T.E$,[{uri:e}]);return u?null:a?(0,m.jsx)(d.pZ,{value:"user",children:(0,m.jsxs)(o.W,{children:[(0,m.jsx)(w,{uri:e}),(0,m.jsx)(_,{userUri:e}),(0,m.jsx)(l.X,{uri:a.uri,name:a.name,currentUserUri:t?.uri}),(0,m.jsx)(p,{onClick:n,canEdit:!(e!==t?.uri||a.edit_image_disabled&&a.edit_name_disabled)}),(0,m.jsx)(U.P,{spec:r,uri:e,canReportUser:!a.report_abuse_disabled,currentUserUri:t?.uri}),(0,m.jsx)(c.m,{spec:r,uri:e,displayText:s.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},306:(e,n,t)=>{t.d(n,{Y:()=>c});var r=t(30758),i=t(72574),s=t(12469),o=t(37395),l=t(9043);const c=e=>{const n=(0,o.f)(),[t,c]=(0,r.useState)(!1);if(!(0,i.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const a=(0,r.useCallback)((r=>r&&!t?n.followUsers([e]):!r&&t?n.unfollowUsers([e]):Promise.resolve()),[n,t,e]);return(0,r.useEffect)((()=>{c(!1),n.isFollowing([e]).then((n=>{c(n[e]??!1)}))}),[n,e]),(0,l.N)(s.mc.OPERATION_COMPLETE,(n=>{n.data.uris.includes(e)&&!n.data.error&&(n.data.operation===s.JK.FOLLOW_USER?c(!0):n.data.operation===s.JK.UNFOLLOW_USER&&c(!1))})),[t,a]}},70777:(e,n,t)=>{t.d(n,{N:()=>k,y:()=>g});var r=t(30758),i=t(11072);const s=[[/<iframe[^>]*>/gi,"<span>"],[/<\/iframe>/gi,"</span>"],[/<script[^>]*>/gi,"<span>"],[/<\/script>/gi,"</span>"],[/srcdoc=/gi,"data-invalid="],[/onerror=/gi,"data-invalid="],[/onload=/gi,"data-invalid="],[/<form[^>]*>/gi,"<span>"],[/<\/form>/gi,"</span>"],[/<input[^>]*>/gi,"<span>"],[/<\/input>/gi,"</span>"],[/<link[^>]*>/gi,"<span>"],[/<\/link>/gi,"</span>"]];function o(e){return["http://","https://","#","/","www","spotify:"].some((n=>e.startsWith(n)))?e:""}var l=t(84971),c=t(25983);const a="upb5J45er158T713LxUy";var u=t(87732),d=t(77431),m=t(86070);function p(e,n){return"tagName"in e&&e.tagName===n}function f(e){return"tagName"in e&&"string"==typeof e.tagName}const k=r.memo((function({source:e="",LinkComponent:n,onTimeStampClick:t,onLinkClick:u}){const k=(0,r.useMemo)((()=>function(e){const{LinkComponent:n,onTimeStampClick:t,onLinkClick:r}=e,s={replace:e=>{if(f(e)&&p(e,"a")&&n)try{return(0,m.jsx)(n,{to:o(e.attribs.href),onClick:r,children:(0,i.zd)(e.children.filter(h))})}catch(e){return null}else{if(f(e)&&p(e,"img")){const{src:n,alt:t,width:r,height:i}=e.attribs;return(0,m.jsx)(l._,{src:n,alt:t,loading:"eager",width:r,height:i,className:a})}if(f(e)&&p(e,"time")&&t)return(0,m.jsx)(c.D,{onClick:t,children:(0,i.zd)(e.children.filter(h))})}return e}};return s}({LinkComponent:n,onTimeStampClick:t,onLinkClick:u})),[n,t,u]),g=(0,r.useMemo)((()=>{return(0,i.Ay)((n=e,s.reduce(((e,n)=>{const[t,r]=n;return e.replace(t,r)}),n)),k);var n}),[e,k]);return(0,m.jsx)(d.tH,{fallback:()=>(0,m.jsx)(m.Fragment,{children:e}),children:g})})),g=r.memo((function({source:e="",paragraphClassName:n,variant:t="ballad",semanticColor:i,LinkComponent:s,onLinkClick:o,onTimeStampClick:l,splitter:c=/\n\n/g}){const a=(0,r.useMemo)((()=>e.split(c).map(((e,r)=>(0,m.jsx)(u.Z,{as:"p",className:n,variant:t,semanticColor:i,children:(0,m.jsx)(k,{source:e,LinkComponent:s,onTimeStampClick:l,onLinkClick:o})},r)))),[e,t,i,c,n,s,l,o]);return(0,m.jsx)(m.Fragment,{children:a})}));function h(e){return!(!e||"object"!=typeof e)&&((!("type"in e)||"cdata"!==e.type)&&((!("type"in e)||"root"!==e.type)&&("type"in e&&"comment"===e.type||(!(!("type"in e)||"string"!=typeof e.type||!["tag","script","style"].includes(e.type))||("type"in e&&"directive"===e.type||"type"in e&&"text"===e.type)))))}},25983:(e,n,t)=>{t.d(n,{D:()=>c});var r=t(30758);const i="NkWIcfgnWR9AXfikmWai",s="OvmkrxKmI82x4jlgEZG0";var o=t(87732),l=t(86070);const c=r.memo((function({onClick:e,children:n}){return(0,l.jsx)("button",{"data-testid":"clickable-timestamp",className:s,onClick:()=>{const t=a(n),r=1e3*t.split(":").reverse().reduce(((e,n,t)=>e+parseInt(n,10)*Math.pow(60,t)),0);e(r)},children:(0,l.jsx)(o.Z,{className:i,variant:"ballad",children:n})})}));function a(e){let n="";return r.Children.map(e,(e=>{"string"==typeof e||"number"==typeof e?n+=e:r.isValidElement(e)&&e.props.children&&(n+=a(e.props.children))})),n}},37395:(e,n,t)=>{t.d(n,{f:()=>s});var r=t(68334),i=t(18308);const s=()=>(0,i.N)(r.t)},9043:(e,n,t)=>{t.d(n,{N:()=>s});var r=t(30758),i=t(37395);const s=(e,n)=>{const t=(0,i.f)();(0,r.useEffect)((()=>t.getEvents().addListener(e,n)),[e,t,n])}},33887:(e,n,t)=>{t.d(n,{Bj:()=>i,T4:()=>s,kt:()=>o});var r=t(72574);function i(e,n){if(!n)return null;const t=(0,r.o_h)(n);if(!t||!(0,r.APS)(t))return null;const i=(0,r.XIp)(t.username);return e.find((e=>e.username===i))??null}function s(e){const n=e.getCurrentSession(),t=n?.sessionOwnerId;return t?n.sessionMembers.find((e=>e.id===t))??null:null}function o(e,n){if(!n||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const t=e.getCurrentSession(),r=i(t?.sessionMembers??[],n),o=s(e);return!!r&&r?.username!==o?.username}}}]);
//# sourceMappingURL=5287.js.map