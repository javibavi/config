"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[42],{80918:(e,t,i)=>{i.d(t,{X:()=>p});var n=i(30758),r=i(62411),l=i(49263),o=i(93492),s=i(12032),a=i(56695),d=i(71338),c=i(56116),u=i(48975),m=i(24395),b=i(21053),x=i(49593),h=i(68055),g=i(80687),v=i(86070);const E=({currentUserUri:e,uri:t,name:i,divider:m,onBlock:E})=>{const p=(0,c.W)(),f=!(0,u.n)(),{isBlocked:j,blockUser:w,unblockUser:y}=function(e,t,i,l){const[a,c]=(0,n.useState)(!1),u=(0,r.wA)(),m=(0,b.a)(),v=(0,g.A)(),{enqueueSnackbar:E}=(0,d.d)();return(0,n.useEffect)((()=>{e&&(0,h.zP)(v,{currentUserUri:e,uri:t}).then((e=>{if(m()){if(200!==e.status)throw new Error("Invalid response from socialgraph");c(e.body?.[0]?.is_dismissed||!1)}}))}),[e,t,m,v]),{isBlocked:a,blockUser:()=>{e&&u((0,s.zj)(t,i,l))},unblockUser:async()=>{e&&(await(0,h.kV)(x.n.getInstance(),{currentUserUri:e,uri:t}),E(o.Ru.get("feedback.unblock-user")))}}}(e,t,i,E),A=(0,n.useCallback)((async()=>{p({targetUri:t,intent:j?"unblock":"block",type:"click"}),j?await y():await w()}),[p,t,w,y,j]);if(!e||e===t)return null;const R=j?o.Ru.get("contextmenu.unblock"):o.Ru.get("contextmenu.block");return(0,v.jsx)(a.D,{role:"menuitem",divider:m,disabled:f,onClick:A,leadingIcon:(0,v.jsx)(l.r,{semanticColor:"textSubdued",size:"small"}),children:R})},p=n.memo((function(e){return(0,v.jsx)(m.pZ,{value:"block-user",children:(0,v.jsx)(E,{...e})})}))},34855:(e,t,i)=>{i.d(t,{B:()=>D});var n=i(30758),r=i(62411),l=i(93492),o=i(55669),s=i(80918),a=i(42026),d=i(33650),c=i(56695),u=i(24395),m=i(86070);const b=n.memo((function({onClick:e,divider:t,canEdit:i}){return e&&i?(0,m.jsx)(u.pZ,{value:"edit-profile",children:(0,m.jsx)(c.D,{role:"menuitem",divider:t,onClick:e,leadingIcon:(0,m.jsx)(d.G,{semanticColor:"textSubdued",size:"small"}),children:l.Ru.get("contextmenu.edit-profile")})}):null}));var x=i(27508),h=i(96869),g=i(8950),v=i(56116),E=i(48975),p=i(306),f=i(98962),j=i(82362);const w=()=>{},y=({uri:e,divider:t,onRemoveCallback:i=w})=>{const{spec:o,logger:s}=(0,j.r)(g.F,{data:{uri:e}}),a=(0,v.W)(),d=!(0,E.n)(),u=(0,r.d4)(f.Ht).user,[b,y]=(0,p.Y)(e),A=(0,n.useCallback)((()=>{const t=o.followButtonFactory();a({targetUri:e,intent:b?"unfollow":"follow",type:"click"}),b?(y(!1),s.logInteraction(t.hitUnfollow({itemToBeUnfollowed:e})),i(e)):(y(!0),s.logInteraction(t.hitFollow({itemToBeFollowed:e})))}),[b,s,a,i,y,o,e]);if(u&&u.uri===e)return null;const R=b?l.Ru.get("contextmenu.unfollow"):l.Ru.get("contextmenu.follow");return(0,m.jsx)(c.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:t,disabled:d,onClick:A,leadingIcon:b?(0,m.jsx)(x.M,{semanticColor:"textBrightAccent",size:"small"}):(0,m.jsx)(h.h,{semanticColor:"textSubdued",size:"small"}),children:R})},A=n.memo((function(e){return(0,m.jsx)(u.pZ,{value:"follow-user",children:(0,m.jsx)(y,{...e})})}));var R=i(97395),_=i(5879),k=i(12032),I=i(90843),N=i(94822),T=i(75788),C=i(33887);function L({userUri:e}){const{currentSession:t}=(0,N.D)(),i=(0,T.d)(),o=(0,r.wA)(),s=(0,n.useCallback)((()=>{const i=(0,C.Bj)(t?.sessionMembers??[],e);i&&o((0,k.A9)(I.EL.REMOVE_PARTICIPANT,void 0,i))}),[t?.sessionMembers,o,e]),a=(0,C.kt)(i,e);return t?.active&&e&&a?(0,m.jsx)(c.D,{role:"menuitem",onClick:s,leadingIcon:(0,m.jsx)(_.f,{semanticColor:"textSubdued",size:"small"}),children:l.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,m.jsx)(m.Fragment,{})}var O=i(68055),S=i(43080),U=i(69611);const D=n.memo((function({uri:e,onEditProfileCallback:t}){const{user:i}=(0,r.d4)(f.Ht),{spec:n}=(0,U.o)(e),{data:d,loading:c}=(0,S.Z)(O.E$,[{uri:e}]);return c?null:d?(0,m.jsx)(u.pZ,{value:"user",children:(0,m.jsxs)(o.W,{children:[(0,m.jsx)(A,{uri:e}),(0,m.jsx)(L,{userUri:e}),(0,m.jsx)(s.X,{uri:d.uri,name:d.name,currentUserUri:i?.uri}),(0,m.jsx)(b,{onClick:t,canEdit:!(e!==i?.uri||d.edit_image_disabled&&d.edit_name_disabled)}),(0,m.jsx)(R.P,{spec:n,uri:e,canReportUser:!d.report_abuse_disabled,currentUserUri:i?.uri}),(0,m.jsx)(a.m,{spec:n,uri:e,displayText:l.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},95056:(e,t,i)=>{i.d(t,{O:()=>b});var n=i(13505),r=i(555),l=i(18483),o=i(20951),s=i(33059),a=i(34838),d=i(86070);const c={[o.E.MEDIUM]:"titleMedium",[o.E.LARGE]:"titleMedium",[o.E.XLARGE]:"headlineMedium"},u={[o.E.LARGE]:"bodyMedium",[o.E.XLARGE]:"bodyMediumBold"},m={[o.E.LARGE]:"bodySmall",[o.E.XLARGE]:"bodySmall"},b=({title:e,subtitle:t,body:i,footnote:o,buttonText:b,callToActionClicked:x})=>{const h=(0,s.y)(),g=h&&c[h]||"titleSmall",v=h&&u[h]||"bodySmall",E=h&&m[h]||"marginal";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.E,{as:"h1",variant:g,semanticColor:"textBase",className:a.A.title,children:e}),(0,d.jsx)(n.E,{as:"h2",variant:v,semanticColor:"textSubdued",className:a.A.subtitle,children:t}),i,x&&(0,d.jsx)(r.$,{className:a.A.button,colorSet:"invertedLight",onClick:x,"data-testid":l.OL,children:b}),o&&(0,d.jsx)(n.E,{as:"p",variant:E,semanticColor:"textSubdued",className:a.A.note,children:o})]})}},11757:(e,t,i)=>{i.d(t,{d:()=>f});var n=i(97500),r=i.n(n),l=i(93492),o=i(19837),s=i(64359),a=i(95056),d=i(18483);const c="gJmoZouW_m4rUBRFHmu7",u="r4j9hiYJ8q0SQpEsgvSh";var m=i(86070);const b=e=>(0,m.jsx)("div",{className:c,children:(0,m.jsx)("div",{className:u,children:(0,m.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var x=i(20951),h=i(33059),g=i(34838);const v={name:"",username:"",image_url:null,hash:""},E={[x.E.MEDIUM]:164,[x.E.LARGE]:164,[x.E.XLARGE]:270},p=(e,t)=>(0,m.jsx)(o.e,{label:l.Ru.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:"xxlarge",customPlaceholder:(0,m.jsx)(b,{iconSize:t}),piled:!0}),f=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=!!e.members?.length,c=n&&e.members?.[0]||e.recipient||v,u=n&&e.recipient||null,b=(0,h.y)(),x=b&&E[b]||128,f=Math.round(.475*x);return(0,m.jsxs)("div",{className:r()(g.A.container,g.A.TwoUsers),"data-testid":d.xg,ref:i,children:[(0,m.jsx)(s.Q,{children:l.Ru.get("blend.invite.page-title")}),(0,m.jsxs)("div",{className:g.A.facepile,children:[(0,m.jsx)(o.e,{label:c.name,images:[{url:c.image_url??"",width:x,height:x}],width:x,userIconSize:"xxlarge"}),u?(0,m.jsx)(o.e,{label:u.name,images:[{url:u.image_url??"",width:x,height:x}],width:x,userIconSize:"xxlarge",piled:!0}):p(x,f)]}),(0,m.jsx)(a.O,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,buttonText:e.button_text,callToActionClicked:t})]})}},42145:(e,t,i)=>{i.d(t,{A:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},306:(e,t,i)=>{i.d(t,{Y:()=>a});var n=i(30758),r=i(72574),l=i(12469),o=i(37395),s=i(9043);const a=e=>{const t=(0,o.f)(),[i,a]=(0,n.useState)(!1);if(!(0,r.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const d=(0,n.useCallback)((n=>n&&!i?t.followUsers([e]):!n&&i?t.unfollowUsers([e]):Promise.resolve()),[t,i,e]);return(0,n.useEffect)((()=>{a(!1),t.isFollowing([e]).then((t=>{a(t[e]??!1)}))}),[t,e]),(0,s.N)(l.mc.OPERATION_COMPLETE,(t=>{t.data.uris.includes(e)&&!t.data.error&&(t.data.operation===l.JK.FOLLOW_USER?a(!0):t.data.operation===l.JK.UNFOLLOW_USER&&a(!1))})),[i,d]}},18483:(e,t,i)=>{i.d(t,{OL:()=>s,VE:()=>n,ev:()=>l,rg:()=>o,xg:()=>r});const n="blend-deleted-container",r="blend-two-user-container",l="blend-multi-user-container",o="blend-full-container",s="blend-cta-button"},48409:(e,t,i)=>{i.d(t,{B6:()=>s,OE:()=>o,YW:()=>l,pd:()=>r});var n=i(44816);let r=function(e){return e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED",e}({});const l=(e,t)=>e.build().withHost(n.t2).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),o=(e,t)=>e.build().withHost(n.t2).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),s=e=>e.build().withHost(n.t2).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},71903:(e,t,i)=>{i.d(t,{G:()=>l});var n=i(20951),r=i(98370);const l=()=>(0,r.x)({[n.E.SMALL]:536,[n.E.MEDIUM]:792,[n.E.LARGE]:1048,[n.E.XLARGE]:1688})},38623:(e,t,i)=>{i.d(t,{y:()=>u});var n=i(30758),r=i(48237),l=i(62411),o=i(93492),s=i(48409),a=i(98962),d=i(80687),c=i(93885);function u(e,t){const{user:i}=(0,l.d4)(a.Ht),{enqueueSnackbar:u}=(0,r.dh)(),m=(0,d.A)(),b=(0,n.useCallback)((async()=>{const e=await(0,s.B6)(m),t=e.body?.invite;if(!t)throw new Error("unable to generate invite link");return i?.display_name?o.Ru.get("blend.invite.body-with-name",i.display_name,e.body?.invite):o.Ru.get("blend.invite.body-without-name",e.body?.invite)}),[i?.display_name,m]);return async()=>{try{await(0,c.l)(b()),u(o.Ru.get("feedback.link-copied"))}catch{u(o.Ru.get("error.generic"))}if(e&&t){const i=e.inviteButtonFactory().hitCopyToClipboard();t.logInteraction(i)}}}},6666:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(30758),r=i(62411),l=i(16914),o=i(93492),s=i(64359),a=i(11757),d=i(42145),c=i(48409),u=i(71903),m=i(38623),b=i(98962),x=i(33059),h=i(82362),g=i(60744),v=i(95717),E=i(86070);const p={page_type:c.pd.PENDING_INVITATION,get title(){return o.Ru.get("web-player.blend.group-invite.header")},get subtitle(){return o.Ru.get("web-player.blend.duo-invite.description")},get button_text(){return o.Ru.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},f=()=>{const{spec:e,logger:t}=(0,h.r)(l.f,{}),i=(0,m.y)(e,t),{ref:c,breakpoint:f}=(0,u.G)(),{user:j}=(0,r.d4)(b.Ht),w=j?.uri?(0,g.v)(j?.uri):"",y=(e=>({...p,members:[e],footnote:o.Ru.get("web-player.blend.group-invite.warning")}))({name:j?.display_name||"",username:w,image_url:(0,v.g)(j?.images)?.url||null,hash:""});return j?(0,E.jsxs)(n.Suspense,{fallback:null,children:[(0,E.jsx)(s.Q,{children:o.Ru.get("web-player.blend.invite.page-title")}),(0,E.jsx)(x.o.Provider,{value:f,children:(0,E.jsx)(a.d,{invitation:y,callToActionClicked:i,breakpointEltRef:c})})]}):(0,E.jsx)(d.A,{})}},45714:(e,t,i)=>{i.r(t),i.d(t,{default:()=>q});var n=i(30758),r=i(62411),l=i(85387),o=i(807),s=i(3118),a=i(16914),d=i(72574),c=i(93492),u=i(8030),m=i(78218),b=i(95056),x=i(18483),h=i(34838),g=i(86070);const v=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>(0,g.jsxs)("div",{className:h.A.container,"data-testid":x.rg,ref:i,children:[(0,g.jsx)(m.u,{size:"xxlarge"}),(0,g.jsx)(b.O,{title:e.title,subtitle:e.subtitle,buttonText:e.button_text,footnote:null,callToActionClicked:t})]});var E=i(64359),p=i(97500),f=i.n(p),j=i(13505),w=i(19837),y=i(12367),A=i(34855),R=i(5119);const _="HKAYWYmxd5Ie8WSi0a4y",k="i52u_T3b50wraodIaORk",I="xakiNVMlUf6geF67FEgy",N="IRhTesoeIiwswlly0Dvg",T="LNJzE17iskXWmfKAzY4U",C="qzBr7X7cdLUhWdk0r8lL",L=({uri:e,imageUrl:t,name:i})=>(0,g.jsx)("li",{children:(0,g.jsx)(y.h,{menu:(0,g.jsx)(A.B,{uri:e}),children:(0,g.jsx)(R.N,{to:e,children:(0,g.jsxs)("div",{className:N,children:[(0,g.jsx)(w.e,{images:[{url:t,width:null,height:null}],label:i,width:32,userIconSize:"medium",className:T}),(0,g.jsx)(j.E,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:i})]})})})}),O=({members:e,headingText:t,className:i})=>(0,g.jsxs)("div",{className:f()(_,i),children:[(0,g.jsx)("div",{children:(0,g.jsx)(j.E,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:k,children:t})}),(0,g.jsx)("ul",{className:I,children:e&&e.map((e=>(0,g.jsx)(L,{imageUrl:e.image_url||"",name:e.name,uri:(0,d.Qjr)(e.username).toURI()},e.username)))}),(0,g.jsx)("div",{className:C})]}),S=({invitation:e,callToActionClicked:t,breakpointEltRef:i})=>{const n=e.members||[],r=(0,g.jsx)("div",{className:h.A.userListContainer,"data-testid":x.ev,children:(0,g.jsx)(O,{className:h.A.userList,headingText:e.members_title,members:n})});return(0,g.jsxs)("div",{className:h.A.container,ref:i,children:[(0,g.jsx)(E.Q,{children:c.Ru.get("blend.join.title")}),(0,g.jsx)(b.O,{title:e.title,subtitle:e.subtitle,footnote:e.footnote,body:r,buttonText:e.button_text,callToActionClicked:t})]})};var U=i(11757),D=i(48409),M=i(71903),P=i(38623),B=i(71338),Y=i(80687);var z=i(90630),G=i(33059),F=i(43080),X=i(82362);const J=({invitationId:e})=>{const t=(0,l.Zp)(),i=(0,s.NC)(z.CXJ),{data:r,error:m,loading:E}=(0,F.Z)(D.YW,[e]),{spec:p,logger:f}=(0,X.r)(a.f,{}),j=(0,P.y)(p,f),w=function(e,t,i){const{enqueueSnackbar:n}=(0,B.d)(),r=(0,Y.A)(),o=(0,l.Zp)();return async()=>{try{const t=await(0,D.OE)(r,e),i=(0,d.o_h)(t?.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");o(i,{replace:!0})}catch{n(c.Ru.get("error.request-playlist-failure"))}if(t&&i){const e=t.joinButtonFactory().hitCreatePlaylist();i.logInteraction(e)}}}(e,p,f),{ref:y,breakpoint:A}=(0,M.G)();(0,n.useEffect)((()=>{if(r?.body?.page_type===D.pd.ALREADY_JOINED){const e=(0,d.o_h)(r?.body.playlist_uri)?.toURLPath(!0);e&&t(e,{replace:!0})}}),[r?.body?.page_type,r?.body?.playlist_uri,t]);const R=null===r||!r.body;if(R||E||m)return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!!m||!E&&R,errorMessage:c.Ru.get("error.generic")});const _=r?.body.members?.length||0,k=i===z.YVK.TWO_USER;switch(r?.body.page_type){case D.pd.DELETED:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsxs)("div",{className:h.A.container,ref:y,"data-testid":x.VE,children:[(0,g.jsx)(o.x,{size:"xxlarge"}),(0,g.jsx)(b.O,{title:r.body.title,subtitle:r.body.subtitle,buttonText:r.body.button_text,footnote:r.body.footnote,callToActionClicked:j})]})});case D.pd.ALREADY_JOINED:return(0,g.jsx)(u.LoadingPage,{hasError:!1,errorMessage:c.Ru.get("error.request-playlist-failure")});case D.pd.READY_TO_JOIN_EMPTY_BLEND:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(U.d,{invitation:r.body,breakpointEltRef:y,callToActionClicked:w})});case D.pd.READY_TO_JOIN_ALREADY_CREATED_BLEND:return k&&_>=2?(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(v,{invitation:{...r.body,title:c.Ru.get("blend.link-invialid.header"),subtitle:c.Ru.get("blend.link-invalid.subtitle"),button_text:c.Ru.get("blend.invite.button-title")},callToActionClicked:j,breakpointEltRef:y})}):(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(S,{invitation:r.body,callToActionClicked:w,breakpointEltRef:y})});case D.pd.MAX_MEMBERS:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(v,{invitation:r.body,callToActionClicked:j,breakpointEltRef:y})});case D.pd.PENDING_INVITATION:return(0,g.jsx)(G.o.Provider,{value:A,children:(0,g.jsx)(U.d,{invitation:r.body,callToActionClicked:j,breakpointEltRef:y})});default:return(0,g.jsx)(u.LoadingPage,{timeoutInMs:1e3,hasError:!0,errorMessage:c.Ru.get("error.generic")})}};var V=i(42145),W=i(98962);const H=({invitationId:e})=>{const{user:t}=(0,r.d4)(W.Ht);return t?(0,g.jsx)(n.Suspense,{fallback:null,children:(0,g.jsx)(J,{invitationId:e})}):(0,g.jsx)(V.A,{})},q=(0,n.memo)((()=>{const{invitationId:e=""}=(0,l.g)();return(0,g.jsx)(H,{invitationId:e})}))},37395:(e,t,i)=>{i.d(t,{f:()=>l});var n=i(68334),r=i(18308);const l=()=>(0,r.N)(n.t)},9043:(e,t,i)=>{i.d(t,{N:()=>l});var n=i(30758),r=i(37395);const l=(e,t)=>{const i=(0,r.f)();(0,n.useEffect)((()=>i.getEvents().addListener(e,t)),[e,i,t])}},33887:(e,t,i)=>{i.d(t,{Bj:()=>r,T4:()=>l,kt:()=>o});var n=i(72574);function r(e,t){if(!t)return null;const i=(0,n.o_h)(t);if(!i||!(0,n.APS)(i))return null;const r=(0,n.XIp)(i.username);return e.find((e=>e.username===r))??null}function l(e){const t=e.getCurrentSession(),i=t?.sessionOwnerId;return i?t.sessionMembers.find((e=>e.id===i))??null:null}function o(e,t){if(!t||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const i=e.getCurrentSession(),n=r(i?.sessionMembers??[],t),o=l(e);return!!n&&n?.username!==o?.username}},34838:(e,t,i)=>{i.d(t,{A:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.js.map